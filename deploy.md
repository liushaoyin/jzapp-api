# 记账助手 - 部署和测试指南

## 🚀 部署步骤

### 1. 云函数部署
1. 打开 HBuilderX
2. 在项目根目录右键选择 `uniCloud` 文件夹
3. 选择 `上传所有云函数、公共模块及actions`
4. 等待部署完成

### 2. 数据库初始化
1. 在 HBuilderX 中打开 `uniCloud` 控制台
2. 进入数据库管理
3. 创建以下集合：
   - `bills` (账单集合)
   - `members` (成员集合)
   - `system_config` (系统配置集合)

### 3. H5 发布
1. 在 HBuilderX 中选择 `发行` -> `网站-H5手机版`
2. 配置发布参数：
   - 网站标题：记账助手
   - 网站描述：简单易用的家庭记账应用
3. 点击发行

## 🧪 测试步骤

### 第一步：访问测试页面
1. 打开发布后的链接
2. 点击页面右上角的 `系统诊断` 按钮
3. 或者直接访问：`/pages/test/test`

### 第二步：运行诊断测试
1. 点击 `开始测试` 按钮
2. 观察测试结果：
   - ✅ 网络连接：检查基础网络是否正常
   - ✅ 云函数连接：检查云函数是否可访问
   - ✅ 数据库连接：检查数据库是否正常

### 第三步：查看错误日志
如果测试失败，查看错误日志：
- 网络连接失败：可能是地理位置限制
- 云函数连接失败：检查云函数部署状态
- 数据库连接失败：检查数据库配置

## 🔧 常见问题解决

### 问题1：页面显示空白
**可能原因：**
- 云函数未部署
- 网络连接问题
- 地理位置限制

**解决方案：**
1. 检查云函数部署状态
2. 使用VPN（如果在国外）
3. 检查浏览器控制台错误信息

### 问题2：云函数调用失败
**可能原因：**
- 云函数代码错误
- 云空间配置问题
- 权限设置问题

**解决方案：**
1. 重新部署云函数
2. 检查云空间配置
3. 查看云函数日志

### 问题3：数据库连接失败
**可能原因：**
- 数据库集合不存在
- 权限配置错误
- 数据库服务异常

**解决方案：**
1. 创建必要的数据库集合
2. 检查数据库权限设置
3. 联系云服务提供商

## 📱 功能测试清单

### 基础功能测试
- [ ] 账单添加功能
- [ ] 账单编辑功能
- [ ] 账单删除功能
- [ ] 成员管理功能
- [ ] 统计数据显示

### 高级功能测试
- [ ] 语音记账功能
- [ ] 系统检查功能
- [ ] 数据刷新功能
- [ ] 初始化功能

### 网络功能测试
- [ ] 网络连接检测
- [ ] 云函数调用
- [ ] 数据库操作
- [ ] 错误处理

## 🌍 国际访问配置

### 国外访问问题
如果在国外访问遇到问题：

1. **使用VPN**
   - 连接到中国境内的VPN服务器
   - 确保可以访问阿里云服务

2. **配置CDN**
   - 使用国际CDN服务
   - 配置多地域节点

3. **更换云服务商**
   - 考虑使用国际云服务商
   - 如AWS、Google Cloud等

### 网络优化建议
1. 使用HTTPS协议
2. 启用Gzip压缩
3. 配置浏览器缓存
4. 优化图片和资源加载

## 📞 技术支持

如果遇到问题，请：
1. 查看错误日志
2. 运行系统诊断
3. 检查网络连接
4. 联系技术支持

## 📝 更新日志

### v1.0.1 (2024-07-30)
- 添加系统诊断功能
- 优化网络错误处理
- 改进国外访问支持
- 添加详细测试指南 