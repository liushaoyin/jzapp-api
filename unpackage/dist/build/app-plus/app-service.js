(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"011a":function(e,t){function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(e.exports=n=function(){return!!t},e.exports.__esModule=!0,e.exports["default"]=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},"0bdb":function(e,t,n){var r=n("d551");function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports["default"]=e.exports},"0d3d":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","container"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","filter-section"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","filter-tabs"),attrs:{_i:2}},e._l(e._$s(3,"f",{forItems:e.timeTabs}),(function(t,r,i,a){return n("view",{key:e._$s(3,"f",{forIndex:i,key:t.value}),class:e._$s("3-"+a,"c",["filter-tab",{active:e.currentTimeRange===t.value}]),attrs:{_i:"3-"+a},on:{click:function(n){return e.selectTimeRange(t.value)}}},[e._v(e._$s("3-"+a,"t0-0",e._s(t.label)))])})),0)]),n("view",{staticClass:e._$s(4,"sc","overview-cards"),attrs:{_i:4}},[n("view",{staticClass:e._$s(5,"sc","overview-card"),attrs:{_i:5}},[n("text",{staticClass:e._$s(6,"sc","overview-label"),attrs:{_i:6}}),n("text",{staticClass:e._$s(7,"sc","overview-value expense"),attrs:{_i:7}},[e._v(e._$s(7,"t0-0",e._s(e.totalExpense)))])]),n("view",{staticClass:e._$s(8,"sc","overview-card"),attrs:{_i:8}},[n("text",{staticClass:e._$s(9,"sc","overview-label"),attrs:{_i:9}}),n("text",{staticClass:e._$s(10,"sc","overview-value income"),attrs:{_i:10}},[e._v(e._$s(10,"t0-0",e._s(e.totalIncome)))])]),n("view",{staticClass:e._$s(11,"sc","overview-card"),attrs:{_i:11}},[n("text",{staticClass:e._$s(12,"sc","overview-label"),attrs:{_i:12}}),n("text",{class:e._$s(13,"c",["overview-value",e.netIncome>=0?"income":"expense"]),attrs:{_i:13}},[e._v(e._$s(13,"t0-0",e._s(e.netIncome)))])])]),n("view",{staticClass:e._$s(14,"sc","stats-section"),attrs:{_i:14}},[n("view",{staticClass:e._$s(15,"sc","section-header"),attrs:{_i:15}},[n("text",{staticClass:e._$s(16,"sc","section-title"),attrs:{_i:16}})]),n("view",{staticClass:e._$s(17,"sc","category-list"),attrs:{_i:17}},e._l(e._$s(18,"f",{forItems:e.expenseCategories}),(function(t,r,i,a){return n("view",{key:e._$s(18,"f",{forIndex:i,key:t.name}),staticClass:e._$s("18-"+a,"sc","category-item"),attrs:{_i:"18-"+a}},[n("view",{staticClass:e._$s("19-"+a,"sc","category-info"),attrs:{_i:"19-"+a}},[n("text",{staticClass:e._$s("20-"+a,"sc","category-name"),attrs:{_i:"20-"+a}},[e._v(e._$s("20-"+a,"t0-0",e._s(t.name)))]),n("text",{staticClass:e._$s("21-"+a,"sc","category-amount"),attrs:{_i:"21-"+a}},[e._v(e._$s("21-"+a,"t0-0",e._s(t.amount)))])]),n("view",{staticClass:e._$s("22-"+a,"sc","category-bar"),attrs:{_i:"22-"+a}},[n("view",{staticClass:e._$s("23-"+a,"sc","category-progress"),style:e._$s("23-"+a,"s",{width:t.percentage+"%"}),attrs:{_i:"23-"+a}})]),n("text",{staticClass:e._$s("24-"+a,"sc","category-percentage"),attrs:{_i:"24-"+a}},[e._v(e._$s("24-"+a,"t0-0",e._s(t.percentage)))])])})),0)]),n("view",{staticClass:e._$s(25,"sc","stats-section"),attrs:{_i:25}},[n("view",{staticClass:e._$s(26,"sc","section-header"),attrs:{_i:26}},[n("text",{staticClass:e._$s(27,"sc","section-title"),attrs:{_i:27}})]),n("view",{staticClass:e._$s(28,"sc","category-list"),attrs:{_i:28}},e._l(e._$s(29,"f",{forItems:e.incomeCategories}),(function(t,r,i,a){return n("view",{key:e._$s(29,"f",{forIndex:i,key:t.name}),staticClass:e._$s("29-"+a,"sc","category-item"),attrs:{_i:"29-"+a}},[n("view",{staticClass:e._$s("30-"+a,"sc","category-info"),attrs:{_i:"30-"+a}},[n("text",{staticClass:e._$s("31-"+a,"sc","category-name"),attrs:{_i:"31-"+a}},[e._v(e._$s("31-"+a,"t0-0",e._s(t.name)))]),n("text",{staticClass:e._$s("32-"+a,"sc","category-amount"),attrs:{_i:"32-"+a}},[e._v(e._$s("32-"+a,"t0-0",e._s(t.amount)))])]),n("view",{staticClass:e._$s("33-"+a,"sc","category-bar"),attrs:{_i:"33-"+a}},[n("view",{staticClass:e._$s("34-"+a,"sc","category-progress income"),style:e._$s("34-"+a,"s",{width:t.percentage+"%"}),attrs:{_i:"34-"+a}})]),n("text",{staticClass:e._$s("35-"+a,"sc","category-percentage"),attrs:{_i:"35-"+a}},[e._v(e._$s("35-"+a,"t0-0",e._s(t.percentage)))])])})),0)]),n("view",{staticClass:e._$s(36,"sc","stats-section"),attrs:{_i:36}},[n("view",{staticClass:e._$s(37,"sc","section-header"),attrs:{_i:37}},[n("text",{staticClass:e._$s(38,"sc","section-title"),attrs:{_i:38}})]),n("view",{staticClass:e._$s(39,"sc","trend-chart"),attrs:{_i:39}},[n("view",{staticClass:e._$s(40,"sc","chart-placeholder"),attrs:{_i:40}},[n("text",{staticClass:e._$s(41,"sc","chart-text"),attrs:{_i:41}})])])])])},i=[]},"0ee4":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},"127e":function(e,t,n){var r=n("3b2d"),i=n("9fc1")();e.exports=i;try{regeneratorRuntime=i}catch(a){"object"===("undefined"===typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},"14a7":function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("127e")),a=r(n("ee10")),o=r(n("172d")),s={data:function(){return{currentTimeRange:"month",timeTabs:[{label:"\u672c\u5468",value:"week"},{label:"\u672c\u6708",value:"month"},{label:"\u672c\u5e74",value:"year"}],totalExpense:"0.00",totalIncome:"0.00",netIncome:"0.00",expenseCategories:[],incomeCategories:[]}},onLoad:function(){this.loadStats()},methods:{selectTimeRange:function(e){this.currentTimeRange=e,this.loadStats()},loadStats:function(){var t=this;return(0,a.default)(i.default.mark((function n(){var r,a,s,u,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,uni.showLoading({title:"\u52a0\u8f7d\u4e2d..."}),r=t.getDateRange(),a=r.startDate,s=r.endDate,n.next=5,o.default.getBills({startDate:a.toISOString(),endDate:s.toISOString(),type:"expense"});case 5:return u=n.sent,n.next=8,o.default.getBills({startDate:a.toISOString(),endDate:s.toISOString(),type:"income"});case 8:c=n.sent,200===u.code&&t.processExpenseData(u.data.list),200===c.code&&t.processIncomeData(c.data.list),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](0),e("error","\u52a0\u8f7d\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",n.t0," at pages/stats/stats.vue:160"),uni.showToast({title:"\u52a0\u8f7d\u5931\u8d25",icon:"none"});case 17:return n.prev=17,uni.hideLoading(),n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[0,13,17,20]])})))()},getDateRange:function(){var e,t,n=new Date;switch(this.currentTimeRange){case"week":var r=new Date(n);r.setDate(n.getDate()-n.getDay()),r.setHours(0,0,0,0),e=r,t=new Date(r),t.setDate(r.getDate()+6),t.setHours(23,59,59,999);break;case"month":e=new Date(n.getFullYear(),n.getMonth(),1),t=new Date(n.getFullYear(),n.getMonth()+1,0),t.setHours(23,59,59,999);break;case"year":e=new Date(n.getFullYear(),0,1),t=new Date(n.getFullYear(),11,31),t.setHours(23,59,59,999);break;default:e=new Date(n.getFullYear(),n.getMonth(),1),t=new Date(n.getFullYear(),n.getMonth()+1,0),t.setHours(23,59,59,999)}return{startDate:e,endDate:t}},processExpenseData:function(e){var t={},n=0;e.forEach((function(e){var r=e.category||"\u5176\u4ed6";t[r]||(t[r]=0),t[r]+=e.amount,n+=e.amount})),this.totalExpense=n.toFixed(2),this.expenseCategories=Object.keys(t).map((function(e){return{name:e,amount:t[e].toFixed(2),percentage:n>0?Math.round(t[e]/n*100):0}})).sort((function(e,t){return parseFloat(t.amount)-parseFloat(e.amount)}))},processIncomeData:function(e){var t={},n=0;e.forEach((function(e){var r=e.category||"\u5176\u4ed6";t[r]||(t[r]=0),t[r]+=e.amount,n+=e.amount})),this.totalIncome=n.toFixed(2);var r=n-parseFloat(this.totalExpense);this.netIncome=r.toFixed(2),this.incomeCategories=Object.keys(t).map((function(e){return{name:e,amount:t[e].toFixed(2),percentage:n>0?Math.round(t[e]/n*100):0}})).sort((function(e,t){return parseFloat(t.amount)-parseFloat(e.amount)}))}}};t.default=s}).call(this,n("f3b9")["default"])},1626:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{directives:[{name:"show",rawName:"v-show",value:e._$s(0,"v-show",e.isShow),expression:"_$s(0,'v-show',isShow)"}],ref:"ani",class:e._$s(0,"c",e.customClass),style:e._$s(0,"s",e.transformStyles),attrs:{animation:e._$s(0,"a-animation",e.animationData),_i:0},on:{click:e.onClick}},[e._t("default",null,{_i:1})],2)},i=[]},"172d":function(e,t,n){"use strict";(function(e,r){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("127e")),o=i(n("ee10")),s=i(n("67ad")),u=i(n("0bdb")),c=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"callFunction",value:function(){var t=(0,o.default)(a.default.mark((function t(n){var i,o,s=arguments;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:{},t.prev=1,t.next=4,e.callFunction({name:n,data:i});case 4:return o=t.sent,t.abrupt("return",o.result);case 8:throw t.prev=8,t.t0=t["catch"](1),r("error","\u8c03\u7528\u4e91\u51fd\u6570 ".concat(n," \u5931\u8d25:"),t.t0," at common/api.js:12"),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"addBill",value:function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("addBill",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBills",value:function(){var e=(0,o.default)(a.default.mark((function e(){var t,n=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.callFunction("getBills",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateBill",value:function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("updateBill",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBill",value:function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("deleteBill",{_id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addMember",value:function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("addMember",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=(0,o.default)(a.default.mark((function e(){var t,n=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.callFunction("getMembers",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateMember",value:function(){var e=(0,o.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("updateMember",{_id:t,name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteMember",value:function(){var e=(0,o.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("deleteMember",{_id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStats",value:function(){var e=(0,o.default)(a.default.mark((function e(){var t,n=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.callFunction("getStats",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backupData",value:function(){var e=(0,o.default)(a.default.mark((function e(t){var n,r=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this.callFunction("backupData",{action:t,data:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initData",value:function(){var e=(0,o.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.callFunction("initData");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleError",value:function(){var e=(0,o.default)(a.default.mark((function e(t,n){var r,i=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,this.callFunction("errorHandler",{error:t,functionName:n,params:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(),l=new c,f=l;t.default=f}).call(this,n("861b")["uniCloud"],n("f3b9")["default"])},"1e24":function(e,t,n){if("undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))}),"undefined"!==typeof uni&&uni&&uni.requireGlobal){var r=uni.requireGlobal();ArrayBuffer=r.ArrayBuffer,Int8Array=r.Int8Array,Uint8Array=r.Uint8Array,Uint8ClampedArray=r.Uint8ClampedArray,Int16Array=r.Int16Array,Uint16Array=r.Uint16Array,Int32Array=r.Int32Array,Uint32Array=r.Uint32Array,Float32Array=r.Float32Array,Float64Array=r.Float64Array,BigInt64Array=r.BigInt64Array,BigUint64Array=r.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/index/index",(function(){return Vue.extend(n("aa45").default)})),__definePage("pages/members/members",(function(){return Vue.extend(n("9cf7").default)})),__definePage("pages/stats/stats",(function(){return Vue.extend(n("505c").default)}))},2388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={appid:"__UNI__D09F619"}},2470:function(e,t,n){"use strict";n.r(t);var r=n("6d4a");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);var a=n("828b"),o=Object(a["a"])(r["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);t["default"]=o.exports},"27f0":function(e,t,n){"use strict";var r=n("47a9"),i=r(n("7ca3"));n("1e24"),n("3c60"),n("861b");var a=r(n("2470")),o=r(n("bb14")),s=r(n("951c"));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}s.default.config.productionTip=!1,s.default.prototype.$store=o.default,s.default.prototype.$adpid="1111111111",s.default.prototype.$backgroundAudioData={playing:!1,playTime:0,formatedPlayTime:"00:00:00"},a.default.mpType="app";var c=new s.default(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({store:o.default},a.default));c.$mount()},"2d67":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new Promise((function(t,n){var r=uni.getSystemInfoSync(),i=r.appId,a=r.appVersion;"string"===typeof i&&"string"===typeof a&&i.length>0&&a.length>0?plus.runtime.getProperty(i,(function(r){if(r.version){var o={action:"checkVersion",appid:i,appVersion:a,wgtVersion:r.version};e.callFunction({name:"uni-upgrade-center",data:o,success:function(e){t(e.result)},fail:function(e){n(e)}})}else n("widgetInfo.version is EMPTY")})):n("plus.runtime.appid is EMPTY")}))}}).call(this,n("861b")["uniCloud"])},3352:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},"34cf":function(e,t,n){var r=n("ed45"),i=n("7172"),a=n("6382"),o=n("dd3e");e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports["default"]=e.exports},3683:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={uniTransition:n("675f").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._$s(0,"i",e.showPopup)?n("view",{staticClass:e._$s(0,"sc","uni-popup"),class:e._$s(0,"c",[e.popupstyle,e.isDesktop?"fixforpc-z-index":""]),attrs:{_i:0}},[n("view",{attrs:{_i:1},on:{touchstart:e.touchstart}},[e._$s(2,"i",e.maskShow)?n("uni-transition",{key:"1",attrs:{name:"mask","mode-class":"fade",styles:e.maskClass,duration:e.duration,show:e.showTrans,_i:2},on:{click:e.onTap}}):e._e(),n("uni-transition",{key:"2",attrs:{"mode-class":e.ani,name:"content",styles:e.transClass,duration:e.duration,show:e.showTrans,_i:3},on:{click:e.onTap}},[n("view",{staticClass:e._$s(4,"sc","uni-popup__wrapper"),class:e._$s(4,"c",[e.popupstyle]),style:e._$s(4,"s",e.getStyles),attrs:{_i:4},on:{click:e.clear}},[e._t("default",null,{_i:5})],2)])],1)]):e._e()},a=[]},"3b2d":function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},"3c60":function(e,t,n){(function(e){var t,r,i=n("8ffa"),a=n("4ffb"),o=n("b4d2"),s=n("67ad"),u=n("0bdb"),c=n("3b2d"),l=n("7ca3");function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}var d=uni.getSystemInfoSync(),p="__UNI__D09F619",h=function(e,t){var n=uni.getStorageSync("$$STAT__DBDATA:"+p)||{};n||(n={}),n[e]=t,uni.setStorageSync("$$STAT__DBDATA:"+p,n)},v=function(e){var t=uni.getStorageSync("$$STAT__DBDATA:"+p)||{};if(!t[e]){var n=uni.getStorageSync("$$STAT__DBDATA:"+p);if(n||(n={}),!n[e])return;t[e]=n[e]}return t[e]},m=function(e){var t=uni.getStorageSync("$$STAT__DBDATA:"+p)||{};t[e]?(delete t[e],uni.setStorageSync("$$STAT__DBDATA:"+p,t)):(t=uni.getStorageSync("$$STAT__DBDATA:"+p),t[e]&&(delete t[e],uni.setStorageSync("$$STAT__DBDATA:"+p,t)))},g={version:"2",enable:!0},y={},_=n("ae25").default,b=_.pages;for(var w in b){var k,x=b[w],S=x.navigationBarTitleText||x.defaultTitle||(null===(k=x.navigationBar)||void 0===k?void 0:k.titleText)||"";S&&(y[w]=S)}function T(){var e="";if("n"===I()){try{e=plus.runtime.getDCloudId()}catch(t){e=""}return e}try{e=uni.getStorageSync("__DC_STAT_UUID")}catch(t){e="__DC_UUID_VALUE"}if(!e){e=Date.now()+""+Math.floor(1e7*Math.random());try{uni.setStorageSync("__DC_STAT_UUID",e)}catch(t){uni.setStorageSync("__DC_STAT_UUID","__DC_UUID_VALUE")}}return e}var O={appid:"__UNI__D09F619"},I=function(){var e,t=(e={app:"n","app-plus":"n",h5:"h5","mp-weixin":"wx"},l(e,["y","a","p","mp-ali"].reverse().join(""),"ali"),l(e,"mp-baidu","bd"),l(e,"mp-toutiao","tt"),l(e,"mp-qq","qq"),l(e,"quickapp-native","qn"),l(e,"mp-kuaishou","ks"),l(e,"mp-lark","lark"),l(e,"quickapp-webview","qw"),e);if("ali"===t["app-plus"]&&my&&my.env){var n=my.env.clientName;if("ap"===n)return"ali";if("dingtalk"===n)return"dt"}return t["app-plus"]},P=function(e){var t=I(),n="";return e||("wx"===t&&(n=uni.getLaunchOptionsSync().scene),n)},A=function(e){var t=e||E();if("bd"===I()){var n=t.$mp&&t.$mp.page&&t.$mp.page.is,r=t.$scope&&t.$scope.is;return n||r||""}return t.route||t.$scope&&t.$scope.route||t.$mp&&t.$mp.page.route},C=function(e){var t=e&&(e.$page||e.$scope&&e.$scope.$page),n=uni.getStorageSync("_STAT_LAST_PAGE_ROUTE");return t?"/"===t.fullPath?t.route:t.fullPath||t.route:n||""},E=function(){var e=getCurrentPages(),t=e[e.length-1];return t?t.$vm:null},D=function(e){return"page"===e.mpType||"page"===e.$mpType||e.$mp&&"page"===e.$mp.mpType||"page"===e.$options.mpType?"page":"app"===e.mpType||"app"===e.$mpType||e.$mp&&"app"===e.$mp.mpType||"app"===e.$options.mpType?"app":null},L=function(e){var t=[],n=[],r=[],i=function(i){var a=e[i];a.forEach((function(e){var a;a=e,0===i?t.push(a):3===i?r.push(a):n.push(a)}))};for(var a in e)i(a);return t.push.apply(t,n.concat(r)),JSON.stringify(t)},$=function(e){return y&&y[e]||""},M=function(e){var t={usv:"4.75",conf:JSON.stringify({ak:"__UNI__D09F619"})};uni.request({url:"https://tongji.dcloud.io/uni/stat",method:"GET",data:t,success:function(t){var n=t.data;0===n.ret&&"function"===typeof e&&e({enable:n.enable})},fail:function(t){var n=1;try{n=uni.getStorageSync("Report_Status")}catch(t){n=1}""===n&&(n=1),"function"===typeof e&&e({enable:n})}})},j=function(){if(g.collectItems){var e=g.collectItems.uniStatPageLog;return void 0===e||("boolean"!==typeof e||e)}return!0},R=function(){return parseInt((new Date).getTime()/1e3)},N=function(){var e=v("__first__visit__time"),t=0;return e?t=e:(t=R(),h("__first__visit__time",t),m("__last__visit__time")),t},U=0,F=0,q=function(){return U=R(),h("__page__residence__time",U),U},B=function(){var e=v("__total__visit__count"),t=1;return e&&(t=e,t++),h("__total__visit__count",t),t},H=function(){var e=R(),t=h("__first_time",e);return t},K=function(e){var t=0,n=v("__first_time"),r=R();if(0!==n&&(t=r-n),t=t<1?1:t,"app"===e){var i=t>300;return{residenceTime:t,overtime:i}}if("page"===e){var a=t>1800;return{residenceTime:t,overtime:a}}return{residenceTime:t}},V=function(e){var t=g.reportInterval;if(0===Number(t))return 0;t=t||e;return/(^[1-9]\d*$)/.test(t)?Number(t):e}(10),J={uuid:function(e){return d.deviceId||T()}(),ak:O.appid,p:"android"===d.platform?"a":"i",ut:I(),mpn:function(){var e="";return"wx"!==I()&&"qq"!==I()||uni.canIUse("getAccountInfoSync")&&(e=uni.getAccountInfoSync().miniProgram.appId||""),I(),e}(),usv:"4.75",v:function(){return"n"===I()?plus.runtime.version:""}(),ch:function(){var e=I(),t="";return"n"===e&&(t=plus.runtime.channel),t}(),cn:"",pn:"",ct:"",t:R(),tt:"",brand:d.brand||"",md:d.model,sv:null!==(t=null===(r=d.system)||void 0===r?void 0:r.replace(/(Android|iOS)\s/,""))&&void 0!==t?t:"",mpsdk:d.SDKVersion||"",mpv:d.version||"",lang:d.language,pr:d.pixelRatio,ww:d.windowWidth,wh:d.windowHeight,sw:d.screenWidth,sh:d.screenHeight},W=function(){"use strict";function e(){s(this,e),this.self="",this.__licationShow=!1,this.__licationHide=!1,this.statData=J,this._navigationBarTitle={config:"",page:"",report:"",lt:""},this._query={};var t="function"===typeof uni.addInterceptor;t&&(this.addInterceptorInit(),this.interceptLogin(),this.interceptShare(!0),this.interceptRequestPayment())}return u(e,[{key:"addInterceptorInit",value:function(){var e=this;uni.addInterceptor("setNavigationBarTitle",{invoke:function(t){e._navigationBarTitle.page=t.title}})}},{key:"interceptLogin",value:function(){var e=this;uni.addInterceptor("login",{complete:function(){e._login()}})}},{key:"interceptShare",value:function(e){var t=this;e?uni.addInterceptor("share",{success:function(){t._share()},fail:function(){t._share()}}):t._share()}},{key:"interceptRequestPayment",value:function(){var e=this;uni.addInterceptor("requestPayment",{success:function(){e._payment("pay_success")},fail:function(){e._payment("pay_fail")}})}},{key:"_login",value:function(){this.sendEventRequest({key:"login"},0)}},{key:"_share",value:function(){this.sendEventRequest({key:"share"},0)}},{key:"_payment",value:function(e){this.sendEventRequest({key:e},0)}},{key:"applicationShow",value:function(){if(this.__licationHide){var e=K("app");if(e.overtime){var t=uni.getStorageSync("_STAT_LAST_PAGE_ROUTE"),n={path:t,scene:this.statData.sc,cst:2};this.sendReportRequest(n)}this.__licationHide=!1}}},{key:"applicationHide",value:function(e,t){e||(e=E()),this.__licationHide=!0;var n=K(),r=C(e);uni.setStorageSync("_STAT_LAST_PAGE_ROUTE",r),this.sendHideRequest({urlref:r,urlref_ts:n.residenceTime},t),H()}},{key:"pageShow",value:function(e){this._navigationBarTitle={config:"",page:"",report:"",lt:""};var t=C(e),n=A(e);if(this._navigationBarTitle.config=$(n),this.__licationShow)return H(),uni.setStorageSync("_STAT_LAST_PAGE_ROUTE",t),void(this.__licationShow=!1);var r=K("page");if(r.overtime){var i={path:t,scene:this.statData.sc,cst:3};this.sendReportRequest(i)}H()}},{key:"pageHide",value:function(e){if(!this.__licationHide){var t=K("page"),n=C(e),r=uni.getStorageSync("_STAT_LAST_PAGE_ROUTE");return r||(r=n),uni.setStorageSync("_STAT_LAST_PAGE_ROUTE",n),void this.sendPageRequest({url:n,urlref:r,urlref_ts:t.residenceTime})}}},{key:"sendReportRequest",value:function(e,t){this._navigationBarTitle.lt="1",this._navigationBarTitle.config=$(e.path);var n=e.query&&"{}"!==JSON.stringify(e.query),r=n?"?"+JSON.stringify(e.query):"",i=function(){var e=v("__last__visit__time"),t=0;return e&&(t=e),h("__last__visit__time",R()),t}();if(0!==i||!i){var a=function(e){var t="";if("n"===I()){try{t=plus.device.uuid}catch(n){t=""}return t}return d.deviceId||T()}(),o=function(){var e=v("is_handle_device_id")||"";return h("is_handle_device_id","1"),"1"===e}();o||(this.statData.odid=a)}Object.assign(this.statData,{lt:"1",url:e.path+r||"",t:R(),sc:P(e.scene),fvts:N(),lvts:i,tvc:B(),cst:e.cst||1}),"n"===I()?this.getProperty(t):this.getNetworkInfo(t)}},{key:"sendPageRequest",value:function(e){var t=e.url,n=e.urlref,r=e.urlref_ts;this._navigationBarTitle.lt="11";var i={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"11",ut:this.statData.ut,url:t,tt:this.statData.tt,urlref:n,urlref_ts:r,ch:this.statData.ch,usv:this.statData.usv,t:R()};this.request(i)}},{key:"sendHideRequest",value:function(e,t){var n=e.urlref,r=e.urlref_ts,i={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"3",ut:this.statData.ut,urlref:n,urlref_ts:r,ch:this.statData.ch,usv:this.statData.usv,t:R()};this.request(i,t)}},{key:"sendEventRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=void 0===t?"":t,r=e.value,i=void 0===r?"":r,a="";try{a=A()}catch(u){var o=v("__launch_options");a=o.path}this._navigationBarTitle.config=$(a),this._navigationBarTitle.lt="21";var s={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"21",ut:this.statData.ut,url:a,ch:this.statData.ch,e_n:n,e_v:"object"===c(i)?JSON.stringify(i):i.toString(),usv:this.statData.usv,t:R()};this.request(s)}},{key:"sendPushRequest",value:function(e,t){var n=this,r=R(),i={lt:"101",cid:t,t:r,ut:this.statData.ut};var a=L({101:[i]}),o={usv:"4.75",t:r,requests:a};"n"!==I()||"a"!==this.statData.p?this.sendRequest(o):setTimeout((function(){n.sendRequest(o)}),200)}},{key:"getProperty",value:function(e){var t=this;plus.runtime.getProperty(plus.runtime.appid,(function(n){t.statData.v=n.version||"",t.getNetworkInfo(e)}))}},{key:"getNetworkInfo",value:function(e){var t=this;uni.getNetworkType({success:function(n){t.statData.net=n.networkType,t.getLocation(e)}})}},{key:"getLocation",value:function(e){var t=this;O.getLocation?uni.getLocation({type:"wgs84",geocode:!0,success:function(n){n.address&&(t.statData.cn=n.address.country,t.statData.pn=n.address.province,t.statData.ct=n.address.city),t.statData.lat=n.latitude,t.statData.lng=n.longitude,t.request(t.statData,e)}}):(this.statData.lat=0,this.statData.lng=0,this.request(this.statData,e))}},{key:"request",value:function(e,t){var n=this,r=R(),i=this._navigationBarTitle;Object.assign(e,{ttn:i.page,ttpj:i.config,ttc:i.report});var a=v("__UNI__STAT__DATA")||{};a[e.lt]||(a[e.lt]=[]),a[e.lt].push(e),h("__UNI__STAT__DATA",a);var o=function(){return F=R(),U=v("__page__residence__time"),F-U}();if(!(o<V)||t){q();var s=L(a),u={usv:"4.75",t:r,requests:s};m("__UNI__STAT__DATA"),"n"!==I()||"a"!==this.statData.p?this.sendRequest(u):setTimeout((function(){n.sendRequest(u)}),200)}}},{key:"getIsReportData",value:function(){return function(){return new Promise((function(e,t){var n="",r=(new Date).getTime(),i=1;try{n=uni.getStorageSync("Report_Data_Time"),i=uni.getStorageSync("Report_Status")}catch(a){n="",i=1}""!==i?(1===i&&e(),n||(uni.setStorageSync("Report_Data_Time",r),n=r),r-n>864e5&&M((function(e){var t=e.enable;uni.setStorageSync("Report_Data_Time",r),uni.setStorageSync("Report_Status",t)}))):M((function(t){var n=t.enable;uni.setStorageSync("Report_Data_Time",r),uni.setStorageSync("Report_Status",n),1===n&&e()}))}))}()}},{key:"sendRequest",value:function(e){if(uni.__stat_uniCloud_space){var t=uni.__stat_uniCloud_space.importObject("uni-stat-receiver",{customUI:!0});t.report(e).then((function(){0})).catch((function(e){0}))}else console.error("\u5e94\u7528\u672a\u5173\u8054\u670d\u52a1\u7a7a\u95f4\uff0c\u7edf\u8ba1\u4e0a\u62a5\u5931\u8d25\uff0c\u8bf7\u5728uniCloud\u76ee\u5f55\u53f3\u952e\u5173\u8054\u670d\u52a1\u7a7a\u95f4.")}},{key:"imageRequest",value:function(e){this.getIsReportData().then((function(){var t=new Image,n=function(e){var t=Object.keys(e),n=t.sort(),r={},i="";for(var a in n)r[n[a]]=e[n[a]],i+=n[a]+"="+e[n[a]]+"&";return{sign:"",options:i.substr(0,i.length-1)}}(function(e){var t={};for(var n in e)t[n]=encodeURIComponent(e[n]);return t}(e)).options;t.src="https://tongji.dcloud.io/uni/stat.gif?"+n}))}},{key:"sendEvent",value:function(e,t){(function(e,t){return e?"string"!==typeof e?(console.error("uni.report [eventName] Parameter type error, it can only be of type String"),!0):e.length>255?(console.error("uni.report [eventName] Parameter length cannot be greater than 255"),!0):"string"!==typeof t&&"object"!==c(t)?(console.error("uni.report [options] Parameter type error, Only supports String or Object type"),!0):"string"===typeof t&&t.length>255?(console.error("uni.report [options] Parameter length cannot be greater than 255"),!0):"title"===e&&"string"!==typeof t?(console.error("uni.report [eventName] When the parameter is title, the [options] parameter can only be of type String"),!0):void 0:(console.error("uni.report Missing [eventName] parameter"),!0)})(e,t)||("title"!==e?this.sendEventRequest({key:e,value:"object"===c(t)?JSON.stringify(t):t},1):this._navigationBarTitle.report=t)}}]),e}(),G=function(t){"use strict";i(r,t);var n=f(r);function r(){return s(this,r),n.call(this)}return u(r,[{key:"pushEvent",value:function(e){var t=this,n=function(){if(g.collectItems){var e=g.collectItems.uniPushClientID;return"boolean"===typeof e&&e}return!1}();uni.getPushClientId&&n&&uni.getPushClientId({success:function(n){var r=n.cid||!1;r&&t.sendPushRequest(e,r)}})}},{key:"launch",value:function(e,t){q(),this.__licationShow=!0,h("__launch_options",e),e.cst=1,this.sendReportRequest(e,!0)}},{key:"load",value:function(e,t){this.self=t,this._query=e}},{key:"appHide",value:function(e){this.applicationHide(e,!0)}},{key:"appShow",value:function(e){this.applicationShow(e)}},{key:"show",value:function(e){if(this.self=e,"page"===D(e)){var t=j();t&&this.pageShow(e)}"app"===D(e)&&this.appShow()}},{key:"hide",value:function(e){if(this.self=e,"page"===D(e)){var t=j();t&&this.pageHide(e)}"app"===D(e)&&this.appHide()}},{key:"error",value:function(e){var t="";t=e.message?e.stack:JSON.stringify(e);var n="";try{n=get_route()}catch(i){n=""}var r={ak:this.statData.ak,uuid:this.statData.uuid,p:this.statData.p,lt:"31",url:n,ut:this.statData.ut,ch:this.statData.ch,mpsdk:this.statData.mpsdk,mpv:this.statData.mpv,v:this.statData.v,em:t,usv:this.statData.usv,t:parseInt((new Date).getTime()/1e3)};this.request(r)}}],[{key:"getInstance",value:function(){uni.__stat_instance||(uni.__stat_instance=new r);var t=function(e){var t=function(){return{}||{}}(),n=t.spaceId,r=t.provider,i=t.clientSecret,a=t.secretKey,o=t.secretId,s=-1!==["tcb","tencent","aliyun","alipay"].indexOf(r),u="aliyun"===r&&n&&i,c=("tcb"===r||"tencent"===r)&&n,l="alipay"===r&&n&&a&&o;return s&&(u||c||l)?t:e&&e.spaceId?e:null}(e.config);if(!uni.__stat_uniCloud_space)if(t&&0!==Object.keys(t).length){var n={provider:t.provider,spaceId:t.spaceId,clientSecret:t.clientSecret};t.endpoint&&(n.endpoint=t.endpoint),"alipay"===t.provider&&(n.secretKey=t.secretKey,n.accessKey=t.accessKey||t.secretId,n.spaceAppId=t.spaceAppId||t.appId),uni.__stat_uniCloud_space=e.init(n)}else console.error("\u5e94\u7528\u672a\u5173\u8054\u670d\u52a1\u7a7a\u95f4\uff0c\u8bf7\u5728uniCloud\u76ee\u5f55\u53f3\u952e\u5173\u8054\u670d\u52a1\u7a7a\u95f4");return uni.__stat_instance}}]),r}(W),z=G,Y=z.getInstance(),Q=!1,X={onLaunch:function(e){Y.launch(e,this),Y.pushEvent(e)},onLoad:function(e){if(Y.load(e,this),this.$scope&&this.$scope.onShareAppMessage){var t=this.$scope.onShareAppMessage;this.$scope.onShareAppMessage=function(e){return Y.interceptShare(!1),t.call(this,e)}}},onShow:function(){Q=!1,Y.show(this)},onHide:function(){Q=!0,Y.hide(this)},onUnload:function(){Q?Q=!1:Y.hide(this)},onError:function(e){Y.error(e)}};function Z(){var e=n("951c");(e.default||e).mixin(X),uni.report=function(e,t){Y.sendEvent(e,t)}}(function(){Z()})()}).call(this,n("861b")["uniCloud"])},"3f62":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}));var r={uniPopup:n("8e80").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:e._$s(0,"sc","container"),attrs:{_i:0}},[n("view",{staticClass:e._$s(1,"sc","member-list"),attrs:{_i:1}},[n("view",{staticClass:e._$s(2,"sc","list-header"),attrs:{_i:2}},[n("text",{staticClass:e._$s(3,"sc","list-title"),attrs:{_i:3}}),n("button",{staticClass:e._$s(4,"sc","add-member-btn"),attrs:{_i:4},on:{click:e.showAddMember}},[n("text",{staticClass:e._$s(5,"sc","add-icon"),attrs:{_i:5}}),n("text")])]),e._$s(7,"i",0===e.members.length)?n("view",{staticClass:e._$s(7,"sc","empty-state"),attrs:{_i:7}},[n("text",{staticClass:e._$s(8,"sc","empty-text"),attrs:{_i:8}}),n("text",{staticClass:e._$s(9,"sc","empty-tip"),attrs:{_i:9}})]):n("view",{staticClass:e._$s(10,"sc","member-items"),attrs:{_i:10}},e._l(e._$s(11,"f",{forItems:e.members}),(function(t,r,i,a){return n("view",{key:e._$s(11,"f",{forIndex:i,key:t._id}),staticClass:e._$s("11-"+a,"sc","member-item"),attrs:{_i:"11-"+a},on:{click:function(n){return e.editMember(t)}}},[n("view",{staticClass:e._$s("12-"+a,"sc","member-avatar"),attrs:{_i:"12-"+a}},[n("text",{staticClass:e._$s("13-"+a,"sc","avatar-text"),attrs:{_i:"13-"+a}},[e._v(e._$s("13-"+a,"t0-0",e._s(t.name.charAt(0))))])]),n("view",{staticClass:e._$s("14-"+a,"sc","member-info"),attrs:{_i:"14-"+a}},[n("text",{staticClass:e._$s("15-"+a,"sc","member-name"),attrs:{_i:"15-"+a}},[e._v(e._$s("15-"+a,"t0-0",e._s(t.name)))]),n("text",{staticClass:e._$s("16-"+a,"sc","member-role"),attrs:{_i:"16-"+a}},[e._v(e._$s("16-"+a,"t0-0",e._s(t.role||"\u6210\u5458")))])]),n("view",{staticClass:e._$s("17-"+a,"sc","member-actions"),attrs:{_i:"17-"+a}},[n("button",{staticClass:e._$s("18-"+a,"sc","action-btn edit-btn"),attrs:{_i:"18-"+a},on:{click:function(n){return n.stopPropagation(),e.editMember(t)}}}),n("button",{staticClass:e._$s("19-"+a,"sc","action-btn delete-btn"),attrs:{_i:"19-"+a},on:{click:function(n){return n.stopPropagation(),e.deleteMember(t)}}})])])})),0)]),n("uni-popup",{ref:"memberPopup",attrs:{type:"bottom",_i:20}},[n("view",{staticClass:e._$s(21,"sc","popup-content"),attrs:{_i:21}},[n("view",{staticClass:e._$s(22,"sc","popup-header"),attrs:{_i:22}},[n("text",{staticClass:e._$s(23,"sc","popup-title"),attrs:{_i:23}},[e._v(e._$s(23,"t0-0",e._s(e.isEditing?"\u7f16\u8f91\u6210\u5458":"\u6dfb\u52a0\u6210\u5458")))]),n("text",{staticClass:e._$s(24,"sc","popup-close"),attrs:{_i:24},on:{click:e.closeMemberPopup}})]),n("view",{staticClass:e._$s(25,"sc","form-content"),attrs:{_i:25}},[n("view",{staticClass:e._$s(26,"sc","form-item"),attrs:{_i:26}},[n("text",{staticClass:e._$s(27,"sc","form-label"),attrs:{_i:27}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.memberForm.name,expression:"memberForm.name"}],staticClass:e._$s(28,"sc","form-input"),attrs:{_i:28},domProps:{value:e._$s(28,"v-model",e.memberForm.name)},on:{input:function(t){t.target.composing||e.$set(e.memberForm,"name",t.target.value)}}})]),n("view",{staticClass:e._$s(29,"sc","form-item"),attrs:{_i:29}},[n("text",{staticClass:e._$s(30,"sc","form-label"),attrs:{_i:30}}),n("picker",{attrs:{range:e._$s(31,"a-range",e.roleOptions),_i:31},on:{change:e.onRoleChange}},[n("view",{staticClass:e._$s(32,"sc","picker-value"),attrs:{_i:32}},[e._v(e._$s(32,"t0-0",e._s(e.memberForm.role||"\u8bf7\u9009\u62e9\u89d2\u8272")))])])]),n("view",{staticClass:e._$s(33,"sc","form-item"),attrs:{_i:33}},[n("text",{staticClass:e._$s(34,"sc","form-label"),attrs:{_i:34}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.memberForm.note,expression:"memberForm.note"}],staticClass:e._$s(35,"sc","form-input"),attrs:{_i:35},domProps:{value:e._$s(35,"v-model",e.memberForm.note)},on:{input:function(t){t.target.composing||e.$set(e.memberForm,"note",t.target.value)}}})]),n("button",{staticClass:e._$s(36,"sc","submit-btn"),attrs:{_i:36},on:{click:e.submitMember}})])])])],1)},a=[]},4230:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup:function(e){}},data:function(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles:function(){var e={backgroundColor:this.bg};return this.borderRadius,e=Object.assign(e,{borderRadius:this.borderRadius}),e},isDesktop:function(){return this.popupWidth>=500&&this.popupHeight>=500},bg:function(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted:function(){var e=this;(function(){var t=uni.getSystemInfoSync(),n=t.windowWidth,r=t.windowHeight,i=t.windowTop,a=t.safeArea,o=(t.screenHeight,t.safeAreaInsets);e.popupWidth=n,e.popupHeight=r+(i||0),a&&e.safeArea?e.safeAreaInsets=o.bottom:e.safeAreaInsets=0})()},destroyed:function(){this.setH5Visible()},activated:function(){this.setH5Visible(!this.showPopup)},deactivated:function(){this.setH5Visible(!0)},created:function(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible:function(){},closeMask:function(){this.maskShow=!1},disableMask:function(){this.mkclick=!1},clear:function(e){e.stopPropagation(),this.clearPropagation=!0},open:function(t){if(!this.showPopup){t&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(t)||(t=this.type),this.config[t]?(this[this.config[t]](),this.$emit("change",{show:!0,type:t})):e("error","\u7f3a\u5c11\u7c7b\u578b\uff1a",t," at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:310")}},close:function(e){var t=this;this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((function(){t.showPopup=!1}),300)},touchstart:function(){this.clearPropagation=!1},onTap:function(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top:function(e){var t=this;this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((function(){t.showPoptrans(),t.messageChild&&"message"===t.type&&t.messageChild.timerClose()})))},bottom:function(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},center:function(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},e||this.showPoptrans()},left:function(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},right:function(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},e||this.showPoptrans()},showPoptrans:function(){var e=this;this.$nextTick((function(){e.showPopup=!0,e.showTrans=!0}))}}};t.default=n}).call(this,n("f3b9")["default"])},"47a9":function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports["default"]=e.exports},4965:function(e,t){e.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"===typeof e}},e.exports.__esModule=!0,e.exports["default"]=e.exports},"4d61":function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("127e")),a=r(n("7ca3")),o=r(n("ee10")),s=r(n("172d"));function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{bills:[],cardTotal:0,cashTotal:0,cardPercent:0,cashPercent:0,payTypeIndex:0,memberIndex:0,voiceText:"",showForm:!1,form:{date:"",category:"",amount:"",payType:"",memberId:"",location:""},payTypes:["\u5237\u5361","\u73b0\u91d1","\u652f\u4ed8\u5b9d","\u5fae\u4fe1"],members:[],isEdit:!1,editBillId:"",monthTotal:0,monthCardTotal:0,monthCashTotal:0,monthCardPercent:0,monthCashPercent:0}},computed:{memberNames:function(){return this.members.map((function(e){return e.name}))}},onLoad:function(){this.loadBills(),this.loadStats(),this.loadMembers(),this.autoFixData()},methods:{goToMembers:function(){uni.navigateTo({url:"/pages/members/members"})},startVoice:function(){var e=this;return(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.showModal({title:"\u6a21\u62df\u8bed\u97f3\u8f93\u5165",editable:!0,placeholderText:"\u5982\uff1a\u6211\u4eca\u5929\u5237\u5361\u4e70\u4e8610\u65a4\u5927\u7c73\u82b1\u4e8650\u5143",success:function(t){t.confirm&&t.content&&e.onVoiceResult(t.content)}});case 1:case"end":return t.stop()}}),t)})))()},stopVoice:function(){},onVoiceResult:function(e){var t=this;return(0,o.default)(i.default.mark((function n(){var r,a,o;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.voiceText=e,r=t.parseVoiceText(e),t.form=f(f({},t.form),r),a=t.payTypes.indexOf(t.form.payType),t.payTypeIndex=a>=0?a:0,t.form.memberId&&(o=t.members.findIndex((function(e){return e._id===t.form.memberId})),t.memberIndex=o>=0?o:0),t.showForm=!0;case 7:case"end":return n.stop()}}),n)})))()},parseVoiceText:function(e){var t={date:this.formatDate(new Date),category:"",amount:"",payType:"",memberId:"",location:""};/\u5de5\u8d44/.test(e)?t.category="\u5de5\u8d44":/\u8d2d\u7269|\u4e70/.test(e)?t.category="\u8d2d\u7269":/\u9910\u996e|\u5403/.test(e)?t.category="\u9910\u996e":/\u4ea4\u901a/.test(e)?t.category="\u4ea4\u901a":/\u533b\u7597|\u770b\u75c5/.test(e)?t.category="\u533b\u7597":/\u83dc/.test(e)&&(t.category="\u83dc"),e.includes("\u5237\u5361")?t.payType="\u5237\u5361":e.includes("\u73b0\u91d1")?t.payType="\u73b0\u91d1":e.includes("\u652f\u4ed8\u5b9d")?t.payType="\u652f\u4ed8\u5b9d":e.includes("\u5fae\u4fe1")&&(t.payType="\u5fae\u4fe1");var n=e.match(/([0-9]+(\.[0-9]+)?)\u5143|([0-9]+(\.[0-9]+)?)/);n&&(t.amount=n[1]||n[3]);var r,i=u(this.members);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(e.includes(a.name)){t.memberId=a._id;break}}}catch(o){i.e(o)}finally{i.f()}return(e.includes("\u8d85\u5e02")||e.includes("\u83dc\u5e02\u573a"))&&(t.location=e.includes("\u8d85\u5e02")?"\u8d85\u5e02":"\u83dc\u5e02\u573a"),t},onEditBill:function(e){var t=this;this.isEdit=!0,this.editBillId=e._id,this.form={date:this.formatDate(e.date),category:e.category,amount:e.amount,payType:e.payType,memberId:e.memberId,location:e.location||""};var n=this.payTypes.indexOf(this.form.payType);this.payTypeIndex=n>=0?n:0;var r=this.members.findIndex((function(e){return e._id===t.form.memberId}));this.memberIndex=r>=0?r:0,this.showForm=!0},onDeleteBill:function(e){var t=this;return(0,o.default)(i.default.mark((function n(){var r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t,uni.showModal({title:"\u786e\u8ba4\u5220\u9664",content:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u6761\u8d26\u5355\u5417\uff1f",success:function(){var t=(0,o.default)(i.default.mark((function t(n){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.confirm){t.next=5;break}return t.next=3,s.default.deleteBill(e);case 3:r.loadBills(),r.loadStats();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()});case 2:case"end":return n.stop()}}),n)})))()},submitBill:function(){var e=this;return(0,o.default)(i.default.mark((function t(){var n,r,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[],e.form.date||n.push("\u65e5\u671f"),e.form.category||n.push("\u7c7b\u522b"),e.form.amount||n.push("\u91d1\u989d"),e.form.payType||n.push("\u65b9\u5f0f"),e.form.memberId||n.push("\u6210\u5458"),!n.length){t.next=9;break}return uni.showToast({title:"\u8bf7\u586b\u5199\u5b8c\u6574\uff1a"+n.join("\u3001"),icon:"none"}),t.abrupt("return");case 9:if(!e.isEdit||!e.editBillId){t.next=15;break}return r=f(f({},e.form),{},{date:new Date(e.form.date),_id:e.editBillId}),t.next=13,s.default.updateBill(r);case 13:t.next=18;break;case 15:return a=f(f({},e.form),{},{date:new Date(e.form.date)}),t.next=18,s.default.addBill(a);case 18:e.showForm=!1,e.isEdit=!1,e.editBillId="",e.loadBills(),e.loadStats();case 23:case"end":return t.stop()}}),t)})))()},loadBills:function(){var e=this;return(0,o.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.default.getBills({pageSize:10,sortBy:"date",sortOrder:"desc"});case 2:n=t.sent,200===n.code&&(e.bills=n.data.list);case 4:case"end":return t.stop()}}),t)})))()},loadStats:function(){var t=this;return(0,o.default)(i.default.mark((function n(){var r,a,o,u,c,l,f,d,p,h,v,m,g,y;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s.default.getBills({payType:"\u5237\u5361"});case 2:return r=n.sent,n.next=5,s.default.getBills({payType:"\u73b0\u91d1"});case 5:return a=n.sent,t.cardTotal=r.data&&r.data.list?r.data.list.reduce((function(e,t){return e+Number(t.amount)}),0):0,t.cashTotal=a.data&&a.data.list?a.data.list.reduce((function(e,t){return e+Number(t.amount)}),0):0,o=t.cardTotal+t.cashTotal,u=o?t.cardTotal/o*100:0,c=o?t.cashTotal/o*100:0,t.cardPercent=u.toFixed(1),t.cashPercent=c.toFixed(1),l=new Date,f=new Date(l.getFullYear(),l.getMonth(),1),d=new Date(l.getFullYear(),l.getMonth()+1,1),n.prev=16,n.next=19,s.default.getBills({pageSize:1e3});case 19:p=n.sent,p.data&&p.data.list?(h=p.data.list.filter((function(e){var t=new Date(e.date);return t>=f&&t<d})),t.monthTotal=h.reduce((function(e,t){return e+Number(t.amount)}),0),v=h.filter((function(e){return"\u5237\u5361"===e.payType})),m=h.filter((function(e){return"\u73b0\u91d1"===e.payType})),t.monthCardTotal=v.reduce((function(e,t){return e+Number(t.amount)}),0),t.monthCashTotal=m.reduce((function(e,t){return e+Number(t.amount)}),0),g=t.monthTotal?t.monthCardTotal/t.monthTotal*100:0,y=t.monthTotal?t.monthCashTotal/t.monthTotal*100:0,t.monthCardPercent=g.toFixed(1),t.monthCashPercent=y.toFixed(1)):(t.monthTotal=0,t.monthCardTotal=0,t.monthCashTotal=0,t.monthCardPercent=0,t.monthCashPercent=0),n.next=31;break;case 23:n.prev=23,n.t0=n["catch"](16),e("error","\u52a0\u8f7d\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",n.t0," at pages/index/index.vue:334"),t.monthTotal=0,t.monthCardTotal=0,t.monthCashTotal=0,t.monthCardPercent=0,t.monthCashPercent=0;case 31:case"end":return n.stop()}}),n,null,[[16,23]])})))()},loadMembers:function(){var e=this;return(0,o.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.default.getMembers();case 2:n=t.sent,200===n.code&&(e.members=n.data.list);case 4:case"end":return t.stop()}}),t)})))()},getMemberName:function(e){var t=this.members.find((function(t){return t._id===e}));return t?t.name:""},formatDate:function(e){if(!e)return"";var t="string"===typeof e?new Date(e):e;if(isNaN(t.getTime()))return"";var n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)},onPayTypeChange:function(e){this.payTypeIndex=e.detail.value,this.form.payType=this.payTypes[this.payTypeIndex]},onMemberChange:function(e){this.memberIndex=e.detail.value,this.form.memberId=this.members[this.memberIndex]._id},refreshData:function(){var t=this;return(0,o.default)(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return uni.showLoading({title:"\u5237\u65b0\u4e2d..."}),n.prev=1,n.next=4,t.loadBills();case 4:return n.next=6,t.loadStats();case 6:return n.next=8,t.loadMembers();case 8:uni.showToast({title:"\u6570\u636e\u5df2\u5237\u65b0",icon:"success"}),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),e("error","\u5237\u65b0\u6570\u636e\u5931\u8d25:",n.t0," at pages/index/index.vue:378"),uni.showToast({title:"\u5237\u65b0\u5931\u8d25",icon:"none"});case 15:return n.prev=15,uni.hideLoading(),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[1,11,15,18]])})))()},checkSystem:function(){return(0,o.default)(i.default.mark((function t(){var n,r,a,o,u,c,l,f,d,p,h,v;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"\u68c0\u67e5\u4e2d..."}),t.prev=1,n=[],t.prev=3,t.next=6,s.default.getBills({pageSize:1});case 6:r=t.sent,200===r.code?n.push("\u2705 API \u8fde\u63a5\u6b63\u5e38"):n.push("\u274c API \u8fde\u63a5\u5931\u8d25"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),n.push("\u274c API \u8fde\u63a5\u5f02\u5e38");case 13:return t.prev=13,t.next=16,s.default.getBills({pageSize:1e3});case 16:a=t.sent,a.data&&a.data.list?n.push("\u2705 \u8d26\u5355\u6570\u636e\u6b63\u5e38 (\u5171".concat(a.data.list.length,"\u6761)")):n.push("\u274c \u8d26\u5355\u6570\u636e\u83b7\u53d6\u5931\u8d25"),t.next=23;break;case 20:t.prev=20,t.t1=t["catch"](13),n.push("\u274c \u8d26\u5355\u6570\u636e\u83b7\u53d6\u5f02\u5e38");case 23:return t.prev=23,t.next=26,s.default.getMembers();case 26:o=t.sent,200===o.code&&o.data&&o.data.list?n.push("\u2705 \u6210\u5458\u6570\u636e\u6b63\u5e38 (\u5171".concat(o.data.list.length,"\u4eba)")):n.push("\u274c \u6210\u5458\u6570\u636e\u83b7\u53d6\u5931\u8d25"),t.next=33;break;case 30:t.prev=30,t.t2=t["catch"](23),n.push("\u274c \u6210\u5458\u6570\u636e\u83b7\u53d6\u5f02\u5e38");case 33:return t.prev=33,u=new Date,c=new Date(u.getFullYear(),u.getMonth(),1),l=new Date(u.getFullYear(),u.getMonth()+1,1),t.next=39,s.default.getBills({pageSize:1e3});case 39:f=t.sent,f.data&&f.data.list?(d=f.data.list.filter((function(e){var t=new Date(e.date);return t>=c&&t<l})),p=d.reduce((function(e,t){return e+Number(t.amount)}),0),n.push("\u2705 \u672c\u6708\u7edf\u8ba1\u6b63\u5e38 (\u603b\u652f\u51fa\xa5".concat(p.toFixed(2),")"))):n.push("\u274c \u672c\u6708\u7edf\u8ba1\u8ba1\u7b97\u5931\u8d25"),t.next=46;break;case 43:t.prev=43,t.t3=t["catch"](33),n.push("\u274c \u672c\u6708\u7edf\u8ba1\u8ba1\u7b97\u5f02\u5e38");case 46:h=n.filter((function(e){return e.startsWith("\u2705")})).length,v=n.length,h===v?uni.showToast({title:"\u7cfb\u7edf\u8fd0\u884c\u6b63\u5e38",icon:"success"}):uni.showModal({title:"\u7cfb\u7edf\u68c0\u67e5\u7ed3\u679c",content:"\u68c0\u67e5\u9879\u76ee: ".concat(v,"\u9879\n\u6b63\u5e38: ").concat(h,"\u9879\n\u5f02\u5e38: ").concat(v-h,"\u9879\n\n").concat(n.join("\n")),showCancel:!1}),t.next=55;break;case 51:t.prev=51,t.t4=t["catch"](1),e("error","\u7cfb\u7edf\u68c0\u67e5\u5931\u8d25:",t.t4," at pages/index/index.vue:468"),uni.showToast({title:"\u7cfb\u7edf\u68c0\u67e5\u5931\u8d25",icon:"none"});case 55:return t.prev=55,uni.hideLoading(),t.finish(55);case 58:case"end":return t.stop()}}),t,null,[[1,51,55,58],[3,10],[13,20],[23,30],[33,43]])})))()},simpleInit:function(){var t=this;return(0,o.default)(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:uni.showModal({title:"\u521d\u59cb\u5316\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u521b\u5efa\u9ed8\u8ba4\u6210\u5458\u548c\u793a\u4f8b\u6570\u636e\u5417\uff1f",success:function(){var n=(0,o.default)(i.default.mark((function n(r){var a,o,u;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.confirm){n.next=34;break}return uni.showLoading({title:"\u521d\u59cb\u5316\u4e2d..."}),n.prev=2,n.next=5,s.default.getMembers();case 5:if(a=n.sent,200!==a.code||!a.data||0!==a.data.list.length){n.next=11;break}return n.next=9,s.default.addMember({name:"\u5f20\u4e09",description:"\u5bb6\u5ead\u6210\u5458"});case 9:return n.next=11,s.default.addMember({name:"\u674e\u56db",description:"\u5bb6\u5ead\u6210\u5458"});case 11:return n.next=13,s.default.getBills({pageSize:1});case 13:if(o=n.sent,200!==o.code||!o.data||0!==o.data.list.length){n.next=18;break}return u=(new Date).toISOString().split("T")[0],n.next=18,s.default.addBill({amount:100,category:"\u9910\u996e",description:"\u5348\u9910",date:u,payType:"\u73b0\u91d1",location:"\u98df\u5802"});case 18:return uni.showToast({title:"\u521d\u59cb\u5316\u5b8c\u6210",icon:"success"}),n.next=21,t.loadBills();case 21:return n.next=23,t.loadStats();case 23:return n.next=25,t.loadMembers();case 25:n.next=31;break;case 27:n.prev=27,n.t0=n["catch"](2),e("error","\u521d\u59cb\u5316\u5931\u8d25:",n.t0," at pages/index/index.vue:521"),uni.showToast({title:"\u521d\u59cb\u5316\u5931\u8d25",icon:"none"});case 31:return n.prev=31,uni.hideLoading(),n.finish(31);case 34:case"end":return n.stop()}}),n,null,[[2,27,31,34]])})));return function(e){return n.apply(this,arguments)}}()});case 1:case"end":return n.stop()}}),n)})))()},autoFixData:function(){var e=this;return(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===e.monthTotal&&setTimeout((function(){e.loadStats()}),1e3);case 1:case"end":return t.stop()}}),t)})))()},checkInitStatus:function(){return(0,o.default)(i.default.mark((function t(){var n,r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.default.getBills({pageSize:1});case 3:return n=t.sent,t.next=6,s.default.getMembers();case 6:r=t.sent,200===n.code&&200===r.code&&(n.data&&n.data.list&&n.data.list.length>0,r.data&&r.data.list&&r.data.list.length>0),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e("error","\u68c0\u67e5\u7cfb\u7edf\u72b6\u6001\u5931\u8d25:",t.t0," at pages/index/index.vue:557");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}}};t.default=d}).call(this,n("f3b9")["default"])},"4ffb":function(e,t,n){var r=n("3b2d")["default"],i=n("3352");e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},"505c":function(e,t,n){"use strict";n.r(t);var r=n("0d3d"),i=n("71be");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var o=n("828b"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"33817164",null,!1,r["a"],void 0);t["default"]=s.exports},"51eb":function(e,t,n){"use strict";var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=function(e,t){if(!t)return;return clearTimeout(t.timer),new c(e,t)};var i=r(n("7ca3")),a=r(n("67ad")),o=r(n("0bdb"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(){function e(t,n){(0,a.default)(this,e),this.options=t,this.animation=uni.createAnimation(u({},t)),this.currentStepAnimates={},this.next=0,this.$=n}return(0,o.default)(e,[{key:"_nvuePushAnimates",value:function(e,t){var n=this.currentStepAnimates[this.next],r={};if(r=n||{styles:{},config:{}},l.includes(e)){r.styles.transform||(r.styles.transform="");var i="";"rotate"===e&&(i="deg"),r.styles.transform+="".concat(e,"(").concat(t+i,") ")}else r.styles[e]="".concat(t);this.currentStepAnimates[this.next]=r}},{key:"_animateRun",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.$.$refs["ani"].ref;if(n)return new Promise((function(r,i){nvueAnimation.transition(n,u({styles:e},t),(function(e){r()}))}))}},{key:"_nvueNextAnimate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=e[n];if(i){var a=i.styles,o=i.config;this._animateRun(a,o).then((function(){n+=1,t._nvueNextAnimate(e,n,r)}))}else this.currentStepAnimates={},"function"===typeof r&&r(),this.isEnd=!0}},{key:"step",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.animation.step(e),this}},{key:"run",value:function(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((function(){"function"===typeof e&&e()}),this.$.durationTime)}}]),e}(),l=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];l.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((function(e){c.prototype[e]=function(){var t;return(t=this.animation)[e].apply(t,arguments),this}}))},5237:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("7ca3")),a=n("8f59"),o=(n("88b6"),r(n("fc73")));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u={onLaunch:function(){var t=this;e("log","App Launch"," at App.vue:23"),"HBuilder"!==plus.runtime.appid&&(0,o.default)(),uni.preLogin({provider:"univerify",success:function(n){t.setUniverifyErrorMsg(),e("log","preLogin success: ",n," at App.vue:36")},fail:function(n){t.setUniverifyLogin(!1),t.setUniverifyErrorMsg(n.errMsg),e("log","preLogin fail res: ",n," at App.vue:42")}})},onShow:function(){e("log","App Show"," at App.vue:48")},onHide:function(){e("log","App Hide"," at App.vue:51")},globalData:{test:""},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,a.mapMutations)(["setUniverifyErrorMsg","setUniverifyLogin"]))};t.default=u}).call(this,n("f3b9")["default"])},"595b":function(e,t,n){"use strict";n.r(t);var r=n("ec21"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},6197:function(e,t,n){"use strict";var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("127e")),a=r(n("ee10")),o=r(n("172d")),s={data:function(){return{members:[],isEditing:!1,memberForm:{name:"",role:"",note:""},roleOptions:["\u5bb6\u957f","\u5b69\u5b50","\u8001\u4eba","\u5176\u4ed6"],currentMemberId:null}},onLoad:function(){this.loadMembers()},onShow:function(){this.loadMembers()},methods:{loadMembers:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,uni.showLoading({title:"\u52a0\u8f7d\u4e2d..."}),t.next=4,o.default.getMembers();case 4:n=t.sent,200===n.code&&(e.members=n.data.list||n.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),uni.showToast({title:"\u52a0\u8f7d\u5931\u8d25",icon:"none"});case 11:return t.prev=11,uni.hideLoading(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()},showAddMember:function(){this.isEditing=!1,this.memberForm={name:"",role:"",note:""},this.currentMemberId=null,this.$refs.memberPopup.open()},editMember:function(e){this.isEditing=!0,this.memberForm={name:e.name,role:e.role||"",note:e.note||""},this.currentMemberId=e._id,this.$refs.memberPopup.open()},closeMemberPopup:function(){this.$refs.memberPopup.close()},onRoleChange:function(e){this.memberForm.role=this.roleOptions[e.detail.value]},submitMember:function(){var e=this;return(0,a.default)(i.default.mark((function t(){var n;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.memberForm.name){t.next=3;break}return uni.showToast({title:"\u8bf7\u8f93\u5165\u59d3\u540d",icon:"none"}),t.abrupt("return");case 3:if(t.prev=3,uni.showLoading({title:"\u4fdd\u5b58\u4e2d..."}),!e.isEditing){t.next=11;break}return t.next=8,o.default.updateMember(e.currentMemberId,e.memberForm.name);case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,o.default.addMember({name:e.memberForm.name});case 13:n=t.sent;case 14:200===n.code?(uni.showToast({title:"\u4fdd\u5b58\u6210\u529f",icon:"success"}),e.closeMemberPopup(),e.loadMembers()):uni.showToast({title:n.message||"\u4fdd\u5b58\u5931\u8d25",icon:"none"}),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),uni.showToast({title:"\u4fdd\u5b58\u5931\u8d25",icon:"none"});case 20:return t.prev=20,uni.hideLoading(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},deleteMember:function(e){var t=this;return(0,a.default)(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:uni.showModal({title:"\u786e\u8ba4\u5220\u9664",content:'\u786e\u5b9a\u8981\u5220\u9664\u6210\u5458"'.concat(e.name,'"\u5417\uff1f'),success:function(){var n=(0,a.default)(i.default.mark((function n(r){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.confirm){n.next=15;break}return n.prev=1,uni.showLoading({title:"\u5220\u9664\u4e2d..."}),n.next=5,o.default.deleteMember(e._id);case 5:a=n.sent,200===a.code?(uni.showToast({title:"\u5220\u9664\u6210\u529f",icon:"success"}),t.loadMembers()):uni.showToast({title:a.message||"\u5220\u9664\u5931\u8d25",icon:"none"}),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),uni.showToast({title:"\u5220\u9664\u5931\u8d25",icon:"none"});case 12:return n.prev=12,uni.hideLoading(),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(e){return n.apply(this,arguments)}}()});case 1:case"end":return n.stop()}}),n)})))()}}};t.default=s},6382:function(e,t,n){var r=n("6454");e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports["default"]=e.exports},6454:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports["default"]=e.exports},"675f":function(e,t,n){"use strict";n.r(t);var r=n("1626"),i=n("595b");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var o=n("828b"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=s.exports},"67ad":function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports["default"]=e.exports},"6d4a":function(e,t,n){"use strict";n.r(t);var r=n("5237"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},7172:function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n["return"]&&(o=n["return"](),Object(o)!==o))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports["default"]=e.exports},"71be":function(e,t,n){"use strict";n.r(t);var r=n("14a7"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},7647:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},"7ca3":function(e,t,n){var r=n("d551");e.exports=function(e,t,n){return t=r(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports["default"]=e.exports},"7ce1":function(e,t,n){var r=n("b4d2"),i=n("7647"),a=n("4965"),o=n("931d");function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},"828b":function(e,t,n){"use strict";function r(e,t,n,r,i,a,o,s,u,c){var l,f="function"===typeof e?e.options:e;if(u){f.components||(f.components={});var d=Object.prototype.hasOwnProperty;for(var p in u)d.call(u,p)&&!d.call(f.components,p)&&(f.components[p]=u[p])}if(c&&("function"===typeof c.beforeCreate&&(c.beforeCreate=[c.beforeCreate]),(c.beforeCreate||(c.beforeCreate=[])).unshift((function(){this[c.__module]=this})),(f.mixins||(f.mixins=[])).push(c)),t&&(f.render=t,f.staticRenderFns=n,f._compiled=!0),r&&(f.functional=!0),a&&(f._scopeId="data-v-"+a),o?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},f._ssrRegister=l):i&&(l=s?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(f.functional){f._injectStyles=l;var h=f.render;f.render=function(e,t){return l.call(t),h(e,t)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,l):[l]}return{exports:e,options:f}}n.d(t,"a",(function(){return r}))},"861b":function(e,t,n){"use strict";(function(e,r){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.uniCloud=t.default=t.UniCloudError=void 0;var a=i(n("127e")),o=i(n("3352")),s=i(n("34cf")),u=i(n("3b2d")),c=i(n("af34")),l=i(n("ee10")),f=i(n("7ca3")),d=i(n("8ffa")),p=i(n("4ffb")),h=i(n("b4d2")),v=i(n("7ce1")),m=i(n("67ad")),g=i(n("0bdb")),y=i(n("8bd1"));function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var i=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}function S(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;var T=S((function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},a=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=o<<24-(r+a)%4*8}else for(a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=i(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new o.init(r,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,c=e.min(4*u,i);if(u){for(var l=0;l<u;l+=a)this._doProcessBlock(r,l);var f=r.splice(0,u);n.sigBytes-=c}return new o.init(f,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=f.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=r.algo={};return r}(Math),n)})),O=T,I=(S((function(e,t){var n;e.exports=(n=O,function(e){var t=n,r=t.lib,i=r.WordArray,a=r.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=o.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a=this._hash.words,o=e[t+0],u=e[t+1],p=e[t+2],h=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],k=e[t+11],x=e[t+12],S=e[t+13],T=e[t+14],O=e[t+15],I=a[0],P=a[1],A=a[2],C=a[3];I=c(I,P,A,C,o,7,s[0]),C=c(C,I,P,A,u,12,s[1]),A=c(A,C,I,P,p,17,s[2]),P=c(P,A,C,I,h,22,s[3]),I=c(I,P,A,C,v,7,s[4]),C=c(C,I,P,A,m,12,s[5]),A=c(A,C,I,P,g,17,s[6]),P=c(P,A,C,I,y,22,s[7]),I=c(I,P,A,C,_,7,s[8]),C=c(C,I,P,A,b,12,s[9]),A=c(A,C,I,P,w,17,s[10]),P=c(P,A,C,I,k,22,s[11]),I=c(I,P,A,C,x,7,s[12]),C=c(C,I,P,A,S,12,s[13]),A=c(A,C,I,P,T,17,s[14]),I=l(I,P=c(P,A,C,I,O,22,s[15]),A,C,u,5,s[16]),C=l(C,I,P,A,g,9,s[17]),A=l(A,C,I,P,k,14,s[18]),P=l(P,A,C,I,o,20,s[19]),I=l(I,P,A,C,m,5,s[20]),C=l(C,I,P,A,w,9,s[21]),A=l(A,C,I,P,O,14,s[22]),P=l(P,A,C,I,v,20,s[23]),I=l(I,P,A,C,b,5,s[24]),C=l(C,I,P,A,T,9,s[25]),A=l(A,C,I,P,h,14,s[26]),P=l(P,A,C,I,_,20,s[27]),I=l(I,P,A,C,S,5,s[28]),C=l(C,I,P,A,p,9,s[29]),A=l(A,C,I,P,y,14,s[30]),I=f(I,P=l(P,A,C,I,x,20,s[31]),A,C,m,4,s[32]),C=f(C,I,P,A,_,11,s[33]),A=f(A,C,I,P,k,16,s[34]),P=f(P,A,C,I,T,23,s[35]),I=f(I,P,A,C,u,4,s[36]),C=f(C,I,P,A,v,11,s[37]),A=f(A,C,I,P,y,16,s[38]),P=f(P,A,C,I,w,23,s[39]),I=f(I,P,A,C,S,4,s[40]),C=f(C,I,P,A,o,11,s[41]),A=f(A,C,I,P,h,16,s[42]),P=f(P,A,C,I,g,23,s[43]),I=f(I,P,A,C,b,4,s[44]),C=f(C,I,P,A,x,11,s[45]),A=f(A,C,I,P,O,16,s[46]),I=d(I,P=f(P,A,C,I,p,23,s[47]),A,C,o,6,s[48]),C=d(C,I,P,A,y,10,s[49]),A=d(A,C,I,P,T,15,s[50]),P=d(P,A,C,I,m,21,s[51]),I=d(I,P,A,C,x,6,s[52]),C=d(C,I,P,A,h,10,s[53]),A=d(A,C,I,P,w,15,s[54]),P=d(P,A,C,I,u,21,s[55]),I=d(I,P,A,C,_,6,s[56]),C=d(C,I,P,A,O,10,s[57]),A=d(A,C,I,P,g,15,s[58]),P=d(P,A,C,I,S,21,s[59]),I=d(I,P,A,C,v,6,s[60]),C=d(C,I,P,A,k,10,s[61]),A=d(A,C,I,P,p,15,s[62]),P=d(P,A,C,I,b,21,s[63]),a[0]=a[0]+I|0,a[1]=a[1]+P|0,a[2]=a[2]+A|0,a[3]=a[3]+C|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(r/4294967296),o=r;n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+i+o;return(s<<a|s>>>32-a)+t}function l(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+i+o;return(s<<a|s>>>32-a)+t}function f(e,t,n,r,i,a,o){var s=e+(t^n^r)+i+o;return(s<<a|s>>>32-a)+t}function d(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+i+o;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(u),t.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5)})),S((function(e,t){var n;e.exports=(n=O,void function(){var e=n,t=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,u=o.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())})),S((function(e,t){e.exports=O.HmacMD5}))),P=S((function(e,t){e.exports=O.enc.Utf8})),A=S((function(e,t){var n;e.exports=(n=O,function(){var e=n,t=e.lib.WordArray;function r(e,n,r){for(var i=[],a=0,o=0;o<n;o++)if(o%4){var s=r[e.charCodeAt(o-1)]<<o%4*2,u=r[e.charCodeAt(o)]>>>6-o%4*2;i[a>>>2]|=(s|u)<<24-a%4*8,a++}return t.create(i,a)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)i.push(r.charAt(o>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<n.length;a++)i[n.charCodeAt(a)]=a}var o=n.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),C="uni_id_token",E="uni_id_token_expired",D={DEFAULT:"FUNCTION",FUNCTION:"FUNCTION",OBJECT:"OBJECT",CLIENT_DB:"CLIENT_DB"},L="pending",$="fulfilled",M="rejected";function j(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function R(e){return"object"===j(e)}function N(e){return"function"==typeof e}function U(e){return function(){try{return e.apply(e,arguments)}catch(e){console.error(e)}}}var F="REJECTED",q="NOT_PENDING",B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.createPromise,r=t.retryRule,i=void 0===r?F:r;(0,m.default)(this,e),this.createPromise=n,this.status=null,this.promise=null,this.retryRule=i}return(0,g.default)(e,[{key:"needRetry",get:function(){if(!this.status)return!0;switch(this.retryRule){case F:return this.status===M;case q:return this.status!==L}}},{key:"exec",value:function(){var e=this;return this.needRetry?(this.status=L,this.promise=this.createPromise().then((function(t){return e.status=$,Promise.resolve(t)}),(function(t){return e.status=M,Promise.reject(t)})),this.promise):this.promise}}]),e}(),H=function(){function e(){(0,m.default)(this,e),this._callback={}}return(0,g.default)(e,[{key:"addListener",value:function(e,t){this._callback[e]||(this._callback[e]=[]),this._callback[e].push(t)}},{key:"on",value:function(e,t){return this.addListener(e,t)}},{key:"removeListener",value:function(e,t){if(!t)throw new Error('The "listener" argument must be of type function. Received undefined');var n=this._callback[e];if(n){var r=function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return n;return-1}(n,t);n.splice(r,1)}}},{key:"off",value:function(e,t){return this.removeListener(e,t)}},{key:"removeAllListener",value:function(e){delete this._callback[e]}},{key:"emit",value:function(e){for(var t=this._callback[e],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t)for(var a=0;a<t.length;a++)t[a].apply(t,r)}}]),e}();function K(e){return e&&"string"==typeof e?JSON.parse(e):e}var V=K([]),J="app",W=(K(void 0),K([{provider:"alipay",spaceName:"lsy01",spaceId:"env-00jxtstozh9b",spaceAppId:"2021005174608744",accessKey:"ozpIntVKhrcyFiRB",secretKey:"bNfC7o8ROKC14cGW"}])||[]);try{(n("2388").default||n("2388")).appid}catch(Tr){}var G,z={};function Y(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=z,n=e,Object.prototype.hasOwnProperty.call(t,n)||(z[e]=r),z[e]}"app"===J&&(z=uni._globalUniCloudObj?uni._globalUniCloudObj:uni._globalUniCloudObj={});var Q=["invoke","success","fail","complete"],X=Y("_globalUniCloudInterceptor");function Z(e,t){X[e]||(X[e]={}),R(t)&&Object.keys(t).forEach((function(n){Q.indexOf(n)>-1&&function(e,t,n){var r=X[e][t];r||(r=X[e][t]=[]),-1===r.indexOf(n)&&N(n)&&r.push(n)}(e,n,t[n])}))}function ee(e,t){X[e]||(X[e]={}),R(t)?Object.keys(t).forEach((function(n){Q.indexOf(n)>-1&&function(e,t,n){var r=X[e][t];if(r){var i=r.indexOf(n);i>-1&&r.splice(i,1)}}(e,n,t[n])})):delete X[e]}function te(e,t){return e&&0!==e.length?e.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.resolve()}function ne(e,t){return X[e]&&X[e][t]||[]}function re(e){Z("callObject",e)}var ie=Y("_globalUniCloudListener"),ae={RESPONSE:"response",NEED_LOGIN:"needLogin",REFRESH_TOKEN:"refreshToken"},oe={CLIENT_DB:"clientdb",CLOUD_FUNCTION:"cloudfunction",CLOUD_OBJECT:"cloudobject"};function se(e){return ie[e]||(ie[e]=[]),ie[e]}function ue(e,t){var n=se(e);n.includes(t)||n.push(t)}function ce(e,t){var n=se(e),r=n.indexOf(t);-1!==r&&n.splice(r,1)}function le(e,t){for(var n=se(e),r=0;r<n.length;r++)(0,n[r])(t)}var fe,de=!1;function pe(){return fe||(fe=new Promise((function(e){de&&e(),function t(){if("function"==typeof getCurrentPages){var n=getCurrentPages();n&&n[0]&&(de=!0,e())}de||setTimeout((function(){t()}),30)}()})),fe)}function he(e){var t={};for(var n in e){var r=e[n];N(r)&&(t[n]=U(r))}return t}var ve=function(e){(0,d.default)(n,e);var t=x(n);function n(e){var r;(0,m.default)(this,n);var i=e.message||e.errMsg||"unknown system error";return r=t.call(this,i),r.errMsg=i,r.code=r.errCode=e.code||e.errCode||"SYSTEM_ERROR",r.errSubject=r.subject=e.subject||e.errSubject,r.cause=e.cause,r.requestId=e.requestId,r}return(0,g.default)(n,[{key:"toJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(e>=10))return e++,{errCode:this.errCode,errMsg:this.errMsg,errSubject:this.errSubject,cause:this.cause&&this.cause.toJson?this.cause.toJson(e):this.cause}}}]),n}((0,v.default)(Error));t.UniCloudError=ve;var me,ge,ye={request:function(e){return uni.request(e)},uploadFile:function(e){return uni.uploadFile(e)},setStorageSync:function(e,t){return uni.setStorageSync(e,t)},getStorageSync:function(e){return uni.getStorageSync(e)},removeStorageSync:function(e){return uni.removeStorageSync(e)},clearStorageSync:function(){return uni.clearStorageSync()},connectSocket:function(e){return uni.connectSocket(e)}};function _e(){return{token:ye.getStorageSync(C)||ye.getStorageSync("uniIdToken"),tokenExpired:ye.getStorageSync(E)}}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.token,n=e.tokenExpired;t&&ye.setStorageSync(C,t),n&&ye.setStorageSync(E,n)}function we(){return me||(me="mp-weixin"===J&&r.canIUse("getAppBaseInfo")&&r.canIUse("getDeviceInfo")?k(k({},uni.getAppBaseInfo()),uni.getDeviceInfo()):uni.getSystemInfoSync()),me}var ke={};function xe(){var e=uni.getLocale&&uni.getLocale()||"en";if(ge)return k(k(k({},ke),ge),{},{locale:e,LOCALE:e});var t=we(),n=t.deviceId,r=t.osName,i=t.uniPlatform,a=t.appId,o=["appId","appLanguage","appName","appVersion","appVersionCode","appWgtVersion","browserName","browserVersion","deviceBrand","deviceId","deviceModel","deviceType","osName","osVersion","romName","romVersion","ua","hostName","hostVersion","uniPlatform","uniRuntimeVersion","uniRuntimeVersionCode","uniCompilerVersion","uniCompilerVersionCode"];for(var s in t)Object.hasOwnProperty.call(t,s)&&-1===o.indexOf(s)&&delete t[s];return ge=k(k({PLATFORM:i,OS:r,APPID:a,DEVICEID:n},function(){var e,t;try{if(uni.getLaunchOptionsSync){if(uni.getLaunchOptionsSync.toString().indexOf("not yet implemented")>-1)return;var n=uni.getLaunchOptionsSync(),r=n.scene,i=n.channel;e=i,t=r}}catch(e){}return{channel:e,scene:t}}()),t),k(k(k({},ke),ge),{},{locale:e,LOCALE:e})}var Se,Te={sign:function(e,t){var n="";return Object.keys(e).sort().forEach((function(t){e[t]&&(n=n+"&"+t+"="+e[t])})),n=n.slice(1),I(n,t).toString()},wrappedRequest:function(e,t){return new Promise((function(n,r){t(Object.assign(e,{complete:function(e){e||(e={});var t=e.data&&e.data.header&&e.data.header["x-serverless-request-id"]||e.header&&e.header["request-id"];if(!e.statusCode||e.statusCode>=400){var i=e.data&&e.data.error&&e.data.error.code||"SYS_ERR",a=e.data&&e.data.error&&e.data.error.message||e.errMsg||"request:fail";return r(new ve({code:i,message:a,requestId:t}))}var o=e.data;if(o.error)return r(new ve({code:o.error.code,message:o.error.message,requestId:t}));o.result=o.data,o.requestId=t,delete o.data,n(o)}}))}))},toBase64:function(e){return A.stringify(P.parse(e))}},Oe=function(){function e(t){var n=this;(0,m.default)(this,e),["spaceId","clientSecret"].forEach((function(e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error("".concat(e," required"))})),this.config=Object.assign({},{endpoint:0===t.spaceId.indexOf("mp-")?"https://api.next.bspapp.com":"https://api.bspapp.com"},t),this.config.provider="aliyun",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.config.accessTokenKey="access_token_"+this.config.spaceId,this.adapter=ye,this._getAccessTokenPromiseHub=new B({createPromise:function(){return n.requestAuth(n.setupRequest({method:"serverless.auth.user.anonymousAuthorize",params:"{}"},"auth")).then((function(e){if(!e.result||!e.result.accessToken)throw new ve({code:"AUTH_FAILED",message:"\u83b7\u53d6accessToken\u5931\u8d25"});n.setAccessToken(e.result.accessToken)}))},retryRule:q})}return(0,g.default)(e,[{key:"hasAccessToken",get:function(){return!!this.accessToken}},{key:"setAccessToken",value:function(e){this.accessToken=e}},{key:"requestWrapped",value:function(e){return Te.wrappedRequest(e,this.adapter.request)}},{key:"requestAuth",value:function(e){return this.requestWrapped(e)}},{key:"request",value:function(e,t){var n=this;return Promise.resolve().then((function(){return n.hasAccessToken?t?n.requestWrapped(e):n.requestWrapped(e).catch((function(t){return new Promise((function(e,n){!t||"GATEWAY_INVALID_TOKEN"!==t.code&&"InvalidParameter.InvalidToken"!==t.code?n(t):e()})).then((function(){return n.getAccessToken()})).then((function(){var t=n.rebuildRequest(e);return n.request(t,!0)}))})):n.getAccessToken().then((function(){var t=n.rebuildRequest(e);return n.request(t,!0)}))}))}},{key:"rebuildRequest",value:function(e){var t=Object.assign({},e);return t.data.token=this.accessToken,t.header["x-basement-token"]=this.accessToken,t.header["x-serverless-sign"]=Te.sign(t.data,this.config.clientSecret),t}},{key:"setupRequest",value:function(e,t){var n=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),r={"Content-Type":"application/json"};return"auth"!==t&&(n.token=this.accessToken,r["x-basement-token"]=this.accessToken),r["x-serverless-sign"]=Te.sign(n,this.config.clientSecret),{url:this.config.requestUrl,method:"POST",data:n,dataType:"json",header:r}}},{key:"getAccessToken",value:function(){return this._getAccessTokenPromiseHub.exec()}},{key:"authorize",value:function(){var e=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAccessToken();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callFunction",value:function(e){var t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(k(k({},this.setupRequest(t)),{},{timeout:e.timeout}))}},{key:"getOSSUploadOptionsFromPath",value:function(e){var t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}},{key:"uploadFileToOSS",value:function(e){var t=this,n=e.url,r=e.formData,i=e.name,a=e.filePath,o=e.fileType,s=e.onUploadProgress;return new Promise((function(e,u){var c=t.adapter.uploadFile({url:n,formData:r,name:i,filePath:a,fileType:o,header:{"X-OSS-server-side-encrpytion":"AES256"},success:function(t){t&&t.statusCode<400?e(t):u(new ve({code:"UPLOAD_FAILED",message:"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))},fail:function(e){u(new ve({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))}});"function"==typeof s&&c&&"function"==typeof c.onProgressUpdate&&c.onProgressUpdate((function(e){s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}},{key:"reportOSSUpload",value:function(e){var t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(this.setupRequest(t))}},{key:"uploadFile",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l,f,d,p,h,v,m,g,y,_,b,w,k,x,S;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.filePath,r=t.cloudPath,i=t.fileType,o=void 0===i?"image":i,s=t.cloudPathAsRealPath,u=void 0!==s&&s,c=t.onUploadProgress,l=t.config,"string"===j(r)){e.next=3;break}throw new ve({code:"INVALID_PARAM",message:"cloudPath\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b"});case 3:if(r=r.trim()){e.next=5;break}throw new ve({code:"INVALID_PARAM",message:"cloudPath\u4e0d\u53ef\u4e3a\u7a7a"});case 5:if(!/:\/\//.test(r)){e.next=7;break}throw new ve({code:"INVALID_PARAM",message:"cloudPath\u4e0d\u5408\u6cd5"});case 7:if(f=l&&l.envType||this.config.envType,!(u&&("/"!==r[0]&&(r="/"+r),r.indexOf("\\")>-1))){e.next=10;break}throw new ve({code:"INVALID_PARAM",message:"\u4f7f\u7528cloudPath\u4f5c\u4e3a\u8def\u5f84\u65f6\uff0ccloudPath\u4e0d\u53ef\u5305\u542b\u201c\\\u201d"});case 10:return e.next=12,this.getOSSUploadOptionsFromPath({env:f,filename:u?r.split("/").pop():r,fileId:u?r:void 0});case 12:return d=e.sent.result,p="https://"+d.cdnDomain+"/"+d.ossPath,h=d.securityToken,v=d.accessKeyId,m=d.signature,g=d.host,y=d.ossPath,_=d.id,b=d.policy,w=d.ossCallbackUrl,k={"Cache-Control":"max-age=2592000","Content-Disposition":"attachment",OSSAccessKeyId:v,Signature:m,host:g,id:_,key:y,policy:b,success_action_status:200},h&&(k["x-oss-security-token"]=h),w&&(x=JSON.stringify({callbackUrl:w,callbackBody:JSON.stringify({fileId:_,spaceId:this.config.spaceId}),callbackBodyType:"application/json"}),k.callback=Te.toBase64(x)),S={url:"https://"+d.host,formData:k,fileName:"file",name:"file",filePath:n,fileType:o},e.next=27,this.uploadFileToOSS(Object.assign({},S,{onUploadProgress:c}));case 27:if(!w){e.next=29;break}return e.abrupt("return",{success:!0,filePath:n,fileID:p});case 29:return e.next=31,this.reportOSSUpload({id:_});case 31:if(!e.sent.success){e.next=33;break}return e.abrupt("return",{success:!0,filePath:n,fileID:p});case 33:throw new ve({code:"UPLOAD_FAILED",message:"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"});case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTempFileURL",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fileList;return new Promise((function(t,r){Array.isArray(n)&&0!==n.length||r(new ve({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u5b57\u7b26\u4e32"})),e.getFileInfo({fileList:n}).then((function(e){t({fileList:n.map((function(t,n){var r=e.fileList[n];return{fileID:t,tempFileURL:r&&r.url||t}}))})}))}))}},{key:"getFileInfo",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.fileList,Array.isArray(n)&&0!==n.length){e.next=3;break}throw new ve({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u5b57\u7b26\u4e32"});case 3:return r={method:"serverless.file.resource.info",params:JSON.stringify({id:n.map((function(e){return e.split("?")[0]})).join(",")})},e.next=6,this.request(this.setupRequest(r));case 6:return e.t0=e.sent.result,e.abrupt("return",{fileList:e.t0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ie={init:function(e){var t=new Oe(e),n={signInAnonymously:function(){return t.authorize()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}},Pe="undefined"!=typeof location&&"http:"===location.protocol?"http:":"https:";!function(e){e.local="local",e.none="none",e.session="session"}(Se||(Se={}));var Ae,Ce=function(){},Ee=S((function(e,t){var n;e.exports=(n=O,function(e){var t=n,r=t.lib,i=r.WordArray,a=r.Hasher,o=t.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=o.SHA256=a.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],f=n[6],d=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=c[p-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=v+c[p-7]+g+c[p-16]}var y=r&i^r&a^i&a,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),b=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+u[p]+c[p];d=f,f=l,l=s,s=o+b|0,o=a,a=i,i=r,r=b+(_+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=a._createHelper(l),t.HmacSHA256=a._createHmacHelper(l)}(Math),n.SHA256)})),De=Ee,Le=S((function(e,t){e.exports=O.HmacSHA256})),$e=function(){var e;if(!Promise){e=function(){},e.promise={};var t=function(){throw new ve({message:'Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.'})};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var n=new Promise((function(t,n){e=function(e,r){return e?n(e):t(r)}}));return e.promise=n,e};function Me(e){return void 0===e}function je(e){return"[object Null]"===Object.prototype.toString.call(e)}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/([\s\S]+)\s+(\u8bf7\u524d\u5f80\u4e91\u5f00\u53d1AI\u5c0f\u52a9\u624b\u67e5\u770b\u95ee\u9898\uff1a.*)/,"$1")}function Ne(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(62*Math.random()));return n}!function(e){e.WEB="web",e.WX_MP="wx_mp"}(Ae||(Ae={}));var Ue={adapter:null,runtime:void 0},Fe=["anonymousUuidKey"],qe=function(e){(0,d.default)(n,e);var t=x(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),Ue.adapter.root.tcbObject||(Ue.adapter.root.tcbObject={}),e}return(0,g.default)(n,[{key:"setItem",value:function(e,t){Ue.adapter.root.tcbObject[e]=t}},{key:"getItem",value:function(e){return Ue.adapter.root.tcbObject[e]}},{key:"removeItem",value:function(e){delete Ue.adapter.root.tcbObject[e]}},{key:"clear",value:function(){delete Ue.adapter.root.tcbObject}}]),n}(Ce);function Be(e,t){switch(e){case"local":return t.localStorage||new qe;case"none":return new qe;default:return t.sessionStorage||new qe}}var He=function(){function e(t){if((0,m.default)(this,e),!this._storage){this._persistence=Ue.adapter.primaryStorage||t.persistence,this._storage=Be(this._persistence,Ue.adapter);var n="access_token_".concat(t.env),r="access_token_expire_".concat(t.env),i="refresh_token_".concat(t.env),a="anonymous_uuid_".concat(t.env),o="login_type_".concat(t.env),s="token_type_".concat(t.env),u="user_info_".concat(t.env);this.keys={accessTokenKey:n,accessTokenExpireKey:r,refreshTokenKey:i,anonymousUuidKey:a,loginTypeKey:o,userInfoKey:u,deviceIdKey:"device_id",tokenTypeKey:s}}}return(0,g.default)(e,[{key:"updatePersistence",value:function(e){if(e!==this._persistence){var t="local"===this._persistence;this._persistence=e;var n=Be(e,Ue.adapter);for(var r in this.keys){var i=this.keys[r];if(!t||!Fe.includes(r)){var a=this._storage.getItem(i);Me(a)||je(a)||(n.setItem(i,a),this._storage.removeItem(i))}}this._storage=n}}},{key:"setStore",value:function(e,t,n){if(this._storage){var r={version:n||"localCachev1",content:t},i=JSON.stringify(r);try{this._storage.setItem(e,i)}catch(e){throw e}}}},{key:"getStore",value:function(e,t){try{if(!this._storage)return}catch(e){return""}t=t||"localCachev1";var n=this._storage.getItem(e);return n&&n.indexOf(t)>=0?JSON.parse(n).content:""}},{key:"removeStore",value:function(e){this._storage.removeItem(e)}}]),e}(),Ke={},Ve={};function Je(e){return Ke[e]}var We=(0,g.default)((function e(t,n){(0,m.default)(this,e),this.data=n||null,this.name=t})),Ge=function(e){(0,d.default)(n,e);var t=x(n);function n(e,r){var i;return(0,m.default)(this,n),i=t.call(this,"error",{error:e,data:r}),i.error=e,i}return(0,g.default)(n)}(We),ze=new(function(){function e(){(0,m.default)(this,e),this._listeners={}}return(0,g.default)(e,[{key:"on",value:function(e,t){return function(e,t,n){n[e]=n[e]||[],n[e].push(t)}(e,t,this._listeners),this}},{key:"off",value:function(e,t){return function(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}(e,t,this._listeners),this}},{key:"fire",value:function(e,t){if(e instanceof Ge)return console.error(e.error),this;var n="string"==typeof e?new We(e,t||{}):e,r=n.name;if(this._listens(r)){n.target=this;var i,a=this._listeners[r]?(0,c.default)(this._listeners[r]):[],o=_(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.call(this,n)}}catch(u){o.e(u)}finally{o.f()}}return this}},{key:"_listens",value:function(e){return this._listeners[e]&&this._listeners[e].length>0}}]),e}());function Ye(e,t){ze.on(e,t)}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ze.fire(e,t)}function Xe(e,t){ze.off(e,t)}var Ze,et="loginStateChanged",tt="loginStateExpire",nt="loginTypeChanged",rt="anonymousConverted",it="refreshAccessToken";!function(e){e.ANONYMOUS="ANONYMOUS",e.WECHAT="WECHAT",e.WECHAT_PUBLIC="WECHAT-PUBLIC",e.WECHAT_OPEN="WECHAT-OPEN",e.CUSTOM="CUSTOM",e.EMAIL="EMAIL",e.USERNAME="USERNAME",e.NULL="NULL"}(Ze||(Ze={}));var at=function(){function e(){(0,m.default)(this,e),this._fnPromiseMap=new Map}return(0,g.default)(e,[{key:"run",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){var r,i=this;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this._fnPromiseMap.get(t),e.abrupt("return",(r||(r=new Promise(function(){var e=(0,l.default)(a.default.mark((function e(r,o){var s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i._runIdlePromise();case 3:return s=n(),e.t0=r,e.next=7,s;case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e["catch"](0),o(e.t2);case 14:return e.prev=14,i._fnPromiseMap.delete(t),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t,n){return e.apply(this,arguments)}}()),this._fnPromiseMap.set(t,r)),r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_runIdlePromise",value:function(){return Promise.resolve()}}]),e}(),ot=function(){function e(t){(0,m.default)(this,e),this._singlePromise=new at,this._cache=Je(t.env),this._baseURL="https://".concat(t.env,".ap-shanghai.tcb-api.tencentcloudapi.com"),this._reqClass=new Ue.adapter.reqClass({timeout:t.timeout,timeoutMsg:"\u8bf7\u6c42\u5728".concat(t.timeout/1e3,"s\u5185\u672a\u5b8c\u6210\uff0c\u5df2\u4e2d\u65ad"),restrictedMethods:["post"]})}return(0,g.default)(e,[{key:"_getDeviceId",value:function(){if(this._deviceID)return this._deviceID;var e=this._cache.keys.deviceIdKey,t=this._cache.getStore(e);return"string"==typeof t&&t.length>=16&&t.length<=48||(t=Ne(),this._cache.setStore(e,t)),this._deviceID=t,t}},{key:"_request",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){var r,i,o,s,u,c=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:{},i={"x-request-id":Ne(),"x-device-id":this._getDeviceId()},!r.withAccessToken){e.next=9;break}return o=this._cache.keys.tokenTypeKey,e.next=6,this.getAccessToken();case 6:s=e.sent,u=this._cache.getStore(o),i.authorization="".concat(u," ").concat(s);case 9:return e.abrupt("return",this._reqClass["get"===r.method?"get":"post"]({url:"".concat(this._baseURL).concat(t),data:n,headers:i}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_fetchAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i,o,s,u,c,f,d,p=this;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this._cache.keys,n=t.loginTypeKey,r=t.accessTokenKey,i=t.accessTokenExpireKey,o=t.tokenTypeKey,s=this._cache.getStore(n),!s||s===Ze.ANONYMOUS){e.next=3;break}throw new ve({code:"INVALID_OPERATION",message:"\u975e\u533f\u540d\u767b\u5f55\u4e0d\u652f\u6301\u5237\u65b0 access token"});case 3:return e.next=5,this._singlePromise.run("fetchAccessToken",(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p._request("/auth/v1/signin/anonymously",{},{method:"post"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)}))));case 5:return u=e.sent,c=u.access_token,f=u.expires_in,d=u.token_type,e.abrupt("return",(this._cache.setStore(o,d),this._cache.setStore(r,c),this._cache.setStore(i,Date.now()+1e3*f),c));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAccessTokenExpired",value:function(e,t){var n=!0;return e&&t&&(n=t<Date.now()),n}},{key:"getAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=this._cache.getStore(n),o=this._cache.getStore(r),e.abrupt("return",this.isAccessTokenExpired(i,o)?this._fetchAccessToken():i);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.loginTypeKey,e.abrupt("return",(this._cache.removeStore(n),this._cache.removeStore(r),this._cache.setStore(i,Ze.ANONYMOUS),this.getAccessToken()));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t=this;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._singlePromise.run("getUserInfo",(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._request("/auth/v1/user/me",{},{withAccessToken:!0,method:"get"});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),st=["auth.getJwt","auth.logout","auth.signInWithTicket","auth.signInAnonymously","auth.signIn","auth.fetchAccessTokenWithRefreshToken","auth.signUpWithEmailAndPassword","auth.activateEndUserMail","auth.sendPasswordResetEmail","auth.resetPasswordWithToken","auth.isUsernameRegistered"],ut={"X-SDK-Version":"1.3.5"};function ct(e,t,n){var r=e[t];e[t]=function(t){var i={},a={};n.forEach((function(n){var r=n.call(e,t),o=r.data,s=r.headers;Object.assign(i,o),Object.assign(a,s)}));var o=t.data;return o&&function(){var e;if(e=o,"[object FormData]"!==Object.prototype.toString.call(e))t.data=k(k({},o),i);else for(var n in i)o.append(n,i[n])}(),t.headers=k(k({},t.headers||{}),a),r.call(e,t)}}function lt(){var e=Math.random().toString(16).slice(2);return{data:{seqId:e},headers:k(k({},ut),{},{"x-seqid":e})}}var ft=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,m.default)(this,e),this.config=n,this._reqClass=new Ue.adapter.reqClass({timeout:this.config.timeout,timeoutMsg:"\u8bf7\u6c42\u5728".concat(this.config.timeout/1e3,"s\u5185\u672a\u5b8c\u6210\uff0c\u5df2\u4e2d\u65ad"),restrictedMethods:["post"]}),this._cache=Je(this.config.env),this._localCache=(t=this.config.env,Ve[t]),this.oauth=new ot(this.config),ct(this._reqClass,"post",[lt]),ct(this._reqClass,"upload",[lt]),ct(this._reqClass,"download",[lt])}return(0,g.default)(e,[{key:"post",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._reqClass.post(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._reqClass.upload(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"download",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._reqClass.download(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._refreshAccessTokenPromise||(this._refreshAccessTokenPromise=this._refreshAccessToken()),e.prev=1,e.next=4,this._refreshAccessTokenPromise;case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),n=e.t0;case 10:if(this._refreshAccessTokenPromise=null,this._shouldRefreshAccessTokenHook=null,!n){e.next=12;break}throw n;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"_refreshAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i,o,s,u,c,l,f,d,p,h;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey,o=t.loginTypeKey,s=t.anonymousUuidKey,this._cache.removeStore(n),this._cache.removeStore(r),u=this._cache.getStore(i),u){e.next=5;break}throw new ve({message:"\u672a\u767b\u5f55CloudBase"});case 5:return c={refresh_token:u},e.next=8,this.request("auth.fetchAccessTokenWithRefreshToken",c);case 8:if(l=e.sent,!l.data.code){e.next=21;break}if(f=l.data.code,"SIGN_PARAM_INVALID"!==f&&"REFRESH_TOKEN_EXPIRED"!==f&&"INVALID_REFRESH_TOKEN"!==f){e.next=20;break}if(this._cache.getStore(o)!==Ze.ANONYMOUS||"INVALID_REFRESH_TOKEN"!==f){e.next=19;break}return d=this._cache.getStore(s),p=this._cache.getStore(i),e.next=17,this.send("auth.signInAnonymously",{anonymous_uuid:d,refresh_token:p});case 17:return h=e.sent,e.abrupt("return",(this.setRefreshToken(h.refresh_token),this._refreshAccessToken()));case 19:Qe(tt),this._cache.removeStore(i);case 20:throw new ve({code:l.data.code,message:"\u5237\u65b0access token\u5931\u8d25\uff1a".concat(l.data.code)});case 21:if(!l.data.access_token){e.next=23;break}return e.abrupt("return",(Qe(it),this._cache.setStore(n,l.data.access_token),this._cache.setStore(r,l.data.access_token_expire+Date.now()),{accessToken:l.data.access_token,accessTokenExpire:l.data.access_token_expire}));case 23:l.data.refresh_token&&(this._cache.removeStore(i),this._cache.setStore(i,l.data.refresh_token),this._refreshAccessToken());case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey,this._cache.getStore(i)){e.next=3;break}throw new ve({message:"refresh token\u4e0d\u5b58\u5728\uff0c\u767b\u5f55\u72b6\u6001\u5f02\u5e38"});case 3:if(o=this._cache.getStore(n),s=this._cache.getStore(r),u=!0,e.t0=this._shouldRefreshAccessTokenHook,!e.t0){e.next=9;break}return e.next=8,this._shouldRefreshAccessTokenHook(o,s);case 8:e.t0=!e.sent;case 9:if(e.t1=e.t0,!e.t1){e.next=12;break}u=!1;case 12:return e.abrupt("return",(!o||!s||s<Date.now())&&u?this.refreshAccessToken():{accessToken:o,accessTokenExpire:s});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n,r){var i,o,s,u,c,l,f,d,p,h,v,m,g,y,_;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="x-tcb-trace_".concat(this.config.env),o="application/x-www-form-urlencoded",s=k({action:t,env:this.config.env,dataVersion:"2019-08-16"},n),e.t0=-1===st.indexOf(t),!e.t0){e.next=9;break}return this._cache.keys,e.next=8,this.oauth.getAccessToken();case 8:s.access_token=e.sent;case 9:if("storage.uploadFile"!==t){e.next=15;break}for(c in u=new FormData,u)u.hasOwnProperty(c)&&void 0!==u[c]&&u.append(c,s[c]);o="multipart/form-data",e.next=17;break;case 15:for(l in o="application/json",u={},s)void 0!==s[l]&&(u[l]=s[l]);case 17:return f={headers:{"content-type":o}},r&&r.timeout&&(f.timeout=r.timeout),r&&r.onUploadProgress&&(f.onUploadProgress=r.onUploadProgress),d=this._localCache.getStore(i),d&&(f.headers["X-TCB-Trace"]=d),p=n.parse,h=n.inQuery,v=n.search,m={env:this.config.env},p&&(m.parse=!0),h&&(m=k(k({},h),m)),g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=/\?/.test(t),i="";for(var a in n)""===i?!r&&(t+="?"):i+="&",i+="".concat(a,"=").concat(encodeURIComponent(n[a]));return/^http(s)?\:\/\//.test(t+=i)?t:"".concat(e).concat(t)}(Pe,"//tcb-api.tencentcloudapi.com/web",m),v&&(g+=v),e.next=28,this.post(k({url:g,data:u},f));case 28:if(y=e.sent,_=y.header&&y.header["x-tcb-trace"],_&&this._localCache.setStore(i,_),(200===Number(y.status)||200===Number(y.statusCode))&&y.data){e.next=32;break}throw new ve({code:"NETWORK_ERROR",message:"network request error"});case 32:return e.abrupt("return",y);case 33:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r,i,o,s=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.request(t,n,k(k({},r),{},{onUploadProgress:n.onUploadProgress}));case 4:if(i=e.sent,"ACCESS_TOKEN_DISABLED"!==i.data.code&&"ACCESS_TOKEN_EXPIRED"!==i.data.code||-1!==st.indexOf(t)){e.next=14;break}return e.next=8,this.oauth.refreshAccessToken();case 8:return e.next=10,this.request(t,n,k(k({},r),{},{onUploadProgress:n.onUploadProgress}));case 10:if(o=e.sent,!o.data.code){e.next=13;break}throw new ve({code:o.data.code,message:Re(o.data.message)});case 13:return e.abrupt("return",o.data);case 14:if(!i.data.code){e.next=16;break}throw new ve({code:i.data.code,message:Re(i.data.message)});case 16:return e.abrupt("return",i.data);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRefreshToken",value:function(e){var t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey;this._cache.removeStore(n),this._cache.removeStore(r),this._cache.setStore(i,e)}}]),e}(),dt={};function pt(e){return dt[e]}var ht=function(){function e(t){(0,m.default)(this,e),this.config=t,this._cache=Je(t.env),this._request=pt(t.env)}return(0,g.default)(e,[{key:"setRefreshToken",value:function(e){var t=this._cache.keys,n=t.accessTokenKey,r=t.accessTokenExpireKey,i=t.refreshTokenKey;this._cache.removeStore(n),this._cache.removeStore(r),this._cache.setStore(i,e)}},{key:"setAccessToken",value:function(e,t){var n=this._cache.keys,r=n.accessTokenKey,i=n.accessTokenExpireKey;this._cache.setStore(r,e),this._cache.setStore(i,t)}},{key:"refreshUserInfo",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.send("auth.getUserInfo",{});case 2:return t=e.sent,n=t.data,e.abrupt("return",(this.setLocalUserInfo(n),n));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setLocalUserInfo",value:function(e){var t=this._cache.keys.userInfoKey;this._cache.setStore(t,e)}}]),e}(),vt=function(){function e(t){if((0,m.default)(this,e),!t)throw new ve({code:"PARAM_ERROR",message:"envId is not defined"});this._envId=t,this._cache=Je(this._envId),this._request=pt(this._envId),this.setUserInfo()}return(0,g.default)(e,[{key:"linkWithTicket",value:function(e){if("string"!=typeof e)throw new ve({code:"PARAM_ERROR",message:"ticket must be string"});return this._request.send("auth.linkWithTicket",{ticket:e})}},{key:"linkWithRedirect",value:function(e){e.signInWithRedirect()}},{key:"updatePassword",value:function(e,t){return this._request.send("auth.updatePassword",{oldPassword:t,newPassword:e})}},{key:"updateEmail",value:function(e){return this._request.send("auth.updateEmail",{newEmail:e})}},{key:"updateUsername",value:function(e){if("string"!=typeof e)throw new ve({code:"PARAM_ERROR",message:"username must be a string"});return this._request.send("auth.updateUsername",{username:e})}},{key:"getLinkedUidList",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.send("auth.getLinkedUidList",{});case 2:return t=e.sent,n=t.data,r=!1,i=n.users,e.abrupt("return",(i.forEach((function(e){e.wxOpenId&&e.wxPublicId&&(r=!0)})),{users:i,hasPrimaryUid:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPrimaryUid",value:function(e){return this._request.send("auth.setPrimaryUid",{uid:e})}},{key:"unlink",value:function(e){return this._request.send("auth.unlink",{platform:e})}},{key:"update",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.nickName,r=t.gender,i=t.avatarUrl,o=t.province,s=t.country,u=t.city,e.next=8,this._request.send("auth.updateUserInfo",{nickName:n,gender:r,avatarUrl:i,province:o,country:s,city:u});case 8:c=e.sent,l=c.data,this.setLocalUserInfo(l);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.oauth.getUserInfo();case 2:return t=e.sent,e.abrupt("return",(this.setLocalUserInfo(t),t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUserInfo",value:function(){var e=this,t=this._cache.keys.userInfoKey,n=this._cache.getStore(t);["uid","loginType","openid","wxOpenId","wxPublicId","unionId","qqMiniOpenId","email","hasPassword","customUserId","nickName","gender","avatarUrl"].forEach((function(t){e[t]=n[t]})),this.location={country:n.country,province:n.province,city:n.city}}},{key:"setLocalUserInfo",value:function(e){var t=this._cache.keys.userInfoKey;this._cache.setStore(t,e),this.setUserInfo()}}]),e}(),mt=function(){function e(t){if((0,m.default)(this,e),!t)throw new ve({code:"PARAM_ERROR",message:"envId is not defined"});this._cache=Je(t);var n=this._cache.keys,r=n.refreshTokenKey,i=n.accessTokenKey,a=n.accessTokenExpireKey,o=this._cache.getStore(r),s=this._cache.getStore(i),u=this._cache.getStore(a);this.credential={refreshToken:o,accessToken:s,accessTokenExpire:u},this.user=new vt(t)}return(0,g.default)(e,[{key:"isAnonymousAuth",get:function(){return this.loginType===Ze.ANONYMOUS}},{key:"isCustomAuth",get:function(){return this.loginType===Ze.CUSTOM}},{key:"isWeixinAuth",get:function(){return this.loginType===Ze.WECHAT||this.loginType===Ze.WECHAT_OPEN||this.loginType===Ze.WECHAT_PUBLIC}},{key:"loginType",get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)}}]),e}(),gt=function(e){(0,d.default)(n,e);var t=x(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._cache.updatePersistence("local"),e.next=3,this._request.oauth.getAccessToken();case 3:return Qe(et),Qe(nt,{env:this.config.env,loginType:Ze.ANONYMOUS,persistence:"local"}),t=new mt(this.config.env),e.next=8,t.user.refresh();case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"linkAndRetrieveDataWithTicket",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._cache.keys,r=n.anonymousUuidKey,i=n.refreshTokenKey,o=this._cache.getStore(r),s=this._cache.getStore(i),e.next=7,this._request.send("auth.linkAndRetrieveDataWithTicket",{anonymous_uuid:o,refresh_token:s,ticket:t});case 7:if(u=e.sent,!u.refresh_token){e.next=16;break}return this._clearAnonymousUUID(),this.setRefreshToken(u.refresh_token),e.next=13,this._request.refreshAccessToken();case 13:return Qe(rt,{env:this.config.env}),Qe(nt,{loginType:Ze.CUSTOM,persistence:"local"}),e.abrupt("return",{credential:{refreshToken:u.refresh_token}});case 16:throw new ve({message:"\u533f\u540d\u8f6c\u5316\u5931\u8d25"});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setAnonymousUUID",value:function(e){var t=this._cache.keys,n=t.anonymousUuidKey,r=t.loginTypeKey;this._cache.removeStore(n),this._cache.setStore(n,e),this._cache.setStore(r,Ze.ANONYMOUS)}},{key:"_clearAnonymousUUID",value:function(){this._cache.removeStore(this._cache.keys.anonymousUuidKey)}}]),n}(ht),yt=function(e){(0,d.default)(n,e);var t=x(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new ve({code:"PARAM_ERROR",message:"ticket must be a string"});case 2:return n=this._cache.keys.refreshTokenKey,e.next=5,this._request.send("auth.signInWithTicket",{ticket:t,refresh_token:this._cache.getStore(n)||""});case 5:if(r=e.sent,!r.refresh_token){e.next=15;break}return this.setRefreshToken(r.refresh_token),e.next=10,this._request.refreshAccessToken();case 10:return Qe(et),Qe(nt,{env:this.config.env,loginType:Ze.CUSTOM,persistence:this.config.persistence}),e.next=14,this.refreshUserInfo();case 14:return e.abrupt("return",new mt(this.config.env));case 15:throw new ve({message:"\u81ea\u5b9a\u4e49\u767b\u5f55\u5931\u8d25"});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ht),_t=function(e){(0,d.default)(n,e);var t=x(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){var r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new ve({code:"PARAM_ERROR",message:"email must be a string"});case 2:return r=this._cache.keys.refreshTokenKey,e.next=5,this._request.send("auth.signIn",{loginType:"EMAIL",email:t,password:n,refresh_token:this._cache.getStore(r)||""});case 5:if(i=e.sent,o=i.refresh_token,s=i.access_token,u=i.access_token_expire,!o){e.next=22;break}if(this.setRefreshToken(o),!s||!u){e.next=15;break}this.setAccessToken(s,u),e.next=17;break;case 15:return e.next=17,this._request.refreshAccessToken();case 17:return e.next=19,this.refreshUserInfo();case 19:return Qe(et),Qe(nt,{env:this.config.env,loginType:Ze.EMAIL,persistence:this.config.persistence}),e.abrupt("return",new mt(this.config.env));case 22:throw i.code?new ve({code:i.code,message:"\u90ae\u7bb1\u767b\u5f55\u5931\u8d25: ".concat(i.message)}):new ve({message:"\u90ae\u7bb1\u767b\u5f55\u5931\u8d25"});case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"activate",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.activateEndUserMail",{token:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resetPasswordWithToken",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.resetPasswordWithToken",{token:t,newPassword:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(ht),bt=function(e){(0,d.default)(n,e);var t=x(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"signIn",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){var r,i,o,s,u;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new ve({code:"PARAM_ERROR",message:"username must be a string"});case 2:return"string"!=typeof n&&(n="",console.warn("password is empty")),r=this._cache.keys.refreshTokenKey,e.next=6,this._request.send("auth.signIn",{loginType:Ze.USERNAME,username:t,password:n,refresh_token:this._cache.getStore(r)||""});case 6:if(i=e.sent,o=i.refresh_token,s=i.access_token_expire,u=i.access_token,!o){e.next=23;break}if(this.setRefreshToken(o),!u||!s){e.next=16;break}this.setAccessToken(u,s),e.next=18;break;case 16:return e.next=18,this._request.refreshAccessToken();case 18:return e.next=20,this.refreshUserInfo();case 20:return Qe(et),Qe(nt,{env:this.config.env,loginType:Ze.USERNAME,persistence:this.config.persistence}),e.abrupt("return",new mt(this.config.env));case 23:throw i.code?new ve({code:i.code,message:"\u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55\u5931\u8d25: ".concat(i.message)}):new ve({message:"\u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55\u5931\u8d25"});case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(ht),wt=function(){function e(t){(0,m.default)(this,e),this.config=t,this._cache=Je(t.env),this._request=pt(t.env),this._onAnonymousConverted=this._onAnonymousConverted.bind(this),this._onLoginTypeChanged=this._onLoginTypeChanged.bind(this),Ye(nt,this._onLoginTypeChanged)}return(0,g.default)(e,[{key:"currentUser",get:function(){var e=this.hasLoginState();return e&&e.user||null}},{key:"loginType",get:function(){return this._cache.getStore(this._cache.keys.loginTypeKey)}},{key:"anonymousAuthProvider",value:function(){return new gt(this.config)}},{key:"customAuthProvider",value:function(){return new yt(this.config)}},{key:"emailAuthProvider",value:function(){return new _t(this.config)}},{key:"usernameAuthProvider",value:function(){return new bt(this.config)}},{key:"signInAnonymously",value:function(){var e=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new gt(this.config).signIn());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signInWithEmailAndPassword",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new _t(this.config).signIn(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signInWithUsernameAndPassword",value:function(e,t){return new bt(this.config).signIn(e,t)}},{key:"linkAndRetrieveDataWithTicket",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this._anonymousAuthProvider||(this._anonymousAuthProvider=new gt(this.config)),Ye(rt,this._onAnonymousConverted),e.next=3,this._anonymousAuthProvider.linkAndRetrieveDataWithTicket(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,l.default)(a.default.mark((function e(){var t,n,r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loginType!==Ze.ANONYMOUS){e.next=2;break}throw new ve({message:"\u533f\u540d\u7528\u6237\u4e0d\u652f\u6301\u767b\u51fa\u64cd\u4f5c"});case 2:if(t=this._cache.keys,n=t.refreshTokenKey,r=t.accessTokenKey,i=t.accessTokenExpireKey,o=this._cache.getStore(n),o){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this._request.send("auth.logout",{refresh_token:o});case 7:return s=e.sent,e.abrupt("return",(this._cache.removeStore(n),this._cache.removeStore(r),this._cache.removeStore(i),Qe(et),Qe(nt,{env:this.config.env,loginType:Ze.NULL,persistence:this.config.persistence}),s));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signUpWithEmailAndPassword",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.signUpWithEmailAndPassword",{email:t,password:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendPasswordResetEmail",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this._request.send("auth.sendPasswordResetEmail",{email:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLoginStateChanged",value:function(e){var t=this;Ye(et,(function(){var n=t.hasLoginState();e.call(t,n)}));var n=this.hasLoginState();e.call(this,n)}},{key:"onLoginStateExpired",value:function(e){Ye(tt,e.bind(this))}},{key:"onAccessTokenRefreshed",value:function(e){Ye(it,e.bind(this))}},{key:"onAnonymousConverted",value:function(e){Ye(rt,e.bind(this))}},{key:"onLoginTypeChanged",value:function(e){var t=this;Ye(nt,(function(){var n=t.hasLoginState();e.call(t,n)}))}},{key:"getAccessToken",value:function(){var e=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._request.getAccessToken();case 2:return e.t0=e.sent.accessToken,e.t1=this.config.env,e.abrupt("return",{accessToken:e.t0,env:e.t1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasLoginState",value:function(){var e=this._cache.keys,t=e.accessTokenKey,n=e.accessTokenExpireKey,r=this._cache.getStore(t),i=this._cache.getStore(n);return this._request.oauth.isAccessTokenExpired(r,i)?null:new mt(this.config.env)}},{key:"isUsernameRegistered",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new ve({code:"PARAM_ERROR",message:"username must be a string"});case 2:return e.next=4,this._request.send("auth.isUsernameRegistered",{username:t});case 4:return n=e.sent,r=n.data,e.abrupt("return",r&&r.isRegistered);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLoginState",value:function(){return Promise.resolve(this.hasLoginState())}},{key:"signInWithTicket",value:function(){var e=(0,l.default)(a.default.mark((function e(t){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new yt(this.config).signIn(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shouldRefreshAccessToken",value:function(e){this._request._shouldRefreshAccessTokenHook=e.bind(this)}},{key:"getUserInfo",value:function(){return this._request.send("auth.getUserInfo",{}).then((function(e){return e.code?e:k(k({},e.data),{},{requestId:e.seqId})}))}},{key:"getAuthHeader",value:function(){var e=this._cache.keys,t=e.refreshTokenKey,n=e.accessTokenKey,r=this._cache.getStore(t);return{"x-cloudbase-credentials":this._cache.getStore(n)+"/@@/"+r}}},{key:"_onAnonymousConverted",value:function(e){var t=e.data.env;t===this.config.env&&this._cache.updatePersistence(this.config.persistence)}},{key:"_onLoginTypeChanged",value:function(e){var t=e.data,n=t.loginType,r=t.persistence,i=t.env;i===this.config.env&&(this._cache.updatePersistence(r),this._cache.setStore(this._cache.keys.loginTypeKey,n))}}]),e}(),kt=function(e,t){t=t||$e();var n=pt(this.config.env),r=e.cloudPath,i=e.filePath,a=e.onUploadProgress,o=e.fileType,s=void 0===o?"image":o;return n.send("storage.getUploadMetadata",{path:r}).then((function(e){var o=e.data,u=o.url,c=o.authorization,l=o.token,f=o.fileId,d=o.cosFileId,p=e.requestId,h={key:r,signature:c,"x-cos-meta-fileid":d,success_action_status:"201","x-cos-security-token":l};n.upload({url:u,data:h,file:i,name:r,fileType:s,onUploadProgress:a}).then((function(e){201===e.statusCode?t(null,{fileID:f,requestId:p}):t(new ve({code:"STORAGE_REQUEST_FAIL",message:"STORAGE_REQUEST_FAIL: ".concat(e.data)}))})).catch((function(e){t(e)}))})).catch((function(e){t(e)})),t.promise},xt=function(e,t){t=t||$e();var n=pt(this.config.env),r=e.cloudPath;return n.send("storage.getUploadMetadata",{path:r}).then((function(e){t(null,e)})).catch((function(e){t(e)})),t.promise},St=function(e,t){var n=e.fileList;if(t=t||$e(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u6570\u7ec4"};var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!a||"string"!=typeof a)return{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u5b57\u7b26\u4e32"}}}catch(s){i.e(s)}finally{i.f()}var o={fileid_list:n};return pt(this.config.env).send("storage.batchDeleteFile",o).then((function(e){e.code?t(null,e):t(null,{fileList:e.data.delete_list,requestId:e.requestId})})).catch((function(e){t(e)})),t.promise},Tt=function(e,t){var n=e.fileList;t=t||$e(),n&&Array.isArray(n)||t(null,{code:"INVALID_PARAM",message:"fileList\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u6570\u7ec4"});var r,i=[],a=_(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;"object"==(0,u.default)(o)?(o.hasOwnProperty("fileID")&&o.hasOwnProperty("maxAge")||t(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u5305\u542bfileID\u548cmaxAge\u7684\u5bf9\u8c61"}),i.push({fileid:o.fileID,max_age:o.maxAge})):"string"==typeof o?i.push({fileid:o}):t(null,{code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u5b57\u7b26\u4e32"})}}catch(c){a.e(c)}finally{a.f()}var s={file_list:i};return pt(this.config.env).send("storage.batchGetDownloadUrl",s).then((function(e){e.code?t(null,e):t(null,{fileList:e.data.download_list,requestId:e.requestId})})).catch((function(e){t(e)})),t.promise},Ot=function(){var e=(0,l.default)(a.default.mark((function e(t,n){var r,i,o,s;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.fileID,e.next=3,Tt.call(this,{fileList:[{fileID:r,maxAge:600}]});case 3:if(i=e.sent.fileList[0],"SUCCESS"===i.code){e.next=6;break}return e.abrupt("return",n?n(i):new Promise((function(e){e(i)})));case 6:if(o=pt(this.config.env),s=i.download_url,s=encodeURI(s),n){e.next=10;break}return e.abrupt("return",o.download({url:s}));case 10:return e.t0=n,e.next=13,o.download({url:s});case 13:e.t1=e.sent,(0,e.t0)(e.t1);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),It=function(e,t){var n,r=e.name,i=e.data,a=e.query,o=e.parse,s=e.search,u=e.timeout,c=t||$e();try{n=i?JSON.stringify(i):""}catch(r){return Promise.reject(r)}if(!r)return Promise.reject(new ve({code:"PARAM_ERROR",message:"\u51fd\u6570\u540d\u4e0d\u80fd\u4e3a\u7a7a"}));var l={inQuery:a,parse:o,search:s,function_name:r,request_data:n};return pt(this.config.env).send("functions.invokeFunction",l,{timeout:u}).then((function(e){if(e.code)c(null,e);else{var t=e.data.response_data;if(o)c(null,{result:t,requestId:e.requestId});else try{t=JSON.parse(e.data.response_data),c(null,{result:t,requestId:e.requestId})}catch(e){c(new ve({message:"response data must be json"}))}}return c.promise})).catch((function(e){c(e)})),c.promise},Pt={timeout:15e3,persistence:"session"},At={},Ct=function(){function e(t){(0,m.default)(this,e),this.config=t||this.config,this.authObj=void 0}return(0,g.default)(e,[{key:"init",value:function(t){switch(Ue.adapter||(this.requestClient=new Ue.adapter.reqClass({timeout:t.timeout||5e3,timeoutMsg:"\u8bf7\u6c42\u5728".concat((t.timeout||5e3)/1e3,"s\u5185\u672a\u5b8c\u6210\uff0c\u5df2\u4e2d\u65ad")})),this.config=k(k({},Pt),t),!0){case this.config.timeout>6e5:console.warn("timeout\u5927\u4e8e\u53ef\u914d\u7f6e\u4e0a\u9650[10\u5206\u949f]\uff0c\u5df2\u91cd\u7f6e\u4e3a\u4e0a\u9650\u6570\u503c"),this.config.timeout=6e5;break;case this.config.timeout<100:console.warn("timeout\u5c0f\u4e8e\u53ef\u914d\u7f6e\u4e0b\u9650[100ms]\uff0c\u5df2\u91cd\u7f6e\u4e3a\u4e0b\u9650\u6570\u503c"),this.config.timeout=100}return new e(this.config)}},{key:"auth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.persistence;if(this.authObj)return this.authObj;var n,r=t||Ue.adapter.primaryStorage||Pt.persistence;return r!==this.config.persistence&&(this.config.persistence=r),function(e){var t=e.env;Ke[t]=new He(e),Ve[t]=new He(k(k({},e),{},{persistence:"local"}))}(this.config),n=this.config,dt[n.env]=new ft(n),this.authObj=new wt(this.config),this.authObj}},{key:"on",value:function(e,t){return Ye.apply(this,[e,t])}},{key:"off",value:function(e,t){return Xe.apply(this,[e,t])}},{key:"callFunction",value:function(e,t){return It.apply(this,[e,t])}},{key:"deleteFile",value:function(e,t){return St.apply(this,[e,t])}},{key:"getTempFileURL",value:function(e,t){return Tt.apply(this,[e,t])}},{key:"downloadFile",value:function(e,t){return Ot.apply(this,[e,t])}},{key:"uploadFile",value:function(e,t){return kt.apply(this,[e,t])}},{key:"getUploadMetadata",value:function(e,t){return xt.apply(this,[e,t])}},{key:"registerExtension",value:function(e){At[e.name]=e}},{key:"invokeExtension",value:function(){var e=(0,l.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=At[t],r){e.next=3;break}throw new ve({message:"\u6269\u5c55".concat(t," \u5fc5\u987b\u5148\u6ce8\u518c")});case 3:return e.next=5,r.invoke(n,this);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"useAdapters",value:function(e){var t=function(e){var t,n,r=(t=e,"[object Array]"===Object.prototype.toString.call(t)?e:[e]),i=_(r);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.isMatch,s=a.genAdapter,u=a.runtime;if(o())return{adapter:s(),runtime:u}}}catch(c){i.e(c)}finally{i.f()}}(e)||{},n=t.adapter,r=t.runtime;n&&(Ue.adapter=n),r&&(Ue.runtime=r)}}]),e}(),Et=new Ct;function Dt(e,t,n){void 0===n&&(n={});var r=/\?/.test(t),i="";for(var a in n)""===i?!r&&(t+="?"):i+="&",i+=a+"="+encodeURIComponent(n[a]);return/^http(s)?:\/\//.test(t+=i)?t:""+e+t}var Lt=function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,[{key:"get",value:function(e){var t=e.url,n=e.data,r=e.headers,i=e.timeout;return new Promise((function(e,a){ye.request({url:Dt("https:",t),data:n,method:"GET",header:r,timeout:i,success:function(t){e(t)},fail:function(e){a(e)}})}))}},{key:"post",value:function(e){var t=e.url,n=e.data,r=e.headers,i=e.timeout;return new Promise((function(e,a){ye.request({url:Dt("https:",t),data:n,method:"POST",header:r,timeout:i,success:function(t){e(t)},fail:function(e){a(e)}})}))}},{key:"upload",value:function(e){return new Promise((function(t,n){var r=e.url,i=e.file,a=e.data,o=e.headers,s=e.fileType,u=ye.uploadFile({url:Dt("https:",r),name:"file",formData:Object.assign({},a),filePath:i,fileType:s,header:o,success:function(e){var n={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&a.success_action_status&&(n.statusCode=parseInt(a.success_action_status,10)),t(n)},fail:function(e){n(new Error(e.errMsg||"uploadFile:fail"))}});"function"==typeof e.onUploadProgress&&u&&"function"==typeof u.onProgressUpdate&&u.onProgressUpdate((function(t){e.onUploadProgress({loaded:t.totalBytesSent,total:t.totalBytesExpectedToSend})}))}))}}]),e}(),$t={setItem:function(e,t){ye.setStorageSync(e,t)},getItem:function(e){return ye.getStorageSync(e)},removeItem:function(e){ye.removeStorageSync(e)},clear:function(){ye.clearStorageSync()}},Mt={genAdapter:function(){return{root:{},reqClass:Lt,localStorage:$t,primaryStorage:"local"}},isMatch:function(){return!0},runtime:"uni_app"};Et.useAdapters(Mt);var jt=Et,Rt=jt.init;jt.init=function(e){e.env=e.spaceId;var t=Rt.call(this,e);t.config.provider="tencent",t.config.spaceId=e.spaceId;var n=t.auth;return t.auth=function(e){var t=n.call(this,e);return["linkAndRetrieveDataWithTicket","signInAnonymously","signOut","getAccessToken","getLoginState","signInWithTicket","getUserInfo"].forEach((function(e){var n;t[e]=(n=t[e],function(e){e=e||{};var t=he(e),r=t.success,i=t.fail,a=t.complete;if(!(r||i||a))return n.call(this,e);n.call(this,e).then((function(e){r&&r(e),a&&a(e)}),(function(e){i&&i(e),a&&a(e)}))}).bind(t)})),t},t.customAuth=t.auth,t};var Nt=jt;function Ut(e,t){return Ft.apply(this,arguments)}function Ft(){return Ft=(0,l.default)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="http://".concat(t,":").concat(n,"/system/ping"),e.prev=1,e.next=4,o={url:r,timeout:500},new Promise((function(e,t){ye.request(k(k({},o),{},{success:function(t){e(t)},fail:function(e){t(e)}}))}));case 4:return i=e.sent,e.abrupt("return",!(!i.data||0!==i.data.code));case 8:return e.prev=8,e.t0=e["catch"](1),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ft.apply(this,arguments)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return Bt=(0,l.default)(a.default.mark((function e(t,n){var r,i,o;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.length)){e.next=11;break}return o=t[i],e.next=5,Ut(o,n);case 5:if(!e.sent){e.next=8;break}return r=o,e.abrupt("break",11);case 8:i++,e.next=1;break;case 11:return e.abrupt("return",{address:r,port:n});case 12:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}var Ht={"serverless.file.resource.generateProximalSign":"storage/generate-proximal-sign","serverless.file.resource.report":"storage/report","serverless.file.resource.delete":"storage/delete","serverless.file.resource.getTempFileURL":"storage/get-temp-file-url"},Kt=function(){function e(t){if((0,m.default)(this,e),["spaceId","clientSecret"].forEach((function(e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error("".concat(e," required"))})),!t.endpoint)throw new Error("\u96c6\u7fa4\u7a7a\u95f4\u672a\u914d\u7f6eApiEndpoint\uff0c\u914d\u7f6e\u540e\u9700\u8981\u91cd\u65b0\u5173\u8054\u670d\u52a1\u7a7a\u95f4\u540e\u751f\u6548");this.config=Object.assign({},t),this.config.provider="dcloud",this.config.requestUrl=this.config.endpoint+"/client",this.config.envType=this.config.envType||"public",this.adapter=ye}return(0,g.default)(e,[{key:"request",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r=this,i=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(i.length>1&&void 0!==i[1])||i[1],n=!1,!n){e.next=8;break}return e.next=5,this.setupLocalRequest(t);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=this.setupRequest(t);case 9:return t=e.t0,e.abrupt("return",Promise.resolve().then((function(){return n?r.requestLocal(t):Te.wrappedRequest(t,r.adapter.request)})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestLocal",value:function(e){var t=this;return new Promise((function(n,r){t.adapter.request(Object.assign(e,{complete:function(e){if(e||(e={}),!e.statusCode||e.statusCode>=400){var t=e.data&&e.data.code||"SYS_ERR",i=e.data&&e.data.message||"request:fail";return r(new ve({code:t,message:i}))}n({success:!0,result:e.data})}}))}))}},{key:"setupRequest",value:function(e){var t=Object.assign({},e,{spaceId:this.config.spaceId,timestamp:Date.now()}),n={"Content-Type":"application/json"};n["x-serverless-sign"]=Te.sign(t,this.config.clientSecret);var r=xe();n["x-client-info"]=encodeURIComponent(JSON.stringify(r));var i=_e(),a=i.token;return n["x-client-token"]=a,{url:this.config.requestUrl,method:"POST",data:t,dataType:"json",header:JSON.parse(JSON.stringify(n))}}},{key:"setupLocalRequest",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l,f;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=xe(),r=_e(),i=r.token,o=Object.assign({},t,{spaceId:this.config.spaceId,timestamp:Date.now(),clientInfo:n,token:i}),s=this.__dev__&&this.__dev__.debugInfo||{},u=s.address,c=s.servePort,e.next=9,qt(u,c);case 9:return l=e.sent,f=l.address,e.abrupt("return",{url:"http://".concat(f,":").concat(c,"/").concat(Ht[t.method]),method:"POST",data:o,dataType:"json",header:JSON.parse(JSON.stringify({"Content-Type":"application/json"}))});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callFunction",value:function(e){var t={method:"serverless.function.runtime.invoke",params:JSON.stringify({functionTarget:e.name,functionArgs:e.data||{}})};return this.request(t,!1)}},{key:"getUploadFileOptions",value:function(e){var t={method:"serverless.file.resource.generateProximalSign",params:JSON.stringify(e)};return this.request(t)}},{key:"reportUploadFile",value:function(e){var t={method:"serverless.file.resource.report",params:JSON.stringify(e)};return this.request(t)}},{key:"uploadFile",value:function(e){var t,n=this,r=e.filePath,i=e.cloudPath,a=e.fileType,o=void 0===a?"image":a,s=e.onUploadProgress;if(!i)throw new ve({code:"CLOUDPATH_REQUIRED",message:"cloudPath\u4e0d\u53ef\u4e3a\u7a7a"});return this.getUploadFileOptions({cloudPath:i}).then((function(e){var i=e.result,a=i.url,u=i.formData,c=i.name;return t=e.result.fileUrl,new Promise((function(e,t){var i=n.adapter.uploadFile({url:a,formData:u,name:c,filePath:r,fileType:o,success:function(n){n&&n.statusCode<400?e(n):t(new ve({code:"UPLOAD_FAILED",message:"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))},fail:function(e){t(new ve({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))}});"function"==typeof s&&i&&"function"==typeof i.onProgressUpdate&&i.onProgressUpdate((function(e){s({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))})).then((function(){return n.reportUploadFile({cloudPath:i})})).then((function(e){return new Promise((function(n,i){e.success?n({success:!0,filePath:r,fileID:t}):i(new ve({code:"UPLOAD_FAILED",message:"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))}))}))}},{key:"deleteFile",value:function(e){var t=e.fileList,n={method:"serverless.file.resource.delete",params:JSON.stringify({fileList:t})};return this.request(n).then((function(e){if(e.success)return e.result;throw new ve({code:"DELETE_FILE_FAILED",message:"\u5220\u9664\u6587\u4ef6\u5931\u8d25"})}))}},{key:"getTempFileURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fileList,n=e.maxAge;if(!Array.isArray(t)||0===t.length)throw new ve({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u5b57\u7b26\u4e32"});var r={method:"serverless.file.resource.getTempFileURL",params:JSON.stringify({fileList:t,maxAge:n})};return this.request(r).then((function(e){if(e.success)return{fileList:e.result.fileList.map((function(e){return{fileID:e.fileID,tempFileURL:e.tempFileURL}}))};throw new ve({code:"GET_TEMP_FILE_URL_FAILED",message:"\u83b7\u53d6\u4e34\u65f6\u6587\u4ef6\u94fe\u63a5\u5931\u8d25"})}))}}]),e}(),Vt={init:function(e){var t=new Kt(e),n={signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!1)}};return t.auth=function(){return n},t.customAuth=t.auth,t}},Jt=S((function(e,t){e.exports=O.enc.Hex}));function Wt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.functionName,i=t.method,a=t.headers,o=t.signHeaderKeys,u=void 0===o?[]:o,c=t.config,l=String(Date.now()),f=Wt(),d=Object.assign({},a,{"x-from-app-id":c.spaceAppId,"x-from-env-id":c.spaceId,"x-to-env-id":c.spaceId,"x-from-instance-id":l,"x-from-function-name":r,"x-client-timestamp":l,"x-alipay-source":"client","x-request-id":f,"x-alipay-callid":f,"x-trace-id":f}),p=["x-from-app-id","x-from-env-id","x-to-env-id","x-from-instance-id","x-from-function-name","x-client-timestamp"].concat(u),h=e.split("?")||[],v=(0,s.default)(h,2),m=v[0],g=void 0===m?"":m,y=v[1],_=void 0===y?"":y,b=function(e){var t="HMAC-SHA256",n=e.signedHeaders.join(";"),r=e.signedHeaders.map((function(t){return"".concat(t.toLowerCase(),":").concat(e.headers[t],"\n")})).join(""),i=De(e.body).toString(Jt),a="".concat(e.method.toUpperCase(),"\n").concat(e.path,"\n").concat(e.query,"\n").concat(r,"\n").concat(n,"\n").concat(i,"\n"),o=De(a).toString(Jt),s="".concat(t,"\n").concat(e.timestamp,"\n").concat(o,"\n"),u=Le(s,e.secretKey).toString(Jt);return"".concat(t," Credential=").concat(e.secretId,", SignedHeaders=").concat(n,", Signature=").concat(u)}({path:g,query:_,method:i,headers:d,timestamp:l,body:JSON.stringify(n),secretId:c.accessKey,secretKey:c.secretKey,signedHeaders:p.sort()});return{url:"".concat(c.endpoint).concat(e),headers:Object.assign({},d,{Authorization:b})}}function zt(e){var t=e.url,n=e.data,r=e.method,i=void 0===r?"POST":r,a=e.headers,o=void 0===a?{}:a,s=e.timeout;return new Promise((function(e,r){ye.request({url:t,method:i,data:"object"==(0,u.default)(n)?JSON.stringify(n):n,header:o,dataType:"json",timeout:s,complete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o["x-trace-id"]||"";if(!t.statusCode||t.statusCode>=400){var i=t.data||{},a=i.message,s=i.errMsg,u=i.trace_id;return r(new ve({code:"SYS_ERR",message:a||s||"request:fail",requestId:u||n}))}e({status:t.statusCode,data:t.data,headers:t.header,requestId:n})}})}))}function Yt(e,t){var n=e.path,r=e.data,i=e.method,a=void 0===i?"GET":i,o=Gt(n,{functionName:"",data:r,method:a,headers:{"x-alipay-cloud-mode":"oss","x-data-api-type":"oss","x-expire-timestamp":Date.now()+6e4},signHeaderKeys:["x-data-api-type","x-expire-timestamp"],config:t}),s=o.url,u=o.headers;return zt({url:s,data:r,method:a,headers:u}).then((function(e){var t=e.data||{};if(!t.success)throw new ve({code:e.errCode,message:e.errMsg,requestId:e.requestId});return t.data||{}})).catch((function(e){throw new ve({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.trim().replace(/^cloud:\/\//,""),n=t.indexOf("/");if(n<=0)throw new ve({code:"INVALID_PARAM",message:"fileID\u4e0d\u5408\u6cd5"});var r=t.substring(0,n),i=t.substring(n+1);return r!==this.config.spaceId&&console.warn("file ".concat(e," does not belong to env ").concat(this.config.spaceId)),i}function Xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cloud://".concat(this.config.spaceId,"/").concat(e.replace(/^\/+/,""))}var Zt=function(){function e(t){(0,m.default)(this,e),this.config=t}return(0,g.default)(e,[{key:"signedURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="/ws/function/".concat(e),r=this.config.wsEndpoint.replace(/^ws(s)?:\/\//,""),i=Object.assign({},t,{accessKeyId:this.config.accessKey,signatureNonce:Wt(),timestamp:""+Date.now()}),a=[n,["accessKeyId","authorization","signatureNonce","timestamp"].sort().map((function(e){return i[e]?"".concat(e,"=").concat(i[e]):null})).filter(Boolean).join("&"),"host:".concat(r)].join("\n"),o=["HMAC-SHA256",De(a).toString(Jt)].join("\n"),s=Le(o,this.config.secretKey).toString(Jt),u=Object.keys(i).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(i[e]))})).join("&");return"".concat(this.config.wsEndpoint).concat(n,"?").concat(u,"&signature=").concat(s)}}]),e}(),en=function(){function e(t){if((0,m.default)(this,e),["spaceId","spaceAppId","accessKey","secretKey"].forEach((function(e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new Error("".concat(e," required"))})),t.endpoint){if("string"!=typeof t.endpoint)throw new Error("endpoint must be string");if(!/^https:\/\//.test(t.endpoint))throw new Error("endpoint must start with https://");t.endpoint=t.endpoint.replace(/\/$/,"")}this.config=Object.assign({},t,{endpoint:t.endpoint||"https://".concat(t.spaceId,".api-hz.cloudbasefunction.cn"),wsEndpoint:t.wsEndpoint||"wss://".concat(t.spaceId,".api-hz.cloudbasefunction.cn")}),this._websocket=new Zt(this.config)}return(0,g.default)(e,[{key:"callFunction",value:function(e){return function(e,t){var n=e.name,r=e.data,i=e.async,a=void 0!==i&&i,o=e.timeout,s="POST",u={"x-to-function-name":n};a&&(u["x-function-invoke-type"]="async");var c=Gt("/functions/invokeFunction",{functionName:n,data:r,method:s,headers:u,signHeaderKeys:["x-to-function-name"],config:t}),l=c.url,f=c.headers;return zt({url:l,data:r,method:s,headers:f,timeout:o}).then((function(e){var t=0;if(a){var n=e.data||{};t="200"===n.errCode?0:n.errCode,e.data=n.data||{},e.errMsg=n.errMsg}if(0!==t)throw new ve({code:t,message:e.errMsg,requestId:e.requestId});return{errCode:t,success:0===t,requestId:e.requestId,result:e.data}})).catch((function(e){throw new ve({code:e.errCode,message:e.errMsg,requestId:e.requestId})}))}(e,this.config)}},{key:"uploadFileToOSS",value:function(e){var t=e.url,n=e.filePath,r=e.fileType,i=e.formData,a=e.onUploadProgress;return new Promise((function(e,o){var s=ye.uploadFile({url:t,filePath:n,fileType:r,formData:i,name:"file",success:function(t){t&&t.statusCode<400?e(t):o(new ve({code:"UPLOAD_FAILED",message:"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))},fail:function(e){o(new ve({code:e.code||"UPLOAD_FAILED",message:e.message||e.errMsg||"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25"}))}});"function"==typeof a&&s&&"function"==typeof s.onProgressUpdate&&s.onProgressUpdate((function(e){a({loaded:e.totalBytesSent,total:e.totalBytesExpectedToSend})}))}))}},{key:"uploadFile",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r,i,o,s,u,c,l,f,d,p;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.filePath,r=t.cloudPath,i=void 0===r?"":r,o=t.fileType,s=void 0===o?"image":o,u=t.onUploadProgress,"string"===j(i)){e.next=3;break}throw new ve({code:"INVALID_PARAM",message:"cloudPath\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\u7c7b\u578b"});case 3:if(i=i.trim()){e.next=5;break}throw new ve({code:"INVALID_PARAM",message:"cloudPath\u4e0d\u53ef\u4e3a\u7a7a"});case 5:if(!/:\/\//.test(i)){e.next=7;break}throw new ve({code:"INVALID_PARAM",message:"cloudPath\u4e0d\u5408\u6cd5"});case 7:return e.next=9,Yt({path:"/".concat(i.replace(/^\//,""),"?post_url")},this.config);case 9:return c=e.sent,l=c.file_id,f=c.upload_url,d=c.form_data,p=d&&d.reduce((function(e,t){return e[t.key]=t.value,e}),{}),e.abrupt("return",this.uploadFileToOSS({url:f,filePath:n,fileType:s,formData:p,onUploadProgress:u}).then((function(){return{fileID:l}})));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTempFileURL",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r=this;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.fileList,e.abrupt("return",new Promise((function(e,t){(!n||n.length<0)&&e({code:"INVALID_PARAM",message:"fileList\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4"}),n.length>50&&e({code:"INVALID_PARAM",message:"fileList\u6570\u7ec4\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750"});var i,a=[],o=_(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=void 0;"string"!==j(s)&&e({code:"INVALID_PARAM",message:"fileList\u7684\u5143\u7d20\u5fc5\u987b\u662f\u975e\u7a7a\u7684\u5b57\u7b26\u4e32"});try{u=Qt.call(r,s)}catch(e){console.warn(e.errCode,e.errMsg),u=s}a.push({file_id:u,expire:600})}}catch(c){o.e(c)}finally{o.f()}Yt({path:"/?download_url",data:{file_list:a},method:"POST"},r.config).then((function(t){var n=t.file_list,i=void 0===n?[]:n;e({fileList:i.map((function(e){return{fileID:Xt.call(r,e.file_id),tempFileURL:e.download_url}}))})})).catch((function(e){return t(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connectWebSocket",value:function(){var e=(0,l.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.name,r=t.query,e.abrupt("return",ye.connectSocket({url:this._websocket.signedURL(n,r),complete:function(){}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),tn={init:function(e){e.provider="alipay";var t=new en(e);return t.auth=function(){return{signInAnonymously:function(){return Promise.resolve()},getLoginState:function(){return Promise.resolve(!0)}}},t}};function nn(e){var t,n=e.data;t=xe();var r=JSON.parse(JSON.stringify(n||{}));if(Object.assign(r,{clientInfo:t}),!r.uniIdToken){var i=_e(),a=i.token;a&&(r.uniIdToken=a)}return r}var rn=[{rule:/fc_function_not_found|FUNCTION_NOT_FOUND/,content:"\uff0c\u4e91\u51fd\u6570[{functionName}]\u5728\u4e91\u7aef\u4e0d\u5b58\u5728\uff0c\u8bf7\u68c0\u67e5\u6b64\u4e91\u51fd\u6570\u540d\u79f0\u662f\u5426\u6b63\u786e\u4ee5\u53ca\u8be5\u4e91\u51fd\u6570\u662f\u5426\u5df2\u4e0a\u4f20\u5230\u670d\u52a1\u7a7a\u95f4",mode:"append"}],an=/[\\^$.*+?()[\]{}|]/g,on=RegExp(an.source);function sn(e,t,n){return e.replace(new RegExp((r=t)&&on.test(r)?r.replace(an,"\\$&"):r,"g"),n);var r}var un={NONE:"none",REQUEST:"request",RESPONSE:"response",BOTH:"both"},cn="_globalUniCloudStatus",ln="_globalUniCloudSecureNetworkCache__{spaceId}",fn="uni-secure-network",dn={SYSTEM_ERROR:{code:2e4,message:"System error"},APP_INFO_INVALID:{code:20101,message:"Invalid client"},GET_ENCRYPT_KEY_FAILED:{code:20102,message:"Get encrypt key failed"}};function pn(e){var t=e||{},n=t.errSubject,r=t.subject,i=t.errCode,a=t.errMsg,o=t.code,s=t.message,u=t.cause;return new ve({subject:n||r||fn,code:i||o||dn.SYSTEM_ERROR.code,message:a||s,cause:u})}var hn;hn="0123456789abcdef";var vn;function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.secretType;return t===un.REQUEST||t===un.RESPONSE||t===un.BOTH}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.data,r=void 0===n?{}:n;return"app"===J&&"DCloud-clientDB"===t&&"encryption"===r.redirectTo&&"getAppClientKey"===r.action}function yn(e){e.functionName,e.result,e.logPvd}function _n(e){var t=e.callFunction,n=function(n){var r=this,i=n.name;n.data=nn.call(e,{data:n.data});var a={aliyun:"aliyun",tencent:"tcb",tcb:"tcb",alipay:"alipay",dcloud:"dcloud"}[this.config.provider],o=mn(n),s=gn(n),u=o||s;return t.call(this,n).then((function(e){return e.errCode=0,!u&&yn.call(r,{functionName:i,result:e,logPvd:a}),Promise.resolve(e)}),(function(e){return!u&&yn.call(r,{functionName:i,result:e,logPvd:a}),e&&e.message&&(e.message=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,r=e.extraInfo,i=void 0===r?{}:r,a=e.formatter,o=void 0===a?[]:a,s=0;s<o.length;s++){var u=o[s],c=u.rule,l=u.content,f=u.mode,d=n.match(c);if(d){for(var p=l,h=1;h<d.length;h++)p=sn(p,"{$".concat(h,"}"),d[h]);for(var v in i)p=sn(p,"{".concat(v,"}"),i[v]);return"replace"===f?p:n+p}}return n}({message:"[".concat(n.name,"]: ").concat(e.message),formatter:rn,extraInfo:{functionName:i}})),Promise.reject(e)}))};e.callFunction=function(t){var r,i,a=e.config,o=a.provider,s=a.spaceId,u=t.name;return t.data=t.data||{},r=n,r=r.bind(e),i=gn(t)?n.call(e,t):function(e){var t=e.name,n=e.data,r=void 0===n?{}:n;return"mp-weixin"===J&&"uni-id-co"===t&&"secureNetworkHandshakeByWeixin"===r.method}(t)?r.call(e,t):mn(t)?new vn({secretType:t.secretType,uniCloudIns:e}).wrapEncryptDataCallFunction(n.bind(e))(t):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.provider,n=e.spaceId,r=e.functionName,i=we(),a=i.appId,o=i.uniPlatform,s=i.osName,u=o;"app"===o&&(u=s);var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.provider,n=e.spaceId,r=V;if(!r)return{};t=function(e){return"tencent"===e?"tcb":e}(t);var i=r.find((function(e){return e.provider===t&&e.spaceId===n}));return i&&i.config}({provider:t,spaceId:n});if(!c||!c.accessControl||!c.accessControl.enable)return!1;var l=c.accessControl.function||{},f=Object.keys(l);if(0===f.length)return!0;var d=function(e,t){for(var n,r,i,a=0;a<e.length;a++){var o=e[a];o!==t?"*"!==o?o.split(",").map((function(e){return e.trim()})).indexOf(t)>-1&&(r=o):i=o:n=o}return n||r||i}(f,r);if(!d)return!1;if((l[d]||[]).find((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.appId===a&&(e.platform||"").toLowerCase()===u.toLowerCase()})))return!0;throw console.error("\u6b64\u5e94\u7528[appId: ".concat(a,", platform: ").concat(u,"]\u4e0d\u5728\u4e91\u7aef\u914d\u7f6e\u7684\u5141\u8bb8\u8bbf\u95ee\u7684\u5e94\u7528\u5217\u8868\u5185\uff0c\u53c2\u8003\uff1ahttps://uniapp.dcloud.net.cn/uniCloud/secure-network.html#verify-client")),pn(dn.APP_INFO_INVALID)}({provider:o,spaceId:s,functionName:u})?new vn({secretType:t.secretType,uniCloudIns:e}).wrapVerifyClientCallFunction(n.bind(e))(t):r(t),Object.defineProperty(i,"result",{get:function(){return console.warn("\u5f53\u524d\u8fd4\u56de\u7ed3\u679c\u4e3aPromise\u7c7b\u578b\uff0c\u4e0d\u53ef\u76f4\u63a5\u8bbf\u95ee\u5176result\u5c5e\u6027\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003\uff1ahttps://uniapp.dcloud.net.cn/uniCloud/faq?id=promise"),{}}}),i.then((function(e){return e}))}}vn="mp-weixin"!==J&&"app"!==J?function(){return(0,g.default)((function e(){throw(0,m.default)(this,e),pn({message:"Platform ".concat(J," is not supported by secure network")})}))}():function(){return(0,g.default)((function e(){throw(0,m.default)(this,e),pn({message:"Platform ".concat(J," is not enabled, please check whether secure network module is enabled in your manifest.json")})}))}();var bn=Symbol("CLIENT_DB_INTERNAL");function wn(e,t){return e.then="DoNotReturnProxyWithAFunctionNamedThen",e._internalType=bn,e.inspect=null,e.__ob__=void 0,new Proxy(e,{get:function(e,n,r){if("_uniClient"===n)return null;if("symbol"==(0,u.default)(n))return e[n];if(n in e||"string"!=typeof n){var i=e[n];return"function"==typeof i?i.bind(e):i}return t.get(e,n,r)}})}function kn(e){return{on:function(t,n){e[t]=e[t]||[],e[t].indexOf(n)>-1||e[t].push(n)},off:function(t,n){e[t]=e[t]||[];var r=e[t].indexOf(n);-1!==r&&e[t].splice(r,1)}}}var xn=["db.Geo","db.command","command.aggregate"];function Sn(e,t){return xn.indexOf("".concat(e,".").concat(t))>-1}function Tn(e){switch(j(e)){case"array":return e.map((function(e){return Tn(e)}));case"object":return e._internalType===bn||Object.keys(e).forEach((function(t){e[t]=Tn(e[t])})),e;case"regexp":return{$regexp:{source:e.source,flags:e.flags}};case"date":return{$date:e.toISOString()};default:return e}}function On(e){return e&&e.content&&e.content.$method}var In=function(){function e(t,n,r){(0,m.default)(this,e),this.content=t,this.prevStage=n||null,this.udb=null,this._database=r}return(0,g.default)(e,[{key:"toJSON",value:function(){for(var e=this,t=[e.content];e.prevStage;)e=e.prevStage,t.push(e.content);return{$db:t.reverse().map((function(e){return{$method:e.$method,$param:Tn(e.$param)}}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAction",value:function(){var e=this.toJSON().$db.find((function(e){return"action"===e.$method}));return e&&e.$param&&e.$param[0]}},{key:"getCommand",value:function(){return{$db:this.toJSON().$db.filter((function(e){return"action"!==e.$method}))}}},{key:"isAggregate",get:function(){for(var e=this;e;){var t=On(e),n=On(e.prevStage);if("aggregate"===t&&"collection"===n||"pipeline"===t)return!0;e=e.prevStage}return!1}},{key:"isCommand",get:function(){for(var e=this;e;){if("command"===On(e))return!0;e=e.prevStage}return!1}},{key:"isAggregateCommand",get:function(){for(var e=this;e;){var t=On(e),n=On(e.prevStage);if("aggregate"===t&&"command"===n)return!0;e=e.prevStage}return!1}},{key:"getNextStageFn",value:function(e){var t=this;return function(){return Pn({$method:e,$param:Tn(Array.from(arguments))},t,t._database)}}},{key:"count",get:function(){return this.isAggregate?this.getNextStageFn("count"):function(){return this._send("count",Array.from(arguments))}}},{key:"remove",get:function(){return this.isCommand?this.getNextStageFn("remove"):function(){return this._send("remove",Array.from(arguments))}}},{key:"get",value:function(){return this._send("get",Array.from(arguments))}},{key:"add",get:function(){return this.isCommand?this.getNextStageFn("add"):function(){return this._send("add",Array.from(arguments))}}},{key:"update",value:function(){return this._send("update",Array.from(arguments))}},{key:"end",value:function(){return this._send("end",Array.from(arguments))}},{key:"set",get:function(){return this.isCommand?this.getNextStageFn("set"):function(){throw new Error("JQL\u7981\u6b62\u4f7f\u7528set\u65b9\u6cd5")}}},{key:"_send",value:function(e,t){var n=this.getAction(),r=this.getCommand();return r.$db.push({$method:e,$param:Tn(t)}),this._database._callCloudFunction({action:n,command:r})}}]),e}();function Pn(e,t,n){return wn(new In(e,t,n),{get:function(e,t){var r="db";return e&&e.content&&(r=e.content.$method),Sn(r,t)?Pn({$method:t},e,n):function(){return Pn({$method:t,$param:Tn(Array.from(arguments))},e,n)}}})}function An(e){var t=e.path,n=e.method;return function(){function e(){(0,m.default)(this,e),this.param=Array.from(arguments)}return(0,g.default)(e,[{key:"toJSON",value:function(){return{$newDb:[].concat((0,c.default)(t.map((function(e){return{$method:e}}))),[{$method:n,$param:this.param}])}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}()}var Cn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.uniClient,r=void 0===n?{}:n,i=t.isJQL,a=void 0!==i&&i;(0,m.default)(this,e),this._uniClient=r,this._authCallBacks={},this._dbCallBacks={},r._isDefault&&(this._dbCallBacks=Y("_globalUniCloudDatabaseCallback")),a||(this.auth=kn(this._authCallBacks)),this._isJQL=a,Object.assign(this,kn(this._dbCallBacks)),this.env=wn({},{get:function(e,t){return{$env:t}}}),this.Geo=wn({},{get:function(e,t){return An({path:["Geo"],method:t})}}),this.serverDate=An({path:[],method:"serverDate"}),this.RegExp=An({path:[],method:"RegExp"})}return(0,g.default)(e,[{key:"getCloudEnv",value:function(e){if("string"!=typeof e||!e.trim())throw new Error("getCloudEnv\u53c2\u6570\u9519\u8bef");return{$env:e.replace("$cloudEnv_","")}}},{key:"_callback",value:function(e,t){var n=this._dbCallBacks;n[e]&&n[e].forEach((function(e){e.apply(void 0,(0,c.default)(t))}))}},{key:"_callbackAuth",value:function(e,t){var n=this._authCallBacks;n[e]&&n[e].forEach((function(e){e.apply(void 0,(0,c.default)(t))}))}},{key:"multiSend",value:function(){var e=Array.from(arguments),t=e.map((function(e){var t=e.getAction(),n=e.getCommand();if("getTemp"!==n.$db[n.$db.length-1].$method)throw new Error("multiSend\u53ea\u652f\u6301\u5b50\u547d\u4ee4\u5185\u4f7f\u7528getTemp");return{action:t,command:n}}));return this._callCloudFunction({multiCommand:t,queryList:e})}}]),e}();function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wn(new e(t),{get:function(e,t){return Sn("db",t)?Pn({$method:t},null,e):function(){return Pn({$method:t,$param:Tn(Array.from(arguments))},null,e)}}})}var Dn=function(e){(0,d.default)(n,e);var t=x(n);function n(){return(0,m.default)(this,n),t.apply(this,arguments)}return(0,g.default)(n,[{key:"_parseResult",value:function(e){return this._isJQL?e.result:e}},{key:"_callCloudFunction",value:function(e){var t=this,n=e.action,r=e.command,i=e.multiCommand,a=e.queryList;function o(e,t){if(i&&a)for(var n=0;n<a.length;n++){var r=a[n];r.udb&&"function"==typeof r.udb.setResult&&(t?r.udb.setResult(t):r.udb.setResult(e.result.dataList[n]))}}var s=this,u=this._isJQL?"databaseForJQL":"database";function c(e){return s._callback("error",[e]),te(ne(u,"fail"),e).then((function(){return te(ne(u,"complete"),e)})).then((function(){return o(null,e),le(ae.RESPONSE,{type:oe.CLIENT_DB,content:e}),Promise.reject(e)}))}var l=te(ne(u,"invoke")),f=this._uniClient;return l.then((function(){return f.callFunction({name:"DCloud-clientDB",type:D.CLIENT_DB,data:{action:n,command:r,multiCommand:i}})})).then((function(e){var n=e.result,r=n.code,i=n.message,a=n.token,l=n.tokenExpired,f=n.systemInfo,d=void 0===f?[]:f;if(d)for(var p=0;p<d.length;p++){var h=d[p],v=h.level,m=h.message,g=h.detail,y="[System Info]"+m;g&&(y="".concat(y,"\n\u8be6\u7ec6\u4fe1\u606f\uff1a").concat(g)),(console["app"===J&&"warn"===v?"error":v]||console.log)(y)}if(r)return c(new ve({code:r,message:i,requestId:e.requestId}));e.result.errCode=e.result.errCode||e.result.code,e.result.errMsg=e.result.errMsg||e.result.message,a&&l&&(be({token:a,tokenExpired:l}),t._callbackAuth("refreshToken",[{token:a,tokenExpired:l}]),t._callback("refreshToken",[{token:a,tokenExpired:l}]),le(ae.REFRESH_TOKEN,{token:a,tokenExpired:l}));for(var _=[{prop:"affectedDocs",tips:"affectedDocs\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\uff0c\u8bf7\u4f7f\u7528inserted/deleted/updated/data.length\u66ff\u4ee3"},{prop:"code",tips:"code\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\uff0c\u8bf7\u4f7f\u7528errCode\u66ff\u4ee3"},{prop:"message",tips:"message\u4e0d\u518d\u63a8\u8350\u4f7f\u7528\uff0c\u8bf7\u4f7f\u7528errMsg\u66ff\u4ee3"}],b=function(t){var n=_[t],r=n.prop,i=n.tips;if(r in e.result){var a=e.result[r];Object.defineProperty(e.result,r,{get:function(){return console.warn(i),a}})}},w=0;w<_.length;w++)b(w);return function(e){return te(ne(u,"success"),e).then((function(){return te(ne(u,"complete"),e)})).then((function(){o(e,null);var t=s._parseResult(e);return le(ae.RESPONSE,{type:oe.CLIENT_DB,content:t}),Promise.resolve(t)}))}(e)}),(function(e){return/fc_function_not_found|FUNCTION_NOT_FOUND/g.test(e.message)&&console.warn("clientDB\u672a\u521d\u59cb\u5316\uff0c\u8bf7\u5728web\u63a7\u5236\u53f0\u4fdd\u5b58\u4e00\u6b21schema\u4ee5\u5f00\u542fclientDB"),c(new ve({code:e.code||"SYSTEM_ERROR",message:e.message,requestId:e.requestId}))}))}}]),n}(Cn),Ln="token\u65e0\u6548\uff0c\u8df3\u8f6c\u767b\u5f55\u9875\u9762",$n="token\u8fc7\u671f\uff0c\u8df3\u8f6c\u767b\u5f55\u9875\u9762",Mn={TOKEN_INVALID_TOKEN_EXPIRED:$n,TOKEN_INVALID_INVALID_CLIENTID:Ln,TOKEN_INVALID:Ln,TOKEN_INVALID_WRONG_TOKEN:Ln,TOKEN_INVALID_ANONYMOUS_USER:Ln},jn={"uni-id-token-expired":$n,"uni-id-check-token-failed":Ln,"uni-id-token-not-exist":Ln,"uni-id-check-device-feature-failed":Ln},Rn=k(k(k({},Mn),jn),{},{default:"\u7528\u6237\u672a\u767b\u5f55\u6216\u767b\u5f55\u72b6\u6001\u8fc7\u671f\uff0c\u81ea\u52a8\u8df3\u8f6c\u767b\u5f55\u9875\u9762"});function Nn(e,t){var n="";return n=e?"".concat(e,"/").concat(t):t,n.replace(/^\//,"")}function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],r=[];return e.forEach((function(e){!0===e.needLogin?n.push(Nn(t,e.path)):!1===e.needLogin&&r.push(Nn(t,e.path))})),{needLoginPage:n,notNeedLoginPage:r}}function Fn(e){return e.split("?")[0].replace(/^\//,"")}function qn(){return function(e){var t=e&&e.$page&&e.$page.fullPath;return t?("/"!==t.charAt(0)&&(t="/"+t),t):""}(function(){var e=getCurrentPages();return e[e.length-1]}())}function Bn(){return Fn(qn())}function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;if(!(t&&t.list&&t.list.length))return!1;var n=t.list,r=Fn(e);return n.some((function(e){return e.pagePath===r}))}var Kn,Vn=!!y.default.uniIdRouter,Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.default,t=e.pages,n=void 0===t?[]:t,r=e.subPackages,i=void 0===r?[]:r,a=e.uniIdRouter,o=void 0===a?{}:a,s=e.tabBar,u=void 0===s?{}:s,l=o.loginPage,f=o.needLogin,d=void 0===f?[]:f,p=o.resToLogin,h=void 0===p||p,v=Un(n),m=v.needLoginPage,g=v.notNeedLoginPage,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[];return e.forEach((function(e){var r=e.root,i=e.pages,a=void 0===i?[]:i,o=Un(a,r),s=o.needLoginPage,u=o.notNeedLoginPage;t.push.apply(t,(0,c.default)(s)),n.push.apply(n,(0,c.default)(u))})),{needLoginPage:t,notNeedLoginPage:n}}(i),b=_.needLoginPage,w=_.notNeedLoginPage;return{loginPage:l,routerNeedLogin:d,resToLogin:h,needLoginPage:[].concat((0,c.default)(m),(0,c.default)(b)),notNeedLoginPage:[].concat((0,c.default)(g),(0,c.default)(w)),loginPageInTabBar:Hn(l,u)}}(),Wn=Jn.loginPage,Gn=Jn.routerNeedLogin,zn=Jn.resToLogin,Yn=Jn.needLoginPage,Qn=Jn.notNeedLoginPage,Xn=Jn.loginPageInTabBar;if(Yn.indexOf(Wn)>-1)throw new Error("Login page [".concat(Wn,'] should not be "needLogin", please check your pages.json'));function Zn(e){var t=Bn();if("/"===e.charAt(0))return e;var n=e.split("?"),r=(0,s.default)(n,2),i=r[0],a=r[1],o=i.replace(/^\//,"").split("/"),u=t.split("/");u.pop();for(var c=0;c<o.length;c++){var l=o[c];".."===l?u.pop():"."!==l&&u.push(l)}return""===u[0]&&u.shift(),"/"+u.join("/")+(a?"?"+a:"")}function er(e){var t=Fn(Zn(e));return!(Qn.indexOf(t)>-1)&&(Yn.indexOf(t)>-1||Gn.some((function(t){return function(e,t){return new RegExp(t).test(e)}(e,t)})))}function tr(e){var t=e.redirect,n=Fn(t),r=Fn(Wn);return Bn()!==r&&n!==r}function nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.api,n=e.redirect;if(n&&tr({redirect:n})){var r=function(e,t){return"/"!==e.charAt(0)&&(e="/"+e),t?e.indexOf("?")>-1?e+"&uniIdRedirectUrl=".concat(encodeURIComponent(t)):e+"?uniIdRedirectUrl=".concat(encodeURIComponent(t)):e}(Wn,n);Xn?"navigateTo"!==t&&"redirectTo"!==t||(t="switchTab"):"switchTab"===t&&(t="navigateTo");var i={navigateTo:uni.navigateTo,redirectTo:uni.redirectTo,switchTab:uni.switchTab,reLaunch:uni.reLaunch};setTimeout((function(){i[t]({url:r})}),0)}}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n={abortLoginPageJump:!1,autoToLoginPage:!1},r=function(){var e,t=_e(),n=t.token,r=t.tokenExpired;if(n){if(r<Date.now()){var i="uni-id-token-expired";e={errCode:i,errMsg:Rn[i]}}}else{var a="uni-id-check-token-failed";e={errCode:a,errMsg:Rn[a]}}return e}();if(er(t)&&r){if(r.uniIdRedirectUrl=t,se(ae.NEED_LOGIN).length>0)return setTimeout((function(){le(ae.NEED_LOGIN,r)}),0),n.abortLoginPageJump=!0,n;n.autoToLoginPage=!0}return n}function ir(){!function(){var e=qn(),t=rr({url:e}),n=t.abortLoginPageJump,r=t.autoToLoginPage;n||r&&nr({api:"redirectTo",redirect:e})}();for(var e=["navigateTo","redirectTo","reLaunch","switchTab"],t=function(t){var n=e[t];uni.addInterceptor(n,{invoke:function(e){var t=rr({url:e.url}),r=t.abortLoginPageJump,i=t.autoToLoginPage;return r?e:i?(nr({api:n,redirect:Zn(e.url)}),!1):e}})},n=0;n<e.length;n++)t(n)}function ar(){this.onResponse((function(e){var t=e.type,n=e.content,r=!1;switch(t){case"cloudobject":r=function(e){if("object"!=(0,u.default)(e))return!1;var t=e||{},n=t.errCode;return n in Rn}(n);break;case"clientdb":r=function(e){if("object"!=(0,u.default)(e))return!1;var t=e||{},n=t.errCode;return n in Mn}(n)}r&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=se(ae.NEED_LOGIN);pe().then((function(){var n=qn();if(n&&tr({redirect:n}))return t.length>0?le(ae.NEED_LOGIN,Object.assign({uniIdRedirectUrl:n},e)):void(Wn&&nr({api:"navigateTo",redirect:n}))}))}(n)}))}function or(e){!function(e){e.onResponse=function(e){ue(ae.RESPONSE,e)},e.offResponse=function(e){ce(ae.RESPONSE,e)}}(e),function(e){e.onNeedLogin=function(e){ue(ae.NEED_LOGIN,e)},e.offNeedLogin=function(e){ce(ae.NEED_LOGIN,e)},Vn&&(Y(cn).needLoginInit||(Y(cn).needLoginInit=!0,pe().then((function(){ir.call(e)})),zn&&ar.call(e)))}(e),function(e){e.onRefreshToken=function(e){ue(ae.REFRESH_TOKEN,e)},e.offRefreshToken=function(e){ce(ae.REFRESH_TOKEN,e)}}(e)}var sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ur=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/;function cr(){var e,t,n=_e().token||"",r=n.split(".");if(!n||3!==r.length)return{uid:null,role:[],permission:[],tokenExpired:0};try{e=JSON.parse((t=r[1],decodeURIComponent(Kn(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(n){throw new Error("\u83b7\u53d6\u5f53\u524d\u7528\u6237\u4fe1\u606f\u51fa\u9519\uff0c\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f\u4e3a\uff1a"+n.message)}return e.tokenExpired=1e3*e.exp,delete e.exp,delete e.iat,e}Kn="function"!=typeof atob?function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!ur.test(e))throw new Error("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,i="",a=0;a<e.length;)t=sr.indexOf(e.charAt(a++))<<18|sr.indexOf(e.charAt(a++))<<12|(n=sr.indexOf(e.charAt(a++)))<<6|(r=sr.indexOf(e.charAt(a++))),i+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i}:atob;var lr=S((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="chooseAndUploadFile:ok",i="chooseAndUploadFile:fail";function a(e,t){return e.tempFiles.forEach((function(e,n){e.name||(e.name=e.path.substring(e.path.lastIndexOf("/")+1)),t&&(e.fileType=t),e.cloudPath=Date.now()+"_"+n+e.name.substring(e.name.lastIndexOf("."))})),e.tempFilePaths||(e.tempFilePaths=e.tempFiles.map((function(e){return e.path}))),e}function o(e,t,r){var i=r.onChooseFile,a=r.onUploadProgress;return t.then((function(e){if(i){var t=i(e);if(void 0!==t)return Promise.resolve(t).then((function(t){return void 0===t?e:t}))}return e})).then((function(t){return!1===t?{errMsg:n,tempFilePaths:[],tempFiles:[]}:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3?arguments[3]:void 0;(t=Object.assign({},t)).errMsg=n;var a=t.tempFiles,o=a.length,s=0;return new Promise((function(n){for(;s<r;)u();function u(){var r=s++;if(r>=o)!a.find((function(e){return!e.url&&!e.errMsg}))&&n(t);else{var c=a[r];e.uploadFile({provider:c.provider,filePath:c.path,cloudPath:c.cloudPath,fileType:c.fileType,cloudPathAsRealPath:c.cloudPathAsRealPath,onUploadProgress:function(e){e.index=r,e.tempFile=c,e.tempFilePath=c.path,i&&i(e)}}).then((function(e){c.url=e.fileID,r<o&&u()})).catch((function(e){c.errMsg=e.errMsg||e.message,r<o&&u()}))}}}))}(e,t,5,a)}))}t.initChooseAndUploadFile=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"};return"image"===t.type?o(e,function(e){var t=e.count,n=e.sizeType,r=e.sourceType,o=void 0===r?["album","camera"]:r,s=e.extension;return new Promise((function(e,r){uni.chooseImage({count:t,sizeType:n,sourceType:o,extension:s,success:function(t){e(a(t,"image"))},fail:function(e){r({errMsg:e.errMsg.replace("chooseImage:fail",i)})}})}))}(t),t):"video"===t.type?o(e,function(e){var t=e.camera,n=e.compressed,r=e.maxDuration,o=e.sourceType,s=void 0===o?["album","camera"]:o,u=e.extension;return new Promise((function(e,o){uni.chooseVideo({camera:t,compressed:n,maxDuration:r,sourceType:s,extension:u,success:function(t){var n=t.tempFilePath,r=t.duration,i=t.size,o=t.height,s=t.width;e(a({errMsg:"chooseVideo:ok",tempFilePaths:[n],tempFiles:[{name:t.tempFile&&t.tempFile.name||"",path:n,size:i,type:t.tempFile&&t.tempFile.type||"",width:s,height:o,duration:r,fileType:"video",cloudPath:""}]},"video"))},fail:function(e){o({errMsg:e.errMsg.replace("chooseVideo:fail",i)})}})}))}(t),t):o(e,function(e){var t=e.count,n=e.extension;return new Promise((function(e,o){var s=uni.chooseFile;if("undefined"!=typeof r&&"function"==typeof r.chooseMessageFile&&(s=r.chooseMessageFile),"function"!=typeof s)return o({errMsg:i+" \u8bf7\u6307\u5b9a type \u7c7b\u578b\uff0c\u8be5\u5e73\u53f0\u4ec5\u652f\u6301\u9009\u62e9 image \u6216 video\u3002"});s({type:"all",count:t,extension:n,success:function(t){e(a(t))},fail:function(e){o({errMsg:e.errMsg.replace("chooseFile:fail",i)})}})}))}(t),t)}}})),fr=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(lr),dr={auto:"auto",onready:"onready",manual:"manual"};function pr(e){return{props:{localdata:{type:Array,default:function(){return[]}},options:{type:[Object,Array],default:function(){return{}}},spaceInfo:{type:Object,default:function(){return{}}},collection:{type:[String,Array],default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},gettreepath:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},groupby:{type:String,default:""},groupField:{type:String,default:""},distinct:{type:[Boolean,String],default:!1},foreignKey:{type:String,default:""},loadtime:{type:String,default:"auto"},manual:{type:Boolean,default:!1}},data:function(){return{mixinDatacomLoading:!1,mixinDatacomHasMore:!1,mixinDatacomResData:[],mixinDatacomErrorMessage:"",mixinDatacomPage:{},mixinDatacomError:null}},created:function(){var e=this;this.mixinDatacomPage={current:this.pageCurrent,size:this.pageSize,count:0},this.$watch((function(){var t=[];return["pageCurrent","pageSize","localdata","collection","action","field","orderby","where","getont","getcount","gettree","groupby","groupField","distinct"].forEach((function(n){t.push(e[n])})),t}),(function(t,n){if(e.loadtime!==dr.manual){for(var r=!1,i=[],a=2;a<t.length;a++)t[a]!==n[a]&&(i.push(t[a]),r=!0);t[0]!==n[0]&&(e.mixinDatacomPage.current=e.pageCurrent),e.mixinDatacomPage.size=e.pageSize,e.onMixinDatacomPropsChange(r,i)}}))},methods:{onMixinDatacomPropsChange:function(e,t){},mixinDatacomEasyGet:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getone,r=void 0!==n&&n,i=t.success,a=t.fail;this.mixinDatacomLoading||(this.mixinDatacomLoading=!0,this.mixinDatacomErrorMessage="",this.mixinDatacomError=null,this.mixinDatacomGet().then((function(t){e.mixinDatacomLoading=!1;var n=t.result,a=n.data,o=n.count;e.getcount&&(e.mixinDatacomPage.count=o),e.mixinDatacomHasMore=a.length<e.pageSize;var s=r?a.length?a[0]:void 0:a;e.mixinDatacomResData=s,i&&i(s)})).catch((function(t){e.mixinDatacomLoading=!1,e.mixinDatacomErrorMessage=t,e.mixinDatacomError=t,a&&a(t)})))},mixinDatacomGet:function(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=r||{},n="undefined"!=typeof __uniX&&__uniX?e.databaseForJQL(this.spaceInfo):e.database(this.spaceInfo);var i=r.action||this.action;i&&(n=n.action(i));var a=r.collection||this.collection;n=Array.isArray(a)?(t=n).collection.apply(t,(0,c.default)(a)):n.collection(a);var o=r.where||this.where;o&&Object.keys(o).length&&(n=n.where(o));var s=r.field||this.field;s&&(n=n.field(s));var u=r.foreignKey||this.foreignKey;u&&(n=n.foreignKey(u));var l=r.groupby||this.groupby;l&&(n=n.groupBy(l));var f=r.groupField||this.groupField;f&&(n=n.groupField(f)),!0===(void 0!==r.distinct?r.distinct:this.distinct)&&(n=n.distinct());var d=r.orderby||this.orderby;d&&(n=n.orderBy(d));var p=void 0!==r.pageCurrent?r.pageCurrent:this.mixinDatacomPage.current,h=void 0!==r.pageSize?r.pageSize:this.mixinDatacomPage.size,v=void 0!==r.getcount?r.getcount:this.getcount,m=void 0!==r.gettree?r.gettree:this.gettree,g=void 0!==r.gettreepath?r.gettreepath:this.gettreepath,y={getCount:v},_={limitLevel:void 0!==r.limitlevel?r.limitlevel:this.limitlevel,startWith:void 0!==r.startwith?r.startwith:this.startwith};return m&&(y.getTree=_),g&&(y.getTreePath=_),n=n.skip(h*(p-1)).limit(h).get(y),n}}}}function hr(e){return Y(ln.replace("{spaceId}",e.config.spaceId))}function vr(){return mr.apply(this,arguments)}function mr(){return mr=(0,l.default)(a.default.mark((function e(){var t,n,r,i,o,s,u,c=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.openid,r=t.callLoginByWeixin,i=void 0!==r&&r,o=hr(this),"mp-weixin"===J){e.next=4;break}throw new Error("[SecureNetwork] API `initSecureNetworkByWeixin` is not supported on platform `".concat(J,"`"));case 4:if(!n||!i){e.next=6;break}throw new Error("[SecureNetwork] openid and callLoginByWeixin cannot be passed at the same time");case 6:if(!n){e.next=8;break}return e.abrupt("return",(o.mpWeixinOpenid=n,{}));case 8:return e.next=10,new Promise((function(e,t){uni.login({success:function(t){e(t.code)},fail:function(e){t(new Error(e.errMsg))}})}));case 10:return s=e.sent,u=this.importObject("uni-id-co",{customUI:!0}),e.next=14,u.secureNetworkHandshakeByWeixin({code:s,callLoginByWeixin:i});case 14:return o.mpWeixinCode=s,e.abrupt("return",{code:s});case 16:case"end":return e.stop()}}),e,this)}))),mr.apply(this,arguments)}function gr(e){return yr.apply(this,arguments)}function yr(){return yr=(0,l.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=hr(this),e.abrupt("return",(n.initPromise||(n.initPromise=vr.call(this,t).then((function(e){return e})).catch((function(e){throw delete n.initPromise,e}))),n.initPromise));case 2:case"end":return e.stop()}}),e,this)}))),yr.apply(this,arguments)}function _r(e){!function(e){ke=e}(e)}function br(e){var t="mp-weixin"===J&&r.canIUse("getAppBaseInfo"),n={getAppBaseInfo:t?uni.getAppBaseInfo:uni.getSystemInfo,getPushClientId:uni.getPushClientId};return function(r){return new Promise((function(i,a){t&&"getAppBaseInfo"===e?i(n[e]()):n[e](k(k({},r),{},{success:function(e){i(e)},fail:function(e){a(e)}}))}))}}var wr=function(e){(0,d.default)(n,e);var t=x(n);function n(){var e;return(0,m.default)(this,n),e=t.call(this),e._uniPushMessageCallback=e._receivePushMessage.bind((0,o.default)(e)),e._currentMessageId=-1,e._payloadQueue=[],e}return(0,g.default)(n,[{key:"init",value:function(){var e=this;return Promise.all([br("getAppBaseInfo")(),br("getPushClientId")()]).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,s.default)(t,2),r=n[0];r=void 0===r?{}:r;var i=r.appId,a=n[1];a=void 0===a?{}:a;var o=a.cid;if(!i)throw new Error("Invalid appId, please check the manifest.json file");if(!o)throw new Error("Invalid push client id");e._appId=i,e._pushClientId=o,e._seqId=Date.now()+"-"+Math.floor(9e5*Math.random()+1e5),e.emit("open"),e._initMessageListener()}),(function(t){throw e.emit("error",t),e.close(),t}))}},{key:"open",value:function(){var e=(0,l.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.init());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_isUniCloudSSE",value:function(e){if("receive"!==e.type)return!1;var t=e&&e.data&&e.data.payload;return!(!t||"UNI_CLOUD_SSE"!==t.channel||t.seqId!==this._seqId)}},{key:"_receivePushMessage",value:function(e){if(this._isUniCloudSSE(e)){var t=e&&e.data&&e.data.payload,n=t.action,r=t.messageId,i=t.message;this._payloadQueue.push({action:n,messageId:r,message:i}),this._consumMessage()}}},{key:"_consumMessage",value:function(){for(var e=this;;){var t=this._payloadQueue.find((function(t){return t.messageId===e._currentMessageId+1}));if(!t)break;this._currentMessageId++,this._parseMessagePayload(t)}}},{key:"_parseMessagePayload",value:function(e){var t=e.action,n=e.messageId,r=e.message;"end"===t?this._end({messageId:n,message:r}):"message"===t&&this._appendMessage({messageId:n,message:r})}},{key:"_appendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.messageId,e.message);this.emit("message",t)}},{key:"_end",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.messageId,e.message);this.emit("end",t),this.close()}},{key:"_initMessageListener",value:function(){uni.onPushMessage(this._uniPushMessageCallback)}},{key:"_destroy",value:function(){uni.offPushMessage(this._uniPushMessageCallback)}},{key:"toJSON",value:function(){return{appId:this._appId,pushClientId:this._pushClientId,seqId:this._seqId}}},{key:"close",value:function(){this._destroy(),this.emit("close")}}]),n}(H);var kr={tcb:Nt,tencent:Nt,aliyun:Ie,private:Vt,dcloud:Vt,alipay:tn},xr=new(function(){function e(){(0,m.default)(this,e)}return(0,g.default)(e,[{key:"init",value:function(e){var t={},n=kr[e.provider];if(!n)throw new Error("\u672a\u63d0\u4f9b\u6b63\u786e\u7684provider\u53c2\u6570");return t=n.init(e),function(e){e._initPromiseHub||(e._initPromiseHub=new B({createPromise:function(){var t=Promise.resolve();t=new Promise((function(e){setTimeout((function(){e()}),1)}));var n=e.auth();return t.then((function(){return n.getLoginState()})).then((function(e){return e?Promise.resolve():n.signInAnonymously()}))}}))}(t),_n(t),function(e){var t=e.uploadFile;e.uploadFile=function(e){return t.call(this,e)}}(t),function(e){e.database=function(t){if(t&&Object.keys(t).length>0)return e.init(t).database();if(this._database)return this._database;var n=En(Dn,{uniClient:e});return this._database=n,n},e.databaseForJQL=function(t){if(t&&Object.keys(t).length>0)return e.init(t).databaseForJQL();if(this._databaseForJQL)return this._databaseForJQL;var n=En(Dn,{uniClient:e,isJQL:!0});return this._databaseForJQL=n,n}}(t),function(e){e.getCurrentUserInfo=cr,e.chooseAndUploadFile=fr.initChooseAndUploadFile(e),Object.assign(e,{get mixinDatacom(){return pr(e)}}),e.SSEChannel=wr,e.initSecureNetworkByWeixin=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.openid,r=t.callLoginByWeixin,i=void 0!==r&&r;return gr.call(e,{openid:n,callLoginByWeixin:i})}}(e),e.setCustomClientInfo=_r,e.importObject=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.customUI=t.customUI||e.customUI,e.parseSystemError=t.parseSystemError||e.parseSystemError,Object.assign(e.loadingOptions,t.loadingOptions),Object.assign(e.errorOptions,t.errorOptions),"object"==(0,u.default)(t.secretMethods)&&(e.secretMethods=t.secretMethods),e}({customUI:!1,loadingOptions:{title:"\u52a0\u8f7d\u4e2d...",mask:!0},errorOptions:{type:"modal",retry:!1}},n);var r=n,i=r.customUI,o=r.loadingOptions,s=r.errorOptions,c=r.parseSystemError,f=!i;return new Proxy({},{get:function(r,i){switch(i){case"toString":return"[object UniCloudObject]";case"toJSON":return{}}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fn,n=e.interceptorName,r=e.getCallbackArgs;return(0,l.default)(a.default.mark((function e(){var i,o,s,u,c,l,f=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i=f.length,o=new Array(i),s=0;s<i;s++)o[s]=f[s];return u=r?r({params:o}):{},e.prev=2,e.next=5,te(ne(n,"invoke"),k({},u));case 5:return e.next=7,t.apply(void 0,o);case 7:return c=e.sent,e.next=10,te(ne(n,"success"),k(k({},u),{},{result:c}));case 10:return e.abrupt("return",c);case 13:return e.prev=13,e.t0=e["catch"](2),l=e.t0,e.next=18,te(ne(n,"fail"),k(k({},u),{},{error:l}));case 18:throw l;case 19:return e.prev=19,e.next=22,te(ne(n,"complete"),k(k({},u),{},l?{error:l}:{result:c}));case 22:return e.finish(19);case 23:case"end":return e.stop()}}),e,null,[[2,13,19,23]])})))}({fn:function(){var r=(0,l.default)(a.default.mark((function r(){var p,h,v,m,g,y,_,b,w,x,S,T,O,I,P,A=arguments;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(f&&uni.showLoading({title:o.title,mask:o.mask}),h=A.length,v=new Array(h),m=0;m<h;m++)v[m]=A[m];return g={name:t,type:D.OBJECT,data:{method:i,params:v}},"object"==(0,u.default)(n.secretMethods)&&function(e,t){var n=t.data.method,r=e.secretMethods||{},i=r[n]||r["*"];i&&(t.secretType=i)}(n,g),y=!1,r.prev=5,r.next=8,e.callFunction(g);case 8:p=r.sent,r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](5),y=!0,p={result:new ve(r.t0)};case 14:if(_=p.result||{},b=_.errSubject,w=_.errCode,x=_.errMsg,S=_.newToken,f&&uni.hideLoading(),S&&S.token&&S.tokenExpired&&(be(S),le(ae.REFRESH_TOKEN,k({},S))),!w){r.next=39;break}if(T=x,!y||!c){r.next=24;break}return r.next=20,c({objectName:t,methodName:i,params:v,errSubject:b,errCode:w,errMsg:x});case 20:if(r.t1=r.sent.errMsg,r.t1){r.next=23;break}r.t1=x;case 23:T=r.t1;case 24:if(!f){r.next=37;break}if("toast"!==s.type){r.next=29;break}uni.showToast({title:T,icon:"none"}),r.next=37;break;case 29:if("modal"===s.type){r.next=31;break}throw new Error("Invalid errorOptions.type: ".concat(s.type));case 31:return r.next=33,(0,l.default)(a.default.mark((function e(){var t,n,r,i,o,s,u=arguments;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.title,r=t.content,i=t.showCancel,o=t.cancelText,s=t.confirmText,e.abrupt("return",new Promise((function(e,t){uni.showModal({title:n,content:r,showCancel:i,cancelText:o,confirmText:s,success:function(t){e(t)},fail:function(){e({confirm:!1,cancel:!0})}})})));case 2:case"end":return e.stop()}}),e)})))({title:"\u63d0\u793a",content:T,showCancel:s.retry,cancelText:"\u53d6\u6d88",confirmText:s.retry?"\u91cd\u8bd5":"\u786e\u5b9a"});case 33:if(O=r.sent,I=O.confirm,!s.retry||!I){r.next=37;break}return r.abrupt("return",d.apply(void 0,v));case 37:throw P=new ve({subject:b,code:w,message:x,requestId:p.requestId}),P.detail=p.result,le(ae.RESPONSE,{type:oe.CLOUD_OBJECT,content:P}),P;case 39:return r.abrupt("return",(le(ae.RESPONSE,{type:oe.CLOUD_OBJECT,content:p.result}),p.result));case 40:case"end":return r.stop()}}),r,null,[[5,11]])})));function d(){return r.apply(this,arguments)}return d}(),interceptorName:"callObject",getCallbackArgs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.params;return{objectName:t,methodName:i,params:n}}})}})}}(e)}(t),["callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile","chooseAndUploadFile"].forEach((function(e){if(t[e]){var n=t[e];t[e]=function(){return n.apply(t,Array.from(arguments))},t[e]=function(e,t){return function(n){var r=this,i=!1;if("callFunction"===t){var a=n&&n.type||D.DEFAULT;i=a!==D.DEFAULT}var o="callFunction"===t&&!i,s=this._initPromiseHub.exec();n=n||{};var u=he(n),c=u.success,l=u.fail,f=u.complete,d=s.then((function(){return i?Promise.resolve():te(ne(t,"invoke"),n)})).then((function(){return e.call(r,n)})).then((function(e){return i?Promise.resolve(e):te(ne(t,"success"),e).then((function(){return te(ne(t,"complete"),e)})).then((function(){return o&&le(ae.RESPONSE,{type:oe.CLOUD_FUNCTION,content:e}),Promise.resolve(e)}))}),(function(e){return i?Promise.reject(e):te(ne(t,"fail"),e).then((function(){return te(ne(t,"complete"),e)})).then((function(){return le(ae.RESPONSE,{type:oe.CLOUD_FUNCTION,content:e}),Promise.reject(e)}))}));if(!(c||l||f))return d;d.then((function(e){c&&c(e),f&&f(e),o&&le(ae.RESPONSE,{type:oe.CLOUD_FUNCTION,content:e})}),(function(e){l&&l(e),f&&f(e),o&&le(ae.RESPONSE,{type:oe.CLOUD_FUNCTION,content:e})}))}}(t[e],e).bind(t)}})),t.init=this.init,t}}]),e}());t.uniCloud=xr,function(){var e=W,n={};if(e&&1===e.length)n=e[0],t.uniCloud=xr=xr.init(n),xr._isDefault=!0;else{var r,i=["database","getCurrentUserInfo","importObject"];r=e&&e.length>0?"\u5e94\u7528\u6709\u591a\u4e2a\u670d\u52a1\u7a7a\u95f4\uff0c\u8bf7\u901a\u8fc7uniCloud.init\u65b9\u6cd5\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u670d\u52a1\u7a7a\u95f4":"\u5e94\u7528\u672a\u5173\u8054\u670d\u52a1\u7a7a\u95f4\uff0c\u8bf7\u5728uniCloud\u76ee\u5f55\u53f3\u952e\u5173\u8054\u670d\u52a1\u7a7a\u95f4",[].concat(["auth","callFunction","uploadFile","deleteFile","getTempFileURL","downloadFile"],i).forEach((function(e){xr[e]=function(){if(console.error(r),-1===i.indexOf(e))return Promise.reject(new ve({code:"SYS_ERR",message:r}));console.error(r)}}))}if(Object.assign(xr,{get mixinDatacom(){return pr(xr)}}),or(xr),xr.addInterceptor=Z,xr.removeInterceptor=ee,xr.interceptObject=re,"app"===J&&(uni.__uniCloud=xr),"app"===J||"web"===J){var a=function(){return G||(G=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;function e(){return this}return void 0!==e()?e():new Function("return this")()}(),G)}();a.uniCloud=xr,a.UniCloudError=ve}}();var Sr=xr;t.default=Sr}).call(this,n("0ee4"),n("ed83")["default"])},"88b6":function(e){e.exports=JSON.parse('{"id":"hello-uniapp","name":"hello-uniapp","displayName":"hello-uniapp \u793a\u4f8b\u5de5\u7a0b","version":"3.4.9","description":"uni-app \u6846\u67b6\u793a\u4f8b\uff0c\u4e00\u5957\u4ee3\u7801\uff0c\u540c\u65f6\u53d1\u884c\u5230iOS\u3001Android\u3001H5\u3001\u5c0f\u7a0b\u5e8f\u7b49\u591a\u4e2a\u5e73\u53f0\uff0c\u8bf7\u4f7f\u7528\u624b\u673a\u626b\u7801\u5feb\u901f\u4f53\u9a8c uni-app \u7684\u5f3a\u5927\u529f\u80fd","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"repository":"https://github.com/dcloudio/hello-uniapp.git","keywords":["hello-uniapp","uni-app","uni-ui","\u793a\u4f8b\u5de5\u7a0b"],"author":"","license":"MIT","bugs":{"url":"https://github.com/dcloudio/hello-uniapp/issues"},"homepage":"https://github.com/dcloudio/hello-uniapp#readme","dependencies":{},"dcloudext":{"sale":{"regular":{"price":"0.00"},"sourcecode":{"price":"0.00"}},"contact":{"qq":""},"declaration":{"ads":"\u65e0","data":"\u65e0","permissions":"\u65e0"},"npmurl":"","type":"uniapp-template-project","darkmode":"x","i18n":"x","widescreen":"x"},"uni_modules":{"dependencies":[],"encrypt":[],"platforms":{"cloud":{"tcb":"\u221a","aliyun":"\u221a","alipay":"x"},"client":{"uni-app":{"vue":{"vue2":"\u221a","vue3":"\u221a"},"web":{"safari":"\u221a","chrome":"\u221a"},"app":{"vue":"\u221a","nvue":"\u221a","android":"\u221a","ios":"\u221a","harmony":"\u221a"},"mp":{"weixin":"\u221a","alipay":"\u221a","toutiao":"\u221a","baidu":"\u221a","kuaishou":"\u221a","jd":"\u221a","harmony":"\u221a","qq":"\u221a","lark":"\u221a"},"quickapp":{"huawei":"-","union":"-"}},"uni-app-x":{"web":{"safari":"-","chrome":"-"},"app":{"android":"-","ios":"-","harmony":"-"},"mp":{"weixin":"-"}}}}},"uni-app":{"scripts":{"mp-dingtalk":{"title":"\u9489\u9489\u5c0f\u7a0b\u5e8f","env":{"UNI_PLATFORM":"mp-alipay"},"define":{"MP-DINGTALK":true}},"hello-uniapp-demo":{"title":"hello-uniapp \u6f14\u793a\u7f51\u7ad9","env":{"UNI_PLATFORM":"h5"},"define":{"H5-DEMO":true}}}},"engines":{"HBuilderX":"^3.1.0","uni-app":"^4.03","uni-app-x":""}}')},"8bd1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={pages:[{path:"pages/index/index",style:{navigationBarTitleText:"\u8bb0\u8d26\u9996\u9875"}},{path:"pages/members/members",style:{navigationBarTitleText:"\u6210\u5458\u7ba1\u7406"}},{path:"pages/stats/stats",style:{navigationBarTitleText:"\u8d26\u5355\u7edf\u8ba1"}}],globalStyle:{navigationBarTitleText:"\u8bb0\u8d26\u5e94\u7528",navigationBarTextStyle:"white",navigationBarBackgroundColor:"#007AFF",backgroundColor:"#F8F8F8"}}},"8dce":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",[n("view",{staticClass:e._$s(1,"sc","container"),attrs:{_i:1}},[n("view",[n("button",{attrs:{_i:3},on:{click:e.goToMembers}}),n("button",{attrs:{_i:4},on:{click:e.refreshData}}),n("button",{attrs:{_i:5},on:{click:e.checkSystem}}),n("button",{attrs:{_i:6},on:{click:e.simpleInit}})]),n("view",{staticClass:e._$s(7,"sc","stats-card"),attrs:{_i:7}},[n("view",{staticClass:e._$s(8,"sc","stats-item"),attrs:{_i:8}},[n("text",{staticClass:e._$s(9,"sc","stats-label"),attrs:{_i:9}}),n("text",{staticClass:e._$s(10,"sc","stats-value"),attrs:{_i:10}},[e._v(e._$s(10,"t0-0",e._s(e.cardTotal)))]),n("text",{staticClass:e._$s(11,"sc","stats-percent"),attrs:{_i:11}},[e._v(e._$s(11,"t0-0",e._s(e.cardPercent)))])]),n("view",{staticClass:e._$s(12,"sc","stats-item"),attrs:{_i:12}},[n("text",{staticClass:e._$s(13,"sc","stats-label"),attrs:{_i:13}}),n("text",{staticClass:e._$s(14,"sc","stats-value"),attrs:{_i:14}},[e._v(e._$s(14,"t0-0",e._s(e.cashTotal)))]),n("text",{staticClass:e._$s(15,"sc","stats-percent"),attrs:{_i:15}},[e._v(e._$s(15,"t0-0",e._s(e.cashPercent)))])]),n("view",{staticClass:e._$s(16,"sc","stats-item"),attrs:{_i:16}},[n("text",{staticClass:e._$s(17,"sc","stats-label"),attrs:{_i:17}}),n("text",{staticClass:e._$s(18,"sc","stats-value"),attrs:{_i:18}},[e._v(e._$s(18,"t0-0",e._s(e.monthTotal)))])]),n("view",{staticClass:e._$s(19,"sc","stats-item"),attrs:{_i:19}},[n("text",{staticClass:e._$s(20,"sc","stats-label"),attrs:{_i:20}}),n("text",{staticClass:e._$s(21,"sc","stats-value"),attrs:{_i:21}},[e._v(e._$s(21,"t0-0",e._s(e.monthCardTotal)))]),n("text",{staticClass:e._$s(22,"sc","stats-percent"),attrs:{_i:22}},[e._v(e._$s(22,"t0-0",e._s(e.monthCardPercent)))])]),n("view",{staticClass:e._$s(23,"sc","stats-item"),attrs:{_i:23}},[n("text",{staticClass:e._$s(24,"sc","stats-label"),attrs:{_i:24}}),n("text",{staticClass:e._$s(25,"sc","stats-value"),attrs:{_i:25}},[e._v(e._$s(25,"t0-0",e._s(e.monthCashTotal)))]),n("text",{staticClass:e._$s(26,"sc","stats-percent"),attrs:{_i:26}},[e._v(e._$s(26,"t0-0",e._s(e.monthCashPercent)))])])]),n("view",{staticClass:e._$s(27,"sc","voice-section"),attrs:{_i:27}},[n("button",{staticClass:e._$s(28,"sc","voice-btn"),attrs:{_i:28},on:{click:e.startVoice}},[n("text",{staticClass:e._$s(29,"sc","voice-icon"),attrs:{_i:29}}),n("text")]),e._$s(31,"i",e.voiceText)?n("view",{staticClass:e._$s(31,"sc","voice-result"),attrs:{_i:31}},[n("text",[e._v(e._$s(32,"t0-0",e._s(e.voiceText)))])]):e._e()]),e._$s(33,"i",e.showForm)?n("view",{staticClass:e._$s(33,"sc","quick-form"),attrs:{_i:33}},[n("view",{staticClass:e._$s(34,"sc","form-item"),attrs:{_i:34}},[n("text"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.date,expression:"form.date"}],attrs:{_i:36},domProps:{value:e._$s(36,"v-model",e.form.date)},on:{input:function(t){t.target.composing||e.$set(e.form,"date",t.target.value)}}})]),n("view",{staticClass:e._$s(37,"sc","form-item"),attrs:{_i:37}},[n("text"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.category,expression:"form.category"}],attrs:{_i:39},domProps:{value:e._$s(39,"v-model",e.form.category)},on:{input:function(t){t.target.composing||e.$set(e.form,"category",t.target.value)}}})]),n("view",{staticClass:e._$s(40,"sc","form-item"),attrs:{_i:40}},[n("text"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.amount,expression:"form.amount"}],attrs:{_i:42},domProps:{value:e._$s(42,"v-model",e.form.amount)},on:{input:function(t){t.target.composing||e.$set(e.form,"amount",t.target.value)}}})]),n("view",{staticClass:e._$s(43,"sc","form-item"),attrs:{_i:43}},[n("text"),n("picker",{attrs:{range:e._$s(45,"a-range",e.payTypes),value:e._$s(45,"a-value",e.payTypeIndex),_i:45},on:{change:e.onPayTypeChange}},[n("view",{staticClass:e._$s(46,"sc","picker-value"),attrs:{_i:46}},[e._v(e._$s(46,"t0-0",e._s(e.form.payType||"\u8bf7\u9009\u62e9\u65b9\u5f0f")))])])]),n("view",{staticClass:e._$s(47,"sc","form-item"),attrs:{_i:47}},[n("text"),n("picker",{attrs:{range:e._$s(49,"a-range",e.memberNames),value:e._$s(49,"a-value",e.memberIndex),_i:49},on:{change:e.onMemberChange}},[n("view",{staticClass:e._$s(50,"sc","picker-value"),attrs:{_i:50}},[e._v(e._$s(50,"t0-0",e._s(e.getMemberName(e.form.memberId)||"\u8bf7\u9009\u62e9\u6210\u5458")))])])]),n("view",{staticClass:e._$s(51,"sc","form-item"),attrs:{_i:51}},[n("text"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.location,expression:"form.location"}],attrs:{_i:53},domProps:{value:e._$s(53,"v-model",e.form.location)},on:{input:function(t){t.target.composing||e.$set(e.form,"location",t.target.value)}}})]),n("button",{attrs:{_i:54},on:{click:e.submitBill}})]):e._e(),n("view",{staticClass:e._$s(55,"sc","bill-list"),attrs:{_i:55}},[n("view",{staticClass:e._$s(56,"sc","list-header"),attrs:{_i:56}},[n("text")]),e._$s(58,"i",0===e.bills.length)?n("view",{staticClass:e._$s(58,"sc","empty-state"),attrs:{_i:58}},[n("text")]):n("view",{attrs:{_i:60}},e._l(e._$s(61,"f",{forItems:e.bills}),(function(t,r,i,a){return n("view",{key:e._$s(61,"f",{forIndex:i,key:t._id}),staticClass:e._$s("61-"+a,"sc","bill-item"),attrs:{_i:"61-"+a}},[n("text",[e._v(e._$s("62-"+a,"t0-0",e._s(e.formatDate(t.date)))+e._$s("62-"+a,"t0-1",e._s(t.category))+e._$s("62-"+a,"t0-2",e._s(t.amount))+e._$s("62-"+a,"t0-3",e._s(t.payType))+e._$s("62-"+a,"t0-4",e._s(e.getMemberName(t.memberId)))),e._$s("63-"+a,"i",t.location)?n("span",{attrs:{_i:"63-"+a}},[e._v(e._$s("63-"+a,"t0-0",e._s(t.location)))]):e._e()]),n("button",{attrs:{_i:"64-"+a},on:{click:function(n){return e.onEditBill(t)}}}),n("button",{attrs:{_i:"65-"+a},on:{click:function(n){return e.onDeleteBill(t._id)}}})])})),0)])])])},i=[]},"8e80":function(e,t,n){"use strict";n.r(t);var r=n("3683"),i=n("e026");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var o=n("828b"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=s.exports},"8f59":function(e,t,n){"use strict";(function(t){var n="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},r=n.__VUE_DEVTOOLS_GLOBAL_HOOK__;function i(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var n=function(e,t){return e.filter(t)[0]}(t,(function(t){return t.original===e}));if(n)return n.copy;var r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((function(n){r[n]=i(e[n],t)})),r}function a(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function o(e){return null!==e&&"object"===typeof e}var s=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},u={namespaced:{configurable:!0}};u.namespaced.get=function(){return!!this._rawModule.namespaced},s.prototype.addChild=function(e,t){this._children[e]=t},s.prototype.removeChild=function(e){delete this._children[e]},s.prototype.getChild=function(e){return this._children[e]},s.prototype.hasChild=function(e){return e in this._children},s.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},s.prototype.forEachChild=function(e){a(this._children,e)},s.prototype.forEachGetter=function(e){this._rawModule.getters&&a(this._rawModule.getters,e)},s.prototype.forEachAction=function(e){this._rawModule.actions&&a(this._rawModule.actions,e)},s.prototype.forEachMutation=function(e){this._rawModule.mutations&&a(this._rawModule.mutations,e)},Object.defineProperties(s.prototype,u);var c=function(e){this.register([],e,!1)};c.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},c.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},c.prototype.update=function(e){(function e(t,n,r){0;if(n.update(r),r.modules)for(var i in r.modules){if(!n.getChild(i))return void 0;e(t.concat(i),n.getChild(i),r.modules[i])}})([],this.root,e)},c.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new s(t,n);if(0===e.length)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}t.modules&&a(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},c.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},c.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var l;var f=function(e){var t=this;void 0===e&&(e={}),!l&&"undefined"!==typeof window&&window.Vue&&_(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new c(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new l,this._makeLocalGettersCache=Object.create(null);var a=this,o=this.dispatch,s=this.commit;this.dispatch=function(e,t){return o.call(a,e,t)},this.commit=function(e,t,n){return s.call(a,e,t,n)},this.strict=i;var u=this._modules.root.state;m(this,u,[],this._modules.root),v(this,u),n.forEach((function(e){return e(t)}));var f=void 0!==e.devtools?e.devtools:l.config.devtools;f&&function(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){r.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},d={state:{configurable:!0}};function p(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function h(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;m(e,n,[],e._modules.root,!0),v(e,n,t)}function v(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,o={};a(i,(function(t,n){o[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var s=l.config.silent;l.config.silent=!0,e._vm=new l({data:{$$state:t},computed:o}),l.config.silent=s,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),l.nextTick((function(){return r.$destroy()})))}function m(e,t,n,r,i){var a=!n.length,o=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=r),!a&&!i){var s=g(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit((function(){l.set(s,u,r.state)}))}var c=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var a=y(n,r,i),o=a.payload,s=a.options,u=a.type;return s&&s.root||(u=t+u),e.dispatch(u,o)},commit:r?e.commit:function(n,r,i){var a=y(n,r,i),o=a.payload,s=a.options,u=a.type;s&&s.root||(u=t+u),e.commit(u,o,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var a=i.slice(r);Object.defineProperty(n,a,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return g(e.state,n)}}}),i}(e,o,n);r.forEachMutation((function(t,n){var r=o+n;(function(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push((function(t){n.call(e,r.state,t)}))})(e,r,t,c)})),r.forEachAction((function(t,n){var r=t.root?n:o+n,i=t.handler||t;(function(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push((function(t){var i=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return function(e){return e&&"function"===typeof e.then}(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):i}))})(e,r,i,c)})),r.forEachGetter((function(t,n){var r=o+n;(function(e,t,n,r){if(e._wrappedGetters[t])return void 0;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}})(e,r,t,c)})),r.forEachChild((function(r,a){m(e,t,n.concat(a),r,i)}))}function g(e,t){return t.reduce((function(e,t){return e[t]}),e)}function y(e,t,n){return o(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function _(e){l&&e===l||(l=e,
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:r});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[r].concat(e.init):r,n.call(this,e)}}function r(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(l))}d.state.get=function(){return this._vm._data.$$state},d.state.set=function(e){0},f.prototype.commit=function(e,t,n){var r=this,i=y(e,t,n),a=i.type,o=i.payload,s=(i.options,{type:a,payload:o}),u=this._mutations[a];u&&(this._withCommit((function(){u.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(s,r.state)})))},f.prototype.dispatch=function(e,t){var n=this,r=y(e,t),i=r.type,a=r.payload,o={type:i,payload:a},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,n.state)}))}catch(c){0}var u=s.length>1?Promise.all(s.map((function(e){return e(a)}))):s[0](a);return new Promise((function(e,t){u.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,n.state)}))}catch(c){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,n.state,e)}))}catch(c){0}t(e)}))}))}},f.prototype.subscribe=function(e,t){return p(e,this._subscribers,t)},f.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return p(n,this._actionSubscribers,t)},f.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},f.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},f.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),m(this,this.state,e,this._modules.get(e),n.preserveState),v(this,this.state)},f.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=g(t.state,e.slice(0,-1));l.delete(n,e[e.length-1])})),h(this)},f.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},f.prototype[[104,111,116,85,112,100,97,116,101].map((function(e){return String.fromCharCode(e)})).join("")]=function(e){this._modules.update(e),h(this,!0)},f.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(f.prototype,d);var b=T((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=O(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),w=T((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.commit;if(e){var a=O(this.$store,"mapMutations",e);if(!a)return;r=a.context.commit}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),k=T((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||O(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),x=T((function(e,t){var n={};return S(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var a=O(this.$store,"mapActions",e);if(!a)return;r=a.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n}));function S(e){return function(e){return Array.isArray(e)||o(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function T(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function O(e,t,n){var r=e._modulesNamespaceMap[n];return r}function I(e,t,n){var r=n?e.groupCollapsed:e.group;try{r.call(e,t)}catch(i){e.log(t)}}function P(e){try{e.groupEnd()}catch(t){e.log("\u2014\u2014 log end \u2014\u2014")}}function A(){var e=new Date;return" @ "+C(e.getHours(),2)+":"+C(e.getMinutes(),2)+":"+C(e.getSeconds(),2)+"."+C(e.getMilliseconds(),3)}function C(e,t){return function(e,t){return new Array(t+1).join(e)}("0",t-e.toString().length)+e}var E={Store:f,install:_,version:"3.6.2",mapState:b,mapMutations:w,mapGetters:k,mapActions:x,createNamespacedHelpers:function(e){return{mapState:b.bind(null,e),mapGetters:k.bind(null,e),mapMutations:w.bind(null,e),mapActions:x.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var r=e.transformer;void 0===r&&(r=function(e){return e});var a=e.mutationTransformer;void 0===a&&(a=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var u=e.logMutations;void 0===u&&(u=!0);var c=e.logActions;void 0===c&&(c=!0);var l=e.logger;return void 0===l&&(l=console),function(e){var f=i(e.state);"undefined"!==typeof l&&(u&&e.subscribe((function(e,o){var s=i(o);if(n(e,f,s)){var u=A(),c=a(e),d="mutation "+e.type+u;I(l,d,t),l.log("%c prev state","color: #9E9E9E; font-weight: bold",r(f)),l.log("%c mutation","color: #03A9F4; font-weight: bold",c),l.log("%c next state","color: #4CAF50; font-weight: bold",r(s)),P(l)}f=s})),c&&e.subscribeAction((function(e,n){if(o(e,n)){var r=A(),i=s(e),a="action "+e.type+r;I(l,a,t),l.log("%c action","color: #03A9F4; font-weight: bold",i),P(l)}})))}}};e.exports=E}).call(this,n("0ee4"))},"8ffa":function(e,t,n){var r=n("7647");e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports["default"]=e.exports},9008:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},"931d":function(e,t,n){var r=n("7647"),i=n("011a");e.exports=function(e,t,n){if(i())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var o=new(e.bind.apply(e,a));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports["default"]=e.exports},"951c":function(e,t){e.exports=Vue},"9cf7":function(e,t,n){"use strict";n.r(t);var r=n("3f62"),i=n("d7e1");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var o=n("828b"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"4c5f76c7",null,!1,r["a"],void 0);t["default"]=s.exports},"9fc1":function(e,t,n){var r=n("3b2d")["default"];function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return n},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t,n={},a=Object.prototype,o=a.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",f=u.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new D(r||[]);return s(a,"_invoke",{value:P(e,n,o)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var v="suspendedStart",m="executing",g="completed",y={};function _(){}function b(){}function w(){}var k={};d(k,c,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(L([])));S&&S!==a&&o.call(S,c)&&(k=S);var T=w.prototype=_.prototype=Object.create(k);function O(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;s(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function P(e,n,r){var i=v;return function(a,o){if(i===m)throw Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var c=h(e,n,r);if("normal"===c.type){if(i=r.done?g:"suspendedYield",c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator["return"]&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=h(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return b.prototype=w,s(T,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,f,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,f,"GeneratorFunction")),e.prototype=Object.create(T),e},n.awrap=function(e){return{__await:e}},O(I.prototype),d(I.prototype,l,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,r,i,a){void 0===a&&(a=Promise);var o=new I(p(e,t,r,i),a);return n.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(T),d(T,f,"Generator"),d(T,c,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},a708:function(e,t,n){var r=n("6454");e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},aa45:function(e,t,n){"use strict";n.r(t);var r=n("8dce"),i=n("f33e");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);var o=n("828b"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);t["default"]=s.exports},ae25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={pages:{},globalStyle:{}}},af34:function(e,t,n){var r=n("a708"),i=n("b893"),a=n("6382"),o=n("9008");e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports["default"]=e.exports},b4d2:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},b893:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},bb14:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("127e")),a=r(n("ee10")),o=r(n("951c")),s=r(n("8f59"));o.default.use(s.default);var u=new s.default.Store({state:{hasLogin:!1,isUniverifyLogin:!1,loginProvider:"",openid:null,testvuex:!1,colorIndex:0,colorList:["#FF0000","#00FF00","#0000FF"],noMatchLeftWindow:!0,active:"componentPage",leftWinActive:"/pages/component/view/view",activeOpen:"",menu:[],univerifyErrorMsg:"",username:"foo",sex:"\u7537",age:10},mutations:{login:function(e,t){e.hasLogin=!0,e.loginProvider=t},logout:function(e){e.hasLogin=!1,e.openid=null},setOpenid:function(e,t){e.openid=t},setTestTrue:function(e){e.testvuex=!0},setTestFalse:function(e){e.testvuex=!1},setColorIndex:function(e,t){e.colorIndex=t},setMatchLeftWindow:function(e,t){e.noMatchLeftWindow=!t},setActive:function(e,t){e.active=t},setLeftWinActive:function(e,t){e.leftWinActive=t},setActiveOpen:function(e,t){e.activeOpen=t},setMenu:function(e,t){e.menu=t},setUniverifyLogin:function(e,t){"boolean"!==typeof t&&(t=!!t),e.isUniverifyLogin=t},setUniverifyErrorMsg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.univerifyErrorMsg=t},increment:function(e){e.age++},incrementTen:function(e,t){e.age+=t.amount},resetAge:function(e){e.age=10}},getters:{currentColor:function(e){return e.colorList[e.colorIndex]},doubleAge:function(e){return 2*e.age}},actions:{incrementAsync:function(e,t){e.commit("incrementTen",t)},getUserOpenId:function(){var t=(0,a.default)(i.default.mark((function t(n){var r,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.commit,a=n.state,t.next=3,new Promise((function(t,n){a.openid?t(a.openid):uni.login({success:function(n){r("login"),setTimeout((function(){e("log","uni.request mock openid[123456789]"," at store/index.js:113"),r("setOpenid","123456789"),t("123456789")}),1e3)},fail:function(t){e("log","uni.login \u63a5\u53e3\u8c03\u7528\u5931\u8d25\uff0c\u5c06\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u5f00\u653e\u63a5\u53e3\u7b49\u670d\u52a1",t," at store/index.js:119"),n(t)}})}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getPhoneNumber:function(e,t){e.commit;return new Promise((function(e,n){uni.request({url:"https://97fca9f2-41f6-449f-a35e-3f135d4c3875.bspapp.com/http/univerify-login",method:"POST",data:t,success:function(t){var r=t.data;r.success?e(r.phoneNumber):n(t)},fail:function(e){n(res)}})}))}}}),c=u;t.default=c}).call(this,n("f3b9")["default"])},d551:function(e,t,n){var r=n("3b2d")["default"],i=n("e6db");e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports["default"]=e.exports},d7e1:function(e,t,n){"use strict";n.r(t);var r=n("6197"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},dd3e:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports["default"]=e.exports},e026:function(e,t,n){"use strict";n.r(t);var r=n("4230"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},e6db:function(e,t,n){var r=n("3b2d")["default"];e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports},ec21:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("af34")),a=r(n("3b2d")),o=r(n("7ca3")),s=n("51eb");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:function(){return"fade"}},duration:{type:Number,default:300},styles:{type:Object,default:function(){return{}}},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:function(){return{isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}},watch:{show:{handler:function(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject:function(){var e=c(c({},this.styles),{},{"transition-duration":this.duration/1e3+"s"}),t="";for(var n in e){var r=this.toLine(n);t+=r+":"+e[n]+";"}return t},transformStyles:function(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created:function(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.duration&&(this.durationTime=e.duration),this.animation=(0,s.createAnimation)(Object.assign(this.config,e),this)},onClick:function(){this.$emit("click",{detail:this.isShow})},step:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.animation){for(var r in t)try{var o;if("object"===(0,a.default)(t[r]))(o=this.animation)[r].apply(o,(0,i.default)(t[r]));else this.animation[r](t[r])}catch(s){e("error","\u65b9\u6cd5 ".concat(r," \u4e0d\u5b58\u5728")," at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:148")}return this.animation.step(n),this}},run:function(e){this.animation&&this.animation.run(e)},open:function(){var e=this;clearTimeout(this.timer),this.transform="",this.isShow=!0;var t=this.styleInit(!1),n=t.opacity,r=t.transform;"undefined"!==typeof n&&(this.opacity=n),this.transform=r,this.$nextTick((function(){e.timer=setTimeout((function(){e.animation=(0,s.createAnimation)(e.config,e),e.tranfromInit(!1).step(),e.animation.run(),e.$emit("change",{detail:e.isShow})}),20)}))},close:function(e){var t=this;this.animation&&this.tranfromInit(!0).step().run((function(){t.isShow=!1,t.animationData=null,t.animation=null;var e=t.styleInit(!1),n=e.opacity,r=e.transform;t.opacity=n||1,t.transform=r,t.$emit("change",{detail:t.isShow})}))},styleInit:function(e){var t=this,n={transform:""},r=function(e,r){"fade"===r?n.opacity=t.animationType(e)[r]:n.transform+=t.animationType(e)[r]+" "};return"string"===typeof this.modeClass?r(e,this.modeClass):this.modeClass.forEach((function(t){r(e,t)})),n},tranfromInit:function(e){var t=this,n=function(e,n){var r=null;"fade"===n?r=e?0:1:(r=e?"-100%":"0","zoom-in"===n&&(r=e?.8:1),"zoom-out"===n&&(r=e?1.2:1),"slide-right"===n&&(r=e?"100%":"0"),"slide-bottom"===n&&(r=e?"100%":"0")),t.animation[t.animationMode()[n]](r)};return"string"===typeof this.modeClass?n(e,this.modeClass):this.modeClass.forEach((function(t){n(e,t)})),this.animation},animationType:function(e){return{fade:e?0:1,"slide-top":"translateY(".concat(e?"0":"-100%",")"),"slide-right":"translateX(".concat(e?"0":"100%",")"),"slide-bottom":"translateY(".concat(e?"0":"100%",")"),"slide-left":"translateX(".concat(e?"0":"-100%",")"),"zoom-in":"scaleX(".concat(e?1:.8,") scaleY(").concat(e?1:.8,")"),"zoom-out":"scaleX(".concat(e?1:1.2,") scaleY(").concat(e?1:1.2,")")}},animationMode:function(){return{fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}},toLine:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}}};t.default=l}).call(this,n("f3b9")["default"])},ed45:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports["default"]=e.exports},ed83:function(e,t,n){"use strict";(function(e){var r=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.Behavior=function(e){return e},t.Component=function(t){var n=function(t){var n=t.data,r=t.options,i=t.methods,a=t.behaviors,o=t.lifetimes,s=t.observers,l=t.relations,f=t.properties,p=t.pageLifetimes,h=t.externalClasses,v={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return c(v),u(n,v),function(e,t){if(!e)return;t.mpOptions.options=e}(r,v),S(i,v),A(a,v),function(e,t){if(!e)return;T(e,t)}(o,v),function(e,t){if(!e)return;var n=t.mpOptions.mpObservers;Object.keys(e).forEach((function(t){n.push({paths:C(t),observer:e[t]})}))}(s,v),function(t,n){if(!t)return;Object.keys(t).forEach((function(n){var r=t[n];r.name=n,r.target=r.target?String(r.target):function(e,t){0===t.indexOf("/")&&(e="");var n=e.split("/"),r=t.split("/");n.pop();while(r.length){var i=r.shift();""!==i&&"."!==i&&(".."!==i?n.push(i):n.pop())}return n.join("/")}(e.__wxRoute,n)})),n.mpOptions.relations=t}(l,v),x(f,v),function(e,t){if(!e)return;w.forEach((function(n){var r=e[n];d(r)&&(t[b[n]]=r)}))}(p,v),function(e,t){if(!e)return;Array.isArray(e)||(e=[e]);t.mpOptions.externalClasses=e,t.mpOptions.properties||(t.mpOptions.properties=Object.create(null));e.forEach((function(e){t.mpOptions.properties[g(e)]={type:String,value:""}}))}(h,v),T(t,v),I(t),v}(t);n.mixins.unshift(Q),n.mpOptions.path=e.__wxRoute,function(e){e.onServiceAttached||(e.onServiceAttached=[]);e.onServiceAttached.push((function(){R(this,"linked")}))}(n),e.__wxComponents[e.__wxRoute]=n},t.Page=function(t){var n=function(e){var t={mixins:[],mpOptions:{}};return c(t),u(e.data,t),function(e,t){var n=Object.create(null);Object.keys(e).forEach((function(t){var r=e[t];d(r)&&-1===k.indexOf(t)&&(n[t]=r)})),t.methods=n}(e,t),function(e,t){Object.keys(e).forEach((function(n){-1!==k.indexOf(n)&&(t[n]=e[n])}))}(e,t),t}(t);n.mixins.unshift(Q),n.mpOptions.path=e.__wxRoute,e.__wxComponents[e.__wxRoute]=n},t.nextTick=t.default=void 0;var i,a=r(n("7ca3")),o=r(n("34cf")),s=r(n("951c"));function u(e,t){e&&(t.mpOptions.data=e)}function c(t){t.components=e.__wxVueOptions.components}var l=Object.prototype.toString,f=Object.prototype.hasOwnProperty;function d(e){return"function"===typeof e}function p(e){return"[object Object]"===l.call(e)}function h(e,t){return f.call(e,t)}function v(){}var m=/-(\w)/g,g=function(e){var t=Object.create(null);return function(n){var r=t[n];return r||(t[n]=e(n))}}((function(e){return e.replace(m,(function(e,t){return t?t.toUpperCase():""}))})),y={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},_=Object.keys(y),b={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},w=Object.keys(b),k=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function x(e,t){e&&(t.mpOptions.properties=e)}function S(e,t){e&&(e.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete e.$emit),t.methods=e)}function T(e,t){_.forEach((function(n){h(e,n)&&(t[y[n]]||(t[y[n]]=[])).push(e[n])}))}var O={"wx://form-field":{},"wx://component-export":{}};function I(e,t){(function(e){var t=e.behaviors,n=e.definitionFilter,r=[];if(Array.isArray(t)&&t.forEach((function(t){t="string"===typeof t?O[t]:t,t.definitionFilter&&(r.push(t.definitionFilter),t.definitionFilter.call(null,e,[]))})),d(n));})(e)}var P={"wx://form-field":{beforeCreate:function(){var e=this.$options.mpOptions;e.properties||(e.properties=Object.create(null));var t=e.properties;h(t,"name")||(t.name={type:String}),h(t,"value")||(t.value={type:String})}}};function A(e,t){e&&e.forEach((function(e){"string"===typeof e?P[e]&&t.mixins.push(P[e]):t.mixins.push(function(e){var t=e.data,n=e.methods,r=e.behaviors,i=e.properties,a={watch:{},mpOptions:{mpObservers:[]}};return u(t,a),S(n,a),A(r,a),x(i,a),T(e,a),I(e),a}(e))}))}function C(e){return e.split(",").map((function(e){return function(e){return e.split(".")}(e)}))}function E(e,t,n,r){if(t){var i="_$".concat(e,"Handlers");(r[i]||(r[i]=[])).push((function(){t.call(r,n)}))}}function D(e,t,n){var r=e.name,i=n._$relationNodes||(n._$relationNodes=Object.create(null));(i[r]||(i[r]=[])).push(t),E("linked",e["linked"],t,n)}function L(e,t,n){E("unlinked",e["unlinked"],t,n)}function $(e,t,n){var r=e&&e.$options.mpOptions&&e.$options.mpOptions.relations;if(!r)return[];var i=Object.keys(r).find((function(e){var i=r[e];return i.target===t&&i.type===n}));return i?[r[i],e]:[]}function M(e,t,n){var r=n(e,e.$options.mpOptions.path),i=(0,o.default)(r,2),a=i[0],s=i[1];a&&(D(a,e,s),D(t,s,e),L(a,e,s),L(t,s,e))}function j(e){var t=e.$options.mpOptions||{},n=t.relations;n&&Object.keys(n).forEach((function(t){(function(e,t){var n=e.type;"parent"===n?M(t,e,(function(e,t){return $(e.$parent,t,"child")})):"ancestor"===n&&M(t,e,(function(e,t){var n=e.$parent;while(n){var r=$(n,t,"descendant");if(r.length)return r;n=n.$parent}return[]}))})(n[t],e)}))}function R(e,t){var n=e["_$".concat(t,"Handlers")];n&&n.forEach((function(e){return e()}))}var N={enumerable:!0,configurable:!0,get:v,set:v};function U(e,t,n){N.get=function(){return this[t][n]},N.set=function(e){this[t][n]=e},Object.defineProperty(e,n,N)}function F(e,t){var n=this;p(e)&&(Object.keys(e).forEach((function(t){(function(e,t,n){var r=e.replace(/\[(\d+?)\]/g,".$1").split(".");return r.reduce((function(e,n,i){if(i!==r.length-1)return"undefined"===typeof e[n]&&(e[n]={}),e[n];e[n]=t}),n),1===r.length})(t,e[t],n.data)&&!h(n,t)&&U(n,"__data__",t)})),this.$forceUpdate(),d(t)&&this.$nextTick(t))}var q=Object.prototype.toString,B=function(e){return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=q.call(n);if("[object Array]"===r)return t=n.slice(0),t;if("[object Object]"===r){for(var i in n)t[i]=e(t[i],n[i]);return t}if("[object Date]"===r)return new Date(n.getTime());if("[object RegExp]"===r){var a=String(n),o=a.lastIndexOf("/");return new RegExp(a.slice(1,o),a.slice(o+1))}return n}("[object Array]"===q.call(e)?[]:{},e)},H=(i={},(0,a.default)(i,String,""),(0,a.default)(i,Number,0),(0,a.default)(i,Boolean,!1),(0,a.default)(i,Object,null),(0,a.default)(i,Array,[]),(0,a.default)(i,null,null),i);function K(e){return H[e]}function V(e){return p(e)?e.type:e}function J(e,t,n,r){var i=n[e];if(void 0!==i){var a=t[e],o=V(a);i=W(i,o);var s=a&&a.observer;return s&&setTimeout((function(){G(s,r,i)}),4),i}return function(e){return p(e)?h(e,"value")?e.value:K(e.type):K(e)}(t[e])}function W(e,t){return t===Boolean?!!e:t===String?String(e):e}function G(e,t,n,r){try{"function"===typeof e?e.call(t,n,r):"string"===typeof e&&"function"===typeof t[e]&&t[e](n,r)}catch(i){console.error("execute observer ".concat(e," callback fail! err: ").concat(i))}}function z(e){var t=e.$options.mpOptions&&e.$options.mpOptions.properties,n=e.$options.propsData;n&&t&&Object.keys(t).forEach((function(r){h(n,r)&&(e[r]=W(n[r],V(t[r])))}))}function Y(e){var t=JSON.parse(JSON.stringify(e.$options.mpOptions.data||{}));e["__data__"]=t;var n={get:function(){return e["__data__"]},set:function(t){e["__data__"]=t}};Object.defineProperties(e,{data:n,properties:n}),e.setData=F,function(e,t){var n=e.$options.mpOptions.properties;if(n){var r=B(e.$options.propsData)||{},i=function(i){var a=!!p(n[i])&&n[i].observer,o=J(i,n,r,e);Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){var n=o;t===o||t!==t&&o!==o||(o=Array.isArray(t)?t.slice(0):t,a&&G(a,e,t,n),e.$forceUpdate())}})};for(var a in n)i(a)}}(e,t),Object.keys(t).forEach((function(t){U(e,"__data__",t)}))}var Q={beforeCreate:function(){this._renderProxy=this,this._$self=this,this._$noop=v},created:function(){Y(this),function(e){var t=e.$emit;e.triggerEvent=function(n,r,i){var a={dataset:e.$el.dataset},o={target:a,currentTarget:a,detail:r,preventDefault:v,stopPropagation:v};t.call(e,n,o)},e.$emit=function(){e.triggerEvent.apply(e,arguments)},e.getRelationNodes=function(t){return(e._$relationNodes&&e._$relationNodes[t]||[]).filter((function(e){return!e._isDestroyed}))},e._$updateProperties=z}(this),j(this)},mounted:function(){(function(e){var t=e.$options.watch;t&&Object.keys(t).forEach((function(n){var r=t[n];if(r.mounted){var i=e[n],a=r.handler;"string"===typeof a&&(a=e[a]),a&&a.call(e,i,i)}}))})(this)},destroyed:function(){R(this,"unlinked")}};e.__wxRoute="",e.__wxComponents=Object.create(null),e.__wxVueOptions=Object.create(null);var X=s.default.nextTick;t.nextTick=X;var Z=uni.__$wx__,ee=Z;t.default=ee}).call(this,n("0ee4"))},ee10:function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports["default"]=e.exports},f33e:function(e,t,n){"use strict";n.r(t);var r=n("4d61"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=i.a},f3b9:function(e,t,n){"use strict";function r(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)}function i(){return"string"===typeof __channelId__&&__channelId__}function a(e,t){switch(r(t)){case"Function":return"function() { [native code] }";default:return t}}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console[e].apply(console,n)}function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.shift();if(i())return t.push(t.pop().replace("at ","uni-app:///")),console[o].apply(console,t);var s=t.map((function(e){var t=Object.prototype.toString.call(e).toLowerCase();if("[object object]"===t||"[object array]"===t)try{e="---BEGIN:JSON---"+JSON.stringify(e,a)+"---END:JSON---"}catch(i){e=t}else if(null===e)e="---NULL---";else if(void 0===e)e="---UNDEFINED---";else{var n=r(e).toUpperCase();e="NUMBER"===n||"BOOLEAN"===n?"---BEGIN:"+n+"---"+e+"---END:"+n+"---":String(e)}return e})),u="";if(s.length>1){var c=s.pop();u=s.join("---COMMA---"),0===c.indexOf(" at ")?u+=c:u+="---COMMA---"+c}else u=s[0];console[o](u)}n.r(t),n.d(t,"log",(function(){return o})),n.d(t,"default",(function(){return s}))},fc73:function(e,t,n){"use strict";(function(e,r){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return new Promise((function(t,n){(0,s.default)().then(function(){var i=(0,o.default)(a.default.mark((function i(o){var s,u,c,l;return a.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=o.code,u=o.message,c=o.url,!(s>0)){i.next=16;break}return i.next=6,e.getTempFileURL({fileList:[c]});case 6:if(l=i.sent,"undefined"!==typeof l.fileList[0].tempFileURL&&(o.url=l.fileList[0].tempFileURL),!o.is_silently){i.next=11;break}return uni.downloadFile({url:c,success:function(e){200==e.statusCode&&plus.runtime.install(e.tempFilePath,{force:!1})}}),i.abrupt("return");case 11:return uni.setStorageSync("__package_info__",o),uni.navigateTo({url:"/uni_modules/uni-upgrade-center-app/pages/upgrade-popup?local_storage_key=".concat("__package_info__"),fail:function(e){r("error","\u66f4\u65b0\u5f39\u6846\u8df3\u8f6c\u5931\u8d25",e," at uni_modules/uni-upgrade-center-app/utils/check-update.ts:46"),uni.removeStorageSync("__package_info__")}}),i.abrupt("return",t(o));case 16:if(!(s<0)){i.next=19;break}return r("error",u," at uni_modules/uni-upgrade-center-app/utils/check-update.ts:53"),i.abrupt("return",n(o));case 19:return i.abrupt("return",t(o));case 20:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){n(e)}))}))};var a=i(n("127e")),o=i(n("ee10")),s=i(n("2d67"))}).call(this,n("861b")["uniCloud"],n("f3b9")["default"])}},[["27f0","app-config"]]]);